
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>第十一章 霍夫曼排序 · FPGA并行编程</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="xupsh">
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-yahei/yahei.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-disqus/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-image-captions/image-captions.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-anchor-navigation-ex-toc/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-hints/plugin-hints.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="SKIPGLOSSARY.html" />
    
    
    <link rel="prev" href="10-Sorting-Algorithms.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"buttons":[{"user":"xupsh","repo":"pp4fpgas-cn","type":"star","size":"small","count":true}]};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">序</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="PREFACE.html">
            
                <a href="PREFACE.html">
            
                    
                    译序
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">README</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="./">
            
                <a href="./">
            
                    
                    FPGA并行编程
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">正文</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="00-Preface.html">
            
                <a href="00-Preface.html">
            
                    
                    第零章 前言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="01-Introduction.html">
            
                <a href="01-Introduction.html">
            
                    
                    第一章 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="02-Finite-Impulse-Response-Filters.html">
            
                <a href="02-Finite-Impulse-Response-Filters.html">
            
                    
                    第二章 FIR滤波器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="03-CORDIC.html">
            
                <a href="03-CORDIC.html">
            
                    
                    第三章 CORDIC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="04-Discrete-Fourier-Transform.html">
            
                <a href="04-Discrete-Fourier-Transform.html">
            
                    
                    第四章 离散傅立叶变换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="05-Fast-Fourier-Transform.html">
            
                <a href="05-Fast-Fourier-Transform.html">
            
                    
                    第五章 快速傅里叶变换
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="06-Sparse-Matrix-Vector-Multiplication.html">
            
                <a href="06-Sparse-Matrix-Vector-Multiplication.html">
            
                    
                    第六章 稀疏矩阵向量乘法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="07-Matrix-Multiplication.html">
            
                <a href="07-Matrix-Multiplication.html">
            
                    
                    第七章 矩阵乘法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="08-Prefix-Sum-and-Histogram.html">
            
                <a href="08-Prefix-Sum-and-Histogram.html">
            
                    
                    第八章 前缀和与直方图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="09-Video-Systems.html">
            
                <a href="09-Video-Systems.html">
            
                    
                    第九章 视频系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.11" data-path="10-Sorting-Algorithms.html">
            
                <a href="10-Sorting-Algorithms.html">
            
                    
                    第十章 排序算法
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="3.12" data-path="11-Huffman-Encoding.html">
            
                <a href="11-Huffman-Encoding.html">
            
                    
                    第十一章 霍夫曼排序
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">附录</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="SKIPGLOSSARY.html">
            
                <a href="SKIPGLOSSARY.html">
            
                    
                    词汇表汇总
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="BIBLIOGRAPHY.html">
            
                <a href="BIBLIOGRAPHY.html">
            
                    
                    参考文献
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >第十一章 霍夫曼排序</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div class="search-plus" id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-anchor"></i><ul><li><span class="title-icon "></span><a href="#&#x7B2C;&#x5341;&#x4E00;&#x7AE0;-&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;"><b></b>&#x7B2C;&#x5341;&#x4E00;&#x7AE0; &#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;</a></li><ul><li><span class="title-icon "></span><a href="#111-&#x80CC;&#x666F;"><b></b>11.1 &#x80CC;&#x666F;</a></li><li><span class="title-icon "></span><a href="#112-&#x5B9E;&#x73B0;"><b></b>11.2 &#x5B9E;&#x73B0;</a></li><ul><li><span class="title-icon "></span><a href="#1121-&#x8FC7;&#x6EE4;"><b></b>11.2.1 &#x8FC7;&#x6EE4;</a></li><li><span class="title-icon "></span><a href="#1122-&#x5206;&#x7C7B;"><b></b>11.2.2 &#x5206;&#x7C7B;</a></li><li><span class="title-icon "></span><a href="#1123-&#x521B;&#x5EFA;&#x6811;"><b></b>11.2.3 &#x521B;&#x5EFA;&#x6811;</a></li><li><span class="title-icon "></span><a href="#1124-&#x8BA1;&#x7B97;&#x6BD4;&#x7279;&#x957F;&#x5EA6;"><b></b>11.2.4 &#x8BA1;&#x7B97;&#x6BD4;&#x7279;&#x957F;&#x5EA6;</a></li><li><span class="title-icon "></span><a href="#1125-&#x622A;&#x65AD;&#x6811;"><b></b>11.2.5 &#x622A;&#x65AD;&#x6811;</a></li><li><span class="title-icon "></span><a href="#1126-canonize&#x6811;"><b></b>11.2.6 Canonize&#x6811;</a></li><li><span class="title-icon "></span><a href="#1127-&#x521B;&#x5EFA;&#x7801;&#x5B57;"><b></b>11.2.7 &#x521B;&#x5EFA;&#x7801;&#x5B57;</a></li><li><span class="title-icon "></span><a href="#1128-&#x6D4B;&#x8BD5;&#x5E73;&#x53F0;"><b></b>11.2.8 &#x6D4B;&#x8BD5;&#x5E73;&#x53F0;</a></li></ul><li><span class="title-icon "></span><a href="#113-&#x7ED3;&#x8BBA;"><b></b>11.3 &#x7ED3;&#x8BBA;</a></li></ul></ul></div><a href="#&#x7B2C;&#x5341;&#x4E00;&#x7AE0;-&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="&#x7B2C;&#x5341;&#x4E00;&#x7AE0;-&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;"><a name="&#x7B2C;&#x5341;&#x4E00;&#x7AE0;-&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;" class="anchor-navigation-ex-anchor" href="#&#x7B2C;&#x5341;&#x4E00;&#x7AE0;-&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;"><i class="fa fa-link" aria-hidden="true"></i></a>&#x7B2C;&#x5341;&#x4E00;&#x7AE0; &#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;</h1>
<h2 id="111-&#x80CC;&#x666F;"><a name="111-&#x80CC;&#x666F;" class="anchor-navigation-ex-anchor" href="#111-&#x80CC;&#x666F;"><i class="fa fa-link" aria-hidden="true"></i></a>11.1 &#x80CC;&#x666F;</h2>
<p>&#x65E0;&#x635F;&#x6570;&#x636E;&#x538B;&#x7F29;&#x662F;&#x9AD8;&#x6548;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x5173;&#x952E;&#x8981;&#x7D20;&#xFF0C;&#x800C;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x5219;&#x662F;&#x5176;&#x4E2D;&#x6700;&#x6D41;&#x884C;&#x7684;&#x53EF;&#x53D8;&#x957F;&#x5EA6;&#x7F16;&#x7801;&#x7B97;&#x6CD5;[<a href="BIBLIOGRAPHY.html#33">33</a>]&#x3002; &#x7ED9;&#x5B9A;&#x4E00;&#x7EC4;&#x6570;&#x636E;&#x7B26;&#x53F7;&#x4EE5;&#x53CA;&#x5B83;&#x4EEC;&#x51FA;&#x73B0;&#x7684;&#x9891;&#x7387;&#xFF0C;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x5C06;&#x4EE5;&#x66F4;&#x77ED;&#x7684;&#x4EE3;&#x7801;&#x5206;&#x914D;&#x7ED9;&#x66F4;&#x9891;&#x7E41;&#xFF08;&#x51FA;&#x73B0;&#x7684;&#xFF09;&#x7B26;&#x53F7;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x751F;&#x6210;&#x7801;&#x5B57;&#x6765;&#x6700;&#x5C0F;&#x5316;&#x5E73;&#x5747;&#x4EE3;&#x7801;&#x957F;&#x5EA6;&#x3002;&#x7531;&#x4E8E;&#x5B83;&#x4FDD;&#x8BC1;&#x4E86;&#x6700;&#x4F18;&#x6027;&#xFF0C;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x5DF2;&#x88AB;&#x5404;&#x79CD;&#x5E94;&#x7528;&#x5E7F;&#x6CDB;&#x91C7;&#x7528;[<a href="BIBLIOGRAPHY.html#25">25</a>]&#x3002; &#x5728;&#x73B0;&#x4EE3;&#x591A;&#x7EA7;&#x538B;&#x7F29;&#x8BBE;&#x8BA1;&#x4E2D;&#xFF0C;&#x5B83;&#x7ECF;&#x5E38;&#x7528;&#x4F5C;&#x7CFB;&#x7EDF;&#x7684;&#x540E;&#x7AEF;&#xFF0C;&#x6765;&#x63D0;&#x9AD8;&#x7279;&#x5B9A;&#x9886;&#x57DF;&#x524D;&#x7AEF;&#x7684;&#x538B;&#x7F29;&#x6027;&#x80FD;&#xFF0C;&#x5982;GZIP[<a href="BIBLIOGRAPHY.html#23">23</a>]&#xFF0C;JPEG[<a href="BIBLIOGRAPHY.html#57">57</a>]&#x548C;MP3[<a href="BIBLIOGRAPHY.html#59">59</a>]&#x3002; &#x5C3D;&#x7BA1;&#x7B97;&#x672F;&#x7F16;&#x7801;[<a href="BIBLIOGRAPHY.html#61">61</a>]&#xFF08;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x7684;&#x4E00;&#x4E2A;&#x5E7F;&#x4E49;&#x7248;&#x672C;&#xFF0C;&#x5B83;&#x5C06;&#x6574;&#x4E2A;&#x6D88;&#x606F;&#x8F6C;&#x6362;&#x4E3A;&#x5355;&#x4E2A;&#x6570;&#x5B57;&#xFF09;&#x53EF;&#x4EE5;&#x5BF9;&#x5927;&#x591A;&#x6570;&#x573A;&#x666F;&#x5B9E;&#x73B0;&#x66F4;&#x597D;&#x7684;&#x538B;&#x7F29;&#xFF0C;&#x4F46;&#x662F;&#x7531;&#x4E8E;&#x7B97;&#x672F;&#x7F16;&#x7801;&#x4E13;&#x5229;&#x95EE;&#x9898;[<a href="BIBLIOGRAPHY.html#38">38</a>]&#xFF0C;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x901A;&#x5E38;&#x6210;&#x4E3A;&#x8BB8;&#x591A;&#x7CFB;&#x7EDF;&#x7684;&#x9996;&#x9009;&#x7B97;&#x6CD5;&#x3002;</p>
<p>Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x4E0E;&#x4F20;&#x7EDF;&#x7684;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x76F8;&#x6BD4;&#x6709;&#x4E24;&#x5927;&#x4F18;&#x52BF;&#x3002; &#x5728;&#x57FA;&#x672C;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x4E2D;&#xFF0C;&#x7F16;&#x7801;&#x5668;&#x5C06;&#x5B8C;&#x6574;&#x970D;&#x592B;&#x66FC;&#x6811;&#x7ED3;&#x6784;&#x4F20;&#x9012;&#x7ED9;&#x89E3;&#x7801;&#x5668;&#x3002; &#x56E0;&#x6B64;&#xFF0C;&#x89E3;&#x7801;&#x5668;&#x5FC5;&#x987B;&#x904D;&#x5386;&#x6811;&#x6765;&#x89E3;&#x7801;&#x6BCF;&#x4E2A;&#x7F16;&#x7801;&#x7684;&#x7B26;&#x53F7;&#x3002; &#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x4EC5;&#x5C06;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x4F4D;&#x6570;&#x4F20;&#x9001;&#x7ED9;&#x89E3;&#x7801;&#x5668;&#xFF0C;&#x7136;&#x540E;&#x89E3;&#x7801;&#x5668;&#x91CD;&#x6784;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x7801;&#x5B57;&#x3002;&#x8FD9;&#x4F7F;&#x5F97;&#x89E3;&#x7801;&#x5668;&#x5728;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x548C;&#x8BA1;&#x7B97;&#x9700;&#x6C42;&#x4E2D;&#x66F4;&#x52A0;&#x9AD8;&#x6548;&#x3002; &#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x4E13;&#x6CE8;&#x4E8E;Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x3002;</p>
<p>&#x5728;&#x57FA;&#x672C;&#x7684;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x4E2D;&#xFF0C;&#x89E3;&#x7801;&#x5668;&#x901A;&#x8FC7;&#x904D;&#x5386;&#x970D;&#x592B;&#x66FC;&#x6811;&#xFF0C;&#x4ECE;&#x6839;&#x5F00;&#x59CB;&#x76F4;&#x5230;&#x5B83;&#x5230;&#x8FBE;&#x53F6;&#x8282;&#x70B9;&#x6765;&#x89E3;&#x538B;&#x7F29;&#x6570;&#x636E;&#x3002;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x6709;&#x4E24;&#x4E2A;&#x4E3B;&#x8981;&#x7F3A;&#x70B9;&#xFF1A;&#x7B2C;&#x4E00;&#x3001;&#x5B83;&#x9700;&#x8981;&#x5B58;&#x50A8;&#x6574;&#x4E2A;&#x970D;&#x592B;&#x66FC;&#x6811;&#xFF0C;&#x4ECE;&#x800C;&#x589E;&#x52A0;&#x4E86;&#x5185;&#x5B58;&#x4F7F;&#x7528;&#x91CF;&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x4E3A;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x904D;&#x5386;&#x6811;&#x7684;&#x8BA1;&#x7B97;&#x6210;&#x672C;&#x662F;&#x5F88;&#x9AD8;&#x7684;&#x3002;Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x6807;&#x51C6;&#x7684;&#x89C4;&#x8303;&#x683C;&#x5F0F;&#x521B;&#x5EFA;&#x4EE3;&#x7801;&#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E24;&#x4E2A;&#x95EE;&#x9898;&#x3002;&#x4F7F;&#x7528;Canonical&#x7F16;&#x7801;&#x7684;&#x597D;&#x5904;&#x5728;&#x4E8E;&#xFF1A;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x4F20;&#x8F93;&#x6BCF;&#x4E2A;&#x970D;&#x592B;&#x66FC;&#x7801;&#x5B57;&#x7684;&#x957F;&#x5EA6;&#x3002;&#x4E00;&#x4E2A;Canonical&#x970D;&#x592B;&#x66FC;&#x4EE3;&#x7801;&#x5177;&#x6709;&#x4E24;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x5C5E;&#x6027;&#xFF1A;&#x9996;&#x5148;&#xFF0C;&#x8F83;&#x957F;&#x4EE3;&#x7801;&#x6BD4;&#x76F8;&#x540C;&#x957F;&#x5EA6;&#x524D;&#x7F00;&#x7684;&#x8F83;&#x77ED;&#x4EE3;&#x7801;&#x5177;&#x6709;&#x66F4;&#x9AD8;&#x7684;&#x6570;&#x503C;&#x3002;&#x5176;&#x6B21;&#xFF0C;&#x5177;&#x6709;&#x76F8;&#x540C;&#x957F;&#x5EA6;&#x7684;&#x4EE3;&#x7801;&#x968F;&#x7740;&#x7B26;&#x53F7;&#x503C;&#x7684;&#x589E;&#x52A0;&#x800C;&#x589E;&#x52A0;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x6BCF;&#x4E2A;&#x4EE3;&#x7801;&#x957F;&#x5EA6;&#x7684;&#x8D77;&#x59CB;&#x7B26;&#x53F7;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x91CD;&#x5EFA;Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x3002;&#x970D;&#x592B;&#x66FC;&#x6811;&#x672C;&#x8D28;&#x4E0A;&#x7B49;&#x540C;&#x4E8E;&#x201C;&#x6392;&#x5E8F;&#x201D;&#x7248;&#x672C;&#x7684;&#x539F;&#x59CB;&#x970D;&#x592B;&#x66FC;&#x6811;&#xFF0C;&#x4EE5;&#x4FBF;&#x66F4;&#x957F;&#x7684;&#x7801;&#x5B57;&#x5728;&#x6811;&#x7684;&#x6700;&#x53F3;&#x8FB9;&#x7684;&#x5206;&#x652F;&#x4E0A;&#xFF0C;&#x6811;&#x7684;&#x540C;&#x4E00;&#x7EA7;&#x522B;&#x4E0A;&#x7684;&#x6240;&#x6709;&#x8282;&#x70B9;&#x6309;&#x7167;&#x7B26;&#x53F7;&#x7684;&#x987A;&#x5E8F;&#x6392;&#x5E8F;&#x3002;</p>
<figure id="fig3.12.1"><img src="images/canonical_huffman_flow.jpg" alt="&#x56FE;11.1&#xFF1A;Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x8FC7;&#x7A0B;&#x3002; &#x7B26;&#x53F7;&#x88AB;&#x8FC7;&#x6EE4;&#x3001;&#x6392;&#x5E8F;&#xFF0C;&#x5E76;&#x4E14;&#x88AB;&#x7528;&#x6765;&#x5EFA;&#x9020;&#x970D;&#x592B;&#x66FC;&#x6811;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5C06;&#x6574;&#x4E2A;&#x6811;&#x4F20;&#x9012;&#x7ED9;&#x89E3;&#x7801;&#x5668;&#xFF08;&#x5C31;&#x50CF;&#x201C;&#x57FA;&#x672C;&#x7684;&#x201D; &#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x6240;&#x5B8C;&#x6210;&#x7684;&#x90A3;&#x6837;&#xFF09;&#xFF0C;&#x8FD9;&#x6837;&#x7F16;&#x7801;&#x4F7F;&#x5F97;&#x53EA;&#x6709;&#x6811;&#x7684;&#x7B26;&#x53F7;&#x957F;&#x5EA6;&#x662F;&#x89E3;&#x7801;&#x5668;&#x6240;&#x9700;&#x8981;&#x7684;&#x3002; &#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x6700;&#x7EC8;Canonical&#x6811;&#x4E0E;&#x521D;&#x59CB;&#x6811;&#x5728;&#x6D41;&#x7A0B;&#x5F00;&#x59CB;&#x521B;&#x5EFA;&#x65F6;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x3002;"><figcaption>&#x56FE;11.1&#xFF1A;Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x8FC7;&#x7A0B;&#x3002; &#x7B26;&#x53F7;&#x88AB;&#x8FC7;&#x6EE4;&#x3001;&#x6392;&#x5E8F;&#xFF0C;&#x5E76;&#x4E14;&#x88AB;&#x7528;&#x6765;&#x5EFA;&#x9020;&#x970D;&#x592B;&#x66FC;&#x6811;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5C06;&#x6574;&#x4E2A;&#x6811;&#x4F20;&#x9012;&#x7ED9;&#x89E3;&#x7801;&#x5668;&#xFF08;&#x5C31;&#x50CF;&#x201C;&#x57FA;&#x672C;&#x7684;&#x201D; &#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x6240;&#x5B8C;&#x6210;&#x7684;&#x90A3;&#x6837;&#xFF09;&#xFF0C;&#x8FD9;&#x6837;&#x7F16;&#x7801;&#x4F7F;&#x5F97;&#x53EA;&#x6709;&#x6811;&#x7684;&#x7B26;&#x53F7;&#x957F;&#x5EA6;&#x662F;&#x89E3;&#x7801;&#x5668;&#x6240;&#x9700;&#x8981;&#x7684;&#x3002; &#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x6700;&#x7EC8;Canonical&#x6811;&#x4E0E;&#x521D;&#x59CB;&#x6811;&#x5728;&#x6D41;&#x7A0B;&#x5F00;&#x59CB;&#x521B;&#x5EFA;&#x65F6;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x3002;</figcaption></figure>
<p>&#x56FE;11.1&#x5C55;&#x793A;&#x4E86;&#x521B;&#x5EFA;Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x7684;&#x8FC7;&#x7A0B;&#x3002;filter&#x6A21;&#x5757;&#x4EC5;&#x4F20;&#x9012;&#x975E;&#x96F6;&#x9891;&#x7387;&#x7684;&#x7B26;&#x53F7;&#x3002;sort&#x6A21;&#x5757;&#x6839;&#x636E;&#x5B83;&#x4EEC;&#x7684;&#x9891;&#x7387;&#x6309;&#x5347;&#x5E8F;&#x91CD;&#x65B0;&#x6392;&#x5217;&#x7B26;&#x53F7;&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;create tree&#x6A21;&#x5757;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x4E09;&#x4E2A;&#x6B65;&#x9AA4;&#x6784;&#x5EFA;&#x970D;&#x592B;&#x66FC;&#x6811;&#xFF1A;</p>
<ol>
<li>&#x4F7F;&#x7528;&#x4E24;&#x4E2A;&#x6700;&#x5C0F;&#x9891;&#x7387;&#x8282;&#x70B9;&#x4F5C;&#x4E3A;&#x521D;&#x59CB;&#x5B50;&#x6811;&#x5E76;&#x901A;&#x8FC7;&#x6C42;&#x5B83;&#x4EEC;&#x9891;&#x7387;&#x7684;&#x548C;&#x6765;&#x751F;&#x6210;&#x65B0;&#x7684;&#x7236;&#x8282;&#x70B9;&#xFF1B;</li>
<li>&#x5B83;&#x5C06;&#x65B0;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x6DFB;&#x52A0;&#x5230;&#x5217;&#x8868;&#x4E2D;&#xFF0C;&#x5E76;&#x518D;&#x6B21;&#x5206;&#x7C7B;;</li>
<li>&#x5B83;&#x4ECE;&#x5217;&#x8868;&#x4E2D;&#x9009;&#x62E9;&#x4E24;&#x4E2A;&#x6700;&#x5C0F;&#x5143;&#x7D20;&#x5E76;&#x91CD;&#x590D;&#x8FD9;&#x4E9B;&#x6B65;&#x9AA4;&#x76F4;&#x5230;&#x5269;&#x4E0B;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x4E3A;&#x6B62;&#x3002;</li>
</ol>
<p>&#x7ED3;&#x679C;&#x662F;&#x970D;&#x592B;&#x66FC;&#x6811;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x53F6;&#x8282;&#x70B9;&#x4EE3;&#x8868;&#x53EF;&#x4EE5;&#x88AB;&#x7F16;&#x7801;&#x7684;&#x7B26;&#x53F7;&#xFF0C;&#x5E76;&#x4E14;&#x6BCF;&#x4E2A;&#x5185;&#x90E8;&#x8282;&#x70B9;&#x88AB;&#x6807;&#x8BB0;&#x4E3A;&#x8BE5;&#x5B50;&#x6811;&#x8282;&#x70B9;&#x7684;&#x9891;&#x7387;&#x3002;&#x901A;&#x8FC7;&#x5C06;&#x6811;&#x4E2D;&#x7684;&#x5DE6;&#x8FB9;&#x548C;&#x53F3;&#x8FB9;&#x4E0E;&#x4F4D;0&#x548C;1&#x76F8;&#x5173;&#x8054;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4ECE;&#x6839;&#x8282;&#x70B9;&#x5230;&#x8FBE;&#x5B83;&#x7684;&#x8DEF;&#x5F84;&#x6765;&#x786E;&#x5B9A;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x552F;&#x4E00;&#x7684;&#x7801;&#x5B57;&#x3002;&#x4F8B;&#x5982;&#xFF0C;A&#x7684;&#x7801;&#x5B57;&#x662F;00&#xFF0C;&#x800C;B&#x7684;&#x7801;&#x5B57;&#x662F;1110&#x3002;
&#x8FD9;&#x6837;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x57FA;&#x672C;&#x7684;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x8FC7;&#x7A0B;&#xFF0C;&#x4F46;&#x662F;&#x5BF9;&#x4E8E;&#x521B;&#x5EFA;Canonical&#x970D;&#x592B;&#x66FC;&#x6811;&#x8FD9;&#x5E76;&#x4E0D;&#x662F;&#x5FC5;&#x987B;&#x7684;&#x3002;</p>
<p>&#x4E3A;&#x4E86;&#x521B;&#x5EFA;&#x970D;&#x592B;&#x66FC;&#x6811;&#xFF0C;&#x6211;&#x4EEC;&#x505A;&#x4E86;&#x51E0;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x8F6C;&#x6362;&#x3002; &#x9996;&#x5148;&#xFF0C;compute bit len&#x6A21;&#x5757;&#x8BA1;&#x7B97;&#x6BCF;&#x4E2A;&#x7801;&#x5B57;&#x7684;&#x4F4D;&#x957F;&#x5EA6;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x6BCF;&#x4E2A;&#x957F;&#x5EA6;&#x7684;&#x9891;&#x7387;&#x8FDB;&#x884C;&#x8BA1;&#x6570;&#xFF0C;&#x7ED3;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x7801;&#x5B57;&#x957F;&#x5EA6;&#x7684;&#x76F4;&#x65B9;&#x56FE;&#xFF08;&#x89C1;&#x7B2C;8.2&#x8282;&#xFF09;&#x3002; &#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x4E09;&#x4E2A;&#x7B26;&#x53F7;&#xFF08;A&#xFF0C;D&#xFF0C;E&#xFF09;&#xFF0C;&#x4EE3;&#x7801;&#x957F;&#x5EA6;&#x4E3A;2&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x8BA1;&#x7B97;&#x7684;&#x76F4;&#x65B9;&#x56FE;&#x8868;&#x4E2D;&#x5305;&#x542B;&#x4E86;&#x4F4D;&#x7F6E;2&#x4E2D;&#x7684;&#x6570;&#x503C;3&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;truncate tree&#x6A21;&#x5757;&#x91CD;&#x65B0;&#x5E73;&#x8861;&#x970D;&#x592B;&#x66FC;&#x6811;&#x4EE5;&#x907F;&#x514D;&#x51FA;&#x73B0;&#x8FC7;&#x957F;&#x7684;&#x7801;&#x5B57;&#x3002;&#x8FD9;&#x53EF;&#x4EE5;&#x5728;&#x7F16;&#x7801;&#x65F6;&#x95F4;&#x7A0D;&#x5FAE;&#x589E;&#x52A0;&#x7684;&#x4EE3;&#x4EF7;&#x4E0B;&#x63D0;&#x9AD8;&#x89E3;&#x7801;&#x5668;&#x7684;&#x901F;&#x5EA6;&#x3002; &#x8FD9;&#x5728;&#x56FE;11.1&#x7684;&#x793A;&#x4F8B;&#x4E2D;&#x4E0D;&#x662F;&#x5FC5;&#x9700;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x8BBE;&#x5B9A;&#x4E86;&#x6811;&#x7684;&#x6700;&#x5927;&#x9AD8;&#x5EA6;&#x4E3A;27&#x3002; &#x6700;&#x540E;&#xFF0C;canonize tree&#x6A21;&#x5757;&#x521B;&#x5EFA;&#x4E24;&#x4E2A;&#x6392;&#x5E8F;&#x8868;&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x8868;&#x683C;&#x5305;&#x542B;&#x4E86;&#x7B26;&#x53F7;&#x548C;&#x6309;&#x7B26;&#x53F7;&#x6392;&#x5E8F;&#x7684;&#x7B26;&#x53F7;&#x957F;&#x5EA6;&#x3002;&#x7B2C;&#x4E8C;&#x4E2A;&#x8868;&#x683C;&#x5305;&#x542B;&#x4E86;&#x7B26;&#x53F7;&#x548C;&#x6309;&#x957F;&#x5EA6;&#x6392;&#x5E8F;&#x7684;&#x7B26;&#x53F7;&#x957F;&#x5EA6;&#x3002; &#x8FD9;&#x4E9B;&#x8868;&#x683C;&#x7B80;&#x5316;&#x4E86;&#x4E3A;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x521B;&#x5EFA;Canonical&#x970D;&#x592B;&#x66FC;&#x7801;&#x5B57;&#x7684;&#x8FC7;&#x7A0B;&#x3002;</p>
<p>create codeword&#x6A21;&#x5757;&#x901A;&#x8FC7;&#x904D;&#x5386;&#x5DF2;&#x6392;&#x5E8F;&#x7684;&#x8868;&#x521B;&#x5EFA;Canonical&#x970D;&#x592B;&#x66FC;&#x7801;&#x5B57;&#x8868;&#x3002;&#x4ECE;&#x6392;&#x5E8F;&#x8868;&#x4E2D;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7801;&#x5B57;&#x5F00;&#x59CB;&#xFF0C;&#x5B83;&#x88AB;&#x5206;&#x914D;&#x4E86;&#x9002;&#x5F53;&#x957F;&#x5EA6;&#x5168;&#x96F6;&#x7801;&#x5B57;&#x3002;&#x6BCF;&#x4E2A;&#x5177;&#x6709;&#x76F8;&#x540C;&#x4F4D;&#x957F;&#x5EA6;&#x7684;&#x540E;&#x7EED;&#x7B26;&#x53F7;&#x88AB;&#x8D4B;&#x503C;&#x4E3A;&#x968F;&#x540E;&#x7684;&#x7801;&#x5B57;&#xFF0C;&#x5B83;&#x662F;&#x5728;&#x524D;&#x4E00;&#x4E2A;&#x7801;&#x5B57;&#x4E0A;&#x7B80;&#x5355;&#x5730;&#x52A0;1&#x800C;&#x5F62;&#x6210;&#x7684;&#x3002;&#x5728;&#x6211;&#x4EEC;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x7B26;&#x53F7;A&#xFF0C;D&#x548C;E&#x7684;&#x4F4D;&#x957F;&#x5EA6;&#x5747;&#x662F;l = 2&#xFF0C;&#x800C;&#x5206;&#x914D;&#x7684;&#x7801;&#x5B57;&#x5206;&#x522B;&#x662F;A = 00&#xFF0C;D = 01&#xFF0C;E = 10&#x3002; &#x8BF7;&#x6CE8;&#x610F;&#x7B26;&#x53F7;&#x662F;&#x6309;&#x5B57;&#x6BCD;&#x987A;&#x5E8F;&#x8003;&#x8651;&#x7684;&#xFF0C;&#x8FD9;&#x662F;&#x4F7F;&#x6811;&#x89C4;&#x8303;&#x5316;&#x6240;&#x5FC5;&#x9700;&#x7684;&#x3002;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x4E00;&#x76F4;&#x6301;&#x7EED;&#x76F4;&#x5230;&#x6211;&#x4EEC;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x9700;&#x8981;&#x4E00;&#x4E2A;&#x66F4;&#x5927;&#x957F;&#x5EA6;&#x7684;&#x7801;&#x5B57;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x4E0D;&#x4EC5;&#x589E;&#x52A0;&#x4E86;&#x5148;&#x524D;&#x7684;&#x7801;&#x5B57;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x5411;&#x5DE6;&#x79FB;&#x4F4D;&#x4EE5;&#x751F;&#x6210;&#x6B63;&#x786E;&#x957F;&#x5EA6;&#x7684;&#x7801;&#x5B57;&#x3002;&#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x4E0B;&#x4E00;&#x4E2A;&#x7B26;&#x53F7;&#x662F;C&#xFF0C;&#x957F;&#x5EA6;&#x4E3A;3&#xFF0C;&#x5176;&#x63A5;&#x6536;&#x7684;&#x7801;&#x5B57;C =&#xFF08;10 + 1&#xFF09;&lt;&lt; 1 = 11 &lt;&lt; 1 = 110&#x3002;&#x63A5;&#x4E0B;&#x6765;&#xFF0C;&#x4E0B;&#x4E00;&#x4E2A;&#x7B26;&#x53F7;&#x662F;B&#xFF0C;&#x957F;&#x5EA6;&#x4E3A;4.&#x518D;&#x4E00;&#x6B21;&#xFF0C;&#x6211;&#x4EEC;&#x589E;&#x52A0;&#x548C;&#x79FB;&#x4F4D;&#x4E00;&#x6B21;&#x3002;&#x4E8E;&#x662F;B&#x7684;&#x4EE3;&#x7801;&#x5B57;&#x4E3A;B =&#xFF08;110 + 1&#xFF09;&lt;&lt; 1 = 1110.&#x7B26;&#x53F7;F&#x7684;&#x6700;&#x7EC8;&#x7801;&#x5B57;&#x4E3A;F= 1110 + 1 = 1111&#x3002;&#x8BE6;&#x89C1;&#x7B2C;11.2.7&#x7AE0;&#x3002;</p>
<p>Canonical&#x970D;&#x592B;&#x66FC;&#x4EE3;&#x7801;&#x7684;&#x521B;&#x5EFA;&#x5305;&#x62EC;&#x8BB8;&#x591A;&#x590D;&#x6742;&#x7684;&#x548C;&#x5185;&#x5728;&#x7684;&#x987A;&#x5E8F;&#x8BA1;&#x7B97;&#x3002; &#x4F8B;&#x5982;&#xFF0C;create_tree&#x6A21;&#x5757;&#x9700;&#x8981;&#x8DDF;&#x8E2A;&#x88AB;&#x521B;&#x5EFA;&#x7684;&#x5B50;&#x6811;&#x7684;&#x6B63;&#x786E;&#x987A;&#x5E8F;&#x3001;&#x9700;&#x8981;&#x4ED4;&#x7EC6;&#x7684;&#x5185;&#x5B58;&#x7BA1;&#x7406;&#xFF0C;&#x53EF;&#x4EE5;&#x88AB;&#x5229;&#x7528;&#x7684;&#x5E76;&#x884C;&#x6027;&#x975E;&#x5E38;&#x6709;&#x9650;&#x3002;&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x6765;&#x8BA8;&#x8BBA;&#x4F7F;&#x7528;Vivado HLS&#x8FDB;&#x884C;Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x8BBE;&#x8BA1;&#x7684;&#x786C;&#x4EF6;&#x67B6;&#x6784;&#x548C;&#x5B9E;&#x73B0;&#x3002;</p>
<pre><code class="lang-c">
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;huffman.h&quot;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;assert.h&quot;</span></span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">huffman_encoding</span><span class="hljs-params">(
    <span class="hljs-comment">/* input */</span> Symbol symbol_histogram[INPUT_SYMBOL_SIZE],
    <span class="hljs-comment">/* output */</span> PackedCodewordAndLength encoding[INPUT_SYMBOL_SIZE],
    <span class="hljs-comment">/* output */</span> <span class="hljs-keyword">int</span> *num_nonzero_symbols)</span> </span>{
    <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS DATAFLOW</span>

    Symbol filtered[INPUT_SYMBOL_SIZE];
    Symbol sorted[INPUT_SYMBOL_SIZE];
    Symbol sorted_copy1[INPUT_SYMBOL_SIZE];
    Symbol sorted_copy2[INPUT_SYMBOL_SIZE];
    ap_uint&lt;SYMBOL_BITS&gt; parent[INPUT_SYMBOL_SIZE<span class="hljs-number">-1</span>];
    ap_uint&lt;SYMBOL_BITS&gt; left[INPUT_SYMBOL_SIZE<span class="hljs-number">-1</span>];
    ap_uint&lt;SYMBOL_BITS&gt; right[INPUT_SYMBOL_SIZE<span class="hljs-number">-1</span>];
    <span class="hljs-keyword">int</span> n;

    filter(symbol_histogram, filtered, &amp;n);
    sort(filtered, n, sorted);

    ap_uint&lt;SYMBOL_BITS&gt; length_histogram[TREE_DEPTH];
    ap_uint&lt;SYMBOL_BITS&gt; truncated_length_histogram1[TREE_DEPTH];
    ap_uint&lt;SYMBOL_BITS&gt; truncated_length_histogram2[TREE_DEPTH];
    CodewordLength symbol_bits[INPUT_SYMBOL_SIZE];

    <span class="hljs-keyword">int</span> previous_frequency = <span class="hljs-number">-1</span>;
 copy_sorted:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
        sorted_copy1[i].value = sorted[i].value;
        sorted_copy1[i].frequency = sorted[i].frequency;
        sorted_copy2[i].value = sorted[i].value;
        sorted_copy2[i].frequency = sorted[i].frequency;
        <span class="hljs-comment">// std::cout &lt;&lt; sorted[i].value &lt;&lt; &quot; &quot; &lt;&lt; sorted[i].frequency &lt;&lt; &quot;\n&quot;;</span>
        assert(previous_frequency &lt;= (<span class="hljs-keyword">int</span>)sorted[i].frequency);
        previous_frequency = sorted[i].frequency;
    }

    create_tree(sorted_copy1, n, parent, left, right);
    compute_bit_length(parent, left, right, n, length_histogram);

<span class="hljs-meta">#<span class="hljs-meta-keyword">ifndef</span> __SYNTHESIS__</span>
    <span class="hljs-comment">// Check the result of computing the tree histogram</span>
    <span class="hljs-keyword">int</span> codewords_in_tree = <span class="hljs-number">0</span>;
 merge_bit_length:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; TREE_DEPTH; i++) {
        <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS PIPELINE II=1</span>
        <span class="hljs-keyword">if</span>(length_histogram[i] &gt; <span class="hljs-number">0</span>)
            <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; length_histogram[i] &lt;&lt; <span class="hljs-string">&quot; codewords with length &quot;</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;
        codewords_in_tree += length_histogram[i];
    }
    assert(codewords_in_tree == n);
<span class="hljs-meta">#<span class="hljs-meta-keyword">endif</span></span>

        truncate_tree(length_histogram, truncated_length_histogram1, truncated_length_histogram2);
    canonize_tree(sorted_copy2, n, truncated_length_histogram1, symbol_bits);
    create_codeword(symbol_bits, truncated_length_histogram2, encoding);

    * num_nonzero_symbols = n;
}
</code></pre>
<figure id="fig3.12.2"><img src="images/placeholder.png" alt="&#x56FE;11.2: &#x663E;&#x793A;&#x4E86;&#x6574;&#x4E2A;&#x201C;top&#x201D; Huffman_encoding&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x8BBE;&#x7F6E;&#x4E86;&#x6570;&#x7EC4;&#x548C;&#x5176;&#x4ED6;&#x5728;&#x5404;&#x4E2A;&#x5B50;&#x51FD;&#x6570;&#x4E4B;&#x95F4;&#x4F20;&#x9012;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x5E76;&#x5B9E;&#x4F8B;&#x5316;&#x4E86;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x3002;"><figcaption>&#x56FE;11.2: &#x663E;&#x793A;&#x4E86;&#x6574;&#x4E2A;&#x201C;top&#x201D; Huffman_encoding&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x8BBE;&#x7F6E;&#x4E86;&#x6570;&#x7EC4;&#x548C;&#x5176;&#x4ED6;&#x5728;&#x5404;&#x4E2A;&#x5B50;&#x51FD;&#x6570;&#x4E4B;&#x95F4;&#x4F20;&#x9012;&#x7684;&#x53D8;&#x91CF;&#xFF0C;&#x5E76;&#x5B9E;&#x4F8B;&#x5316;&#x4E86;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x3002;</figcaption></figure>
<p>&#x6709;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x6570;&#x636E;&#x590D;&#x5236;&#x53EF;&#x80FD;&#x662F;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#xFF0C;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x4E86;dataflow&#x6307;&#x4EE4;&#xFF0C;&#x8FD9;&#x7ED9;&#x5B50;&#x51FD;&#x6570;&#x95F4;&#x53D8;&#x91CF;&#x7684;&#x4F20;&#x9012;&#x8D77;&#x5230;&#x4E86;&#x9650;&#x5236;&#x4F5C;&#x7528;&#x3002;&#x7279;&#x522B;&#x662F;&#xFF0C;&#x90E8;&#x5206;&#x51FD;&#x6570;&#x4E4B;&#x95F4;&#xFF0C;&#x751F;&#x4EA7;&#x8005;&#x548C;&#x6D88;&#x8D39;&#x8005;&#x7684;&#x6570;&#x636E;&#x5173;&#x7CFB;&#xFF0C;&#x6709;&#x4E00;&#x4E9B;&#x4E25;&#x683C;&#x7684;&#x89C4;&#x5219;&#xFF0C; &#x8FD9;&#x5C31;&#x8981;&#x6C42;&#x6211;&#x4EEC;&#x590D;&#x5236;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#x3002; &#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E86;&#x6570;&#x7EC4;parent&#xFF0C;Left&#x548C;Right&#x7684;&#x4E24;&#x4E2A;&#x526F;&#x672C;&#x3002;&#x6211;&#x4EEC;&#x4E5F;&#x4E0E;&#x6570;&#x7EC4;&#x622A;&#x77ED;&#x4F4D;&#x957F;&#x5EA6;&#x76F8;&#x540C;&#x3002; &#x524D;&#x8005;&#x662F;&#x5728;top&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x51FD;&#x6570;&#x7684;for&#x5FAA;&#x73AF;&#x4E2D;&#x5B8C;&#x6210;&#x7684;;&#x540E;&#x8005;&#x662F;&#x5728;canonize tree&#x51FD;&#x6570;&#x5185;&#x5B8C;&#x6210;&#x7684;&#x3002;</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>dataflow&#x6307;&#x4EE4;&#x9650;&#x5236;&#x51FD;&#x6570;&#x4E2D;&#x7684;&#x4FE1;&#x606F;&#x6D41;&#x52A8;&#x3002;&#x8BB8;&#x591A;&#x9650;&#x5236;&#x5F3A;&#x5316;&#x4E86;&#x5B50;&#x51FD;&#x6570;&#x4E4B;&#x95F4;&#x4E25;&#x683C;&#x7684;&#x751F;&#x4EA7;&#x8005;&#x548C;&#x6D88;&#x8D39;&#x8005;&#x5173;&#x7CFB;&#x3002;&#x4E00;&#x4E2A;&#x8FD9;&#x6837;&#x7684;&#x9650;&#x5236;&#x662F;&#xFF0C;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x5E94;&#x8BE5;&#x53EA;&#x7531;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5199;&#x5165;&#xFF0C;&#x5E76;&#x4E14;&#x5B83;&#x53EA;&#x80FD;&#x7531;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x8BFB;&#x53D6;&#x3002;&#x5373;&#x5B83;&#x53EA;&#x80FD;&#x4F5C;&#x4E3A;&#x4ECE;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8F93;&#x51FA;&#x5230;&#x53E6;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x3002;&#x5982;&#x679C;&#x591A;&#x4E2A;&#x51FD;&#x6570;&#x4ECE;&#x540C;&#x4E00;&#x6570;&#x7EC4;&#x4E2D;&#x8BFB;&#x53D6;&#xFF0C;Vivado R.HLS&#x5C06;&#x7EFC;&#x5408;&#x4EE3;&#x7801;&#xFF0C;&#x4F46;&#x4F1A;&#x53D1;&#x51FA;&#x8B66;&#x544A;&#x5E76;&#x4E14;&#x4E0D;&#x4F1A;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x6D41;&#x6C34;&#x7EBF;&#x5F0F;&#x67B6;&#x6784;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4F7F;&#x7528;&#x6570;&#x636E;&#x6D41;&#x6A21;&#x5F0F;&#x901A;&#x5E38;&#x9700;&#x8981;&#x5C06;&#x6570;&#x636E;&#x590D;&#x5236;&#x5230;&#x591A;&#x4E2A;&#x6570;&#x7EC4;&#x4E2D;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x8BD5;&#x56FE;&#x4ECE;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x8BFB;&#x5199;&#xFF0C;&#x800C;&#x8FD9;&#x4E2A;&#x6570;&#x7EC4;&#x540C;&#x65F6;&#x88AB;&#x53E6;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x8BBF;&#x95EE;&#xFF0C;&#x5219;&#x4F1A;&#x51FA;&#x73B0;&#x7C7B;&#x4F3C;&#x7684;&#x95EE;&#x9898;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5FC5;&#x987B;&#x4FDD;&#x7559;&#x51FD;&#x6570;&#x5185;&#x90E8;&#x7684;&#x6570;&#x636E;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x5185;&#x90E8;&#x526F;&#x672C;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x8BA8;&#x8BBA;&#x8FD9;&#x4E24;&#x4E2A;&#x8981;&#x6C42;&#x4EE5;&#x53CA;&#x5982;&#x4F55;&#x9075;&#x5B88;&#x5B83;&#x4EEC;&#xFF0C;&#x6B63;&#x5982;&#x6211;&#x4EEC;&#x5728;&#x672C;&#x7AE0;&#x5176;&#x4F59;&#x90E8;&#x5206;&#x6240;&#x8FF0;&#x7684;&#x90A3;&#x6837;&#x3002;</p>
</div></div></p>
<h2 id="112-&#x5B9E;&#x73B0;"><a name="112-&#x5B9E;&#x73B0;" class="anchor-navigation-ex-anchor" href="#112-&#x5B9E;&#x73B0;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2 &#x5B9E;&#x73B0;</h2>
<p>Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x8FC7;&#x7A0B;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x88AB;&#x5206;&#x6210;&#x5B50;&#x51FD;&#x6570;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9010;&#x4E00;&#x5904;&#x7406;&#x8FD9;&#x4E9B;&#x5B50;&#x51FD;&#x6570;&#x3002; &#x5728;&#x6211;&#x4EEC;&#x8FD9;&#x6837;&#x505A;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x5E94;&#x8BE5;&#x8003;&#x8651;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x7684;&#x6BCF;&#x4E2A;&#x63A5;&#x53E3;&#x3002;
&#x56FE;11.4&#x663E;&#x793A;&#x4E86;&#x51FD;&#x6570;&#x53CA;&#x5176;&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x7684;&#x6570;&#x636E;&#x3002; &#x4E3A;&#x4E86;&#x7B80;&#x5355;&#x8D77;&#x89C1;&#xFF0C;&#x5B83;&#x53EA;&#x663E;&#x793A;&#x4E0E;&#x6570;&#x7EC4;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x7531;&#x4E8E;&#x5B83;&#x4EEC;&#x5F88;&#x5927;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5047;&#x8BBE;&#x5B83;&#x4EEC;&#x5B58;&#x50A8;&#x5728;RAM&#x5757;&#x4E2D;&#xFF08;BRAMs&#xFF09;&#x3002; &#x5728;&#x6211;&#x4EEC;&#x63CF;&#x8FF0;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x4EE5;&#x53CA;&#x4ED6;&#x4EEC;&#x7684;&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x4E4B;&#x524D;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8BA8;&#x8BBA;huffman.h&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x5E38;&#x91CF;&#xFF0C;&#x81EA;&#x5B9A;&#x4E49;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x548C;&#x51FD;&#x6570;&#x63A5;&#x53E3;&#x3002;
&#x56FE;11.3&#x663E;&#x793A;&#x4E86;&#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>INPUT_SYMBOL_SIZE&#x53C2;&#x6570;&#x5B9A;&#x4E49;&#x4E86;&#x4F5C;&#x4E3A;&#x7F16;&#x7801;&#x8F93;&#x5165;&#x7684;&#x7B26;&#x53F7;&#x7684;&#x6700;&#x5927;&#x6570;&#x91CF;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x5176;&#x8BBE;&#x7F6E;&#x4E3A;256&#xFF0C;&#x4ECE;&#x800C;&#x542F;&#x7528;8&#x4F4D;ASCII&#x6570;&#x636E;&#x7684;&#x7F16;&#x7801;&#x3002; TREE_DEPTH&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x521D;&#x59CB;&#x970D;&#x592B;&#x66FC;&#x6811;&#x751F;&#x6210;&#x671F;&#x95F4;&#x5355;&#x4E2A;&#x4EE3;&#x7801;&#x5B57;&#x957F;&#x5EA6;&#x7684;&#x4E0A;&#x9650;&#x3002;&#x5F53;&#x970D;&#x592B;&#x66FC;&#x6811;&#x5728;truncate_tree&#x51FD;&#x6570;&#x4E2D;&#x91CD;&#x65B0;&#x5E73;&#x8861;&#x65F6;&#xFF0C;CODEWORD_LENGTH&#x53C2;&#x6570;&#x6307;&#x5B9A;&#x4E86;&#x76EE;&#x6807;&#x6811;&#x7684;&#x9AD8;&#x5EA6;&#x3002; CODEWORD_LENGTH_BITS&#x5E38;&#x91CF;&#x51B3;&#x5B9A;&#x7F16;&#x7801;&#x7801;&#x5B57;&#x957F;&#x5EA6;&#x6240;&#x9700;&#x7684;&#x4F4D;&#x6570;&#xFF0C;&#x7B49;&#x4E8E;log2[CODEWORD_LENGTH]&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x4E5F;&#x5373;&#x7B49;&#x4E8E;5&#x3002;</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;ap_int.h&quot;</span></span>

<span class="hljs-comment">// input number of symbols</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> INPUT_SYMBOL_SIZE = <span class="hljs-number">256</span>;

<span class="hljs-comment">// upper bound on codeword length during tree construction</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> TREE_DEPTH = <span class="hljs-number">64</span>;

<span class="hljs-comment">// maximum codeword tree length after rebalancing</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> MAX_CODEWORD_LENGTH = <span class="hljs-number">27</span>;

<span class="hljs-comment">// Should be log2(INPUT_SYMBOL_SIZE)</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> SYMBOL_BITS = <span class="hljs-number">10</span>;

<span class="hljs-comment">// Should be log2(TREE_DEPTH)</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> TREE_DEPTH_BITS = <span class="hljs-number">6</span>;

<span class="hljs-comment">// number of bits needed to record MAX_CODEWORD_LENGTH value</span>
<span class="hljs-comment">// Should be log2(MAX_CODEWORD_LENGTH)</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> CODEWORD_LENGTH_BITS = <span class="hljs-number">5</span>;

<span class="hljs-comment">// A marker for internal nodes</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">static</span> ap_uint&lt;SYMBOL_BITS&gt; INTERNAL_NODE = <span class="hljs-number">-1</span>;

<span class="hljs-keyword">typedef</span> ap_uint&lt;MAX_CODEWORD_LENGTH&gt; Codeword;
<span class="hljs-keyword">typedef</span> ap_uint&lt;MAX_CODEWORD_LENGTH + CODEWORD_LENGTH_BITS&gt; PackedCodewordAndLength;
<span class="hljs-keyword">typedef</span> ap_uint&lt;CODEWORD_LENGTH_BITS&gt; CodewordLength;
<span class="hljs-keyword">typedef</span> ap_uint&lt;<span class="hljs-number">32</span>&gt; Frequency;

<span class="hljs-keyword">struct</span> Symbol {
     ap_uint&lt;SYMBOL_BITS&gt; value;
     ap_uint&lt;<span class="hljs-number">32</span>&gt; frequency;
};

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">huffman_encoding</span> <span class="hljs-params">(
    Symbol in[INPUT_SYMBOL_SIZE],
    PackedCodewordAndLength encoding[INPUT_SYMBOL_SIZE],
    <span class="hljs-keyword">int</span> *num_nonzero_symbols
)</span></span>;
</code></pre>
<p>&#x5982;&#x56FE;11.3&#xFF1A;&#x9876;&#x5C42;&#x51FD;&#x6570;huffman_encoding&#x7684;&#x53C2;&#x6570;&#x3001;&#x81EA;&#x5B9A;&#x4E49;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x548C;&#x51FD;&#x6570;&#x63A5;&#x53E3;&#x3002;</p>
<figure id="fig3.12.3"><img src="images/che_dataflow.jpg" alt="&#x56FE;11.4&#xFF1A;Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x7684;&#x786C;&#x4EF6;&#x5B9E;&#x73B0;&#x6846;&#x56FE;&#x3002;&#x7070;&#x8272;&#x5757;&#x8868;&#x793A;&#x7531;&#x4E0D;&#x540C;&#x5B50;&#x51FD;&#x6570;&#x751F;&#x6210;&#x548C;&#x6D88;&#x8017;&#x7684;&#x91CD;&#x8981;&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x3002;&#x767D;&#x8272;&#x5757;&#x5BF9;&#x5E94;&#x4E8E;&#x51FD;&#x6570;&#xFF08;&#x8BA1;&#x7B97;&#x6838;&#x5FC3;&#xFF09;&#x3002;&#x6CE8;&#x610F;&#xFF0C;&#x6570;&#x7EC4;&#x521D;&#x59CB;&#x4F4D;&#x957F;&#x5EA6;&#x51FA;&#x73B0;&#x4E24;&#x6B21;&#xFF0C;&#x4EE5;&#x4F7F;&#x56FE;&#x5F62;&#x66F4;&#x52A0;&#x6E05;&#x6670;&#x3002;"><figcaption>&#x56FE;11.4&#xFF1A;Canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x7684;&#x786C;&#x4EF6;&#x5B9E;&#x73B0;&#x6846;&#x56FE;&#x3002;&#x7070;&#x8272;&#x5757;&#x8868;&#x793A;&#x7531;&#x4E0D;&#x540C;&#x5B50;&#x51FD;&#x6570;&#x751F;&#x6210;&#x548C;&#x6D88;&#x8017;&#x7684;&#x91CD;&#x8981;&#x8F93;&#x5165;&#x548C;&#x8F93;&#x51FA;&#x6570;&#x636E;&#x3002;&#x767D;&#x8272;&#x5757;&#x5BF9;&#x5E94;&#x4E8E;&#x51FD;&#x6570;&#xFF08;&#x8BA1;&#x7B97;&#x6838;&#x5FC3;&#xFF09;&#x3002;&#x6CE8;&#x610F;&#xFF0C;&#x6570;&#x7EC4;&#x521D;&#x59CB;&#x4F4D;&#x957F;&#x5EA6;&#x51FA;&#x73B0;&#x4E24;&#x6B21;&#xFF0C;&#x4EE5;&#x4F7F;&#x56FE;&#x5F62;&#x66F4;&#x52A0;&#x6E05;&#x6670;&#x3002;</figcaption></figure>
<p>&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x81EA;&#x5B9A;&#x4E49;&#x6570;&#x636E;&#x7C7B;&#x578B;Symbol&#x6765;&#x4FDD;&#x5B58;&#x5BF9;&#x5E94;&#x4E8E;&#x8F93;&#x5165;&#x503C;&#x548C;&#x5B83;&#x4EEC;&#x7684;&#x9891;&#x7387;&#x7684;&#x6570;&#x636E;&#x3002; &#x8BE5;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x5728;&#x9700;&#x8981;&#x8BBF;&#x95EE;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x7684;&#x7F16;&#x7801;&#x8FC7;&#x7A0B;&#x4E2D;&#x88AB;&#x7528;&#x4E8E;filter, sort&#xFF0C;&#x4EE5;&#x53CA;&#x5176;&#x5B83;&#x4E00;&#x4E9B;&#x51FD;&#x6570;&#x3002;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x6709;&#x4E24;&#x4E2A;&#x5B57;&#x6BB5;&#xFF1A;&#x6570;&#x503C;&#x548C;&#x9891;&#x7387;&#x3002; &#x5728;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x5047;&#x5B9A;&#x88AB;&#x7F16;&#x7801;&#x7684;&#x6570;&#x636E;&#x5757;&#x5305;&#x542B;&#x4E0D;&#x8D85;&#x8FC7;2^32&#x4E2A;&#x7B26;&#x53F7;&#x3002;
&#x6700;&#x540E;&#xFF0C;huffman.h &#x6587;&#x4EF6;&#x5177;&#x6709;huffman_encoding&#x51FD;&#x6570;&#x63A5;&#x53E3;&#x3002; &#x8FD9;&#x662F;Vivado HLS&#x5DE5;&#x5177;&#x6307;&#x5B9A;&#x7684;&#x9876;&#x5C42;&#x51FD;&#x6570;&#x3002;&#x5B83;&#x6709;&#x4E09;&#x4E2A;&#x53C2;&#x6570;, &#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x5927;&#x5C0F;&#x4E3A;INPUT_SYMBOL_SIZE&#x7684;&#x7B26;&#x53F7;&#x6570;&#x7EC4;&#x3002;&#x8BE5;&#x6570;&#x7EC4;&#x8868;&#x793A;&#x88AB;&#x7F16;&#x7801;&#x5757;&#x4E2D;&#x6570;&#x636E;&#x9891;&#x7387;&#x7684;&#x76F4;&#x65B9;&#x56FE;&#x3002; &#x63A5;&#x4E0B;&#x6765;&#x7684;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x8F93;&#x51FA;&#x3002; encoding&#x53C2;&#x6570;
&#x8F93;&#x51FA;&#x6BCF;&#x4E2A;&#x53EF;&#x80FD;&#x7B26;&#x53F7;&#x7684;&#x7801;&#x5B57;&#x3002;Num_nonzero_symbols&#x53C2;&#x6570;&#x662F;&#x6765;&#x81EA;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;&#x975E;&#x96F6;&#x7B26;&#x53F7;&#x7684;&#x6570;&#x91CF; &#xFF0C;&#x8FD9;&#x4E0E;filter&#x64CD;&#x4F5C;&#x540E;&#x5269;&#x4F59;&#x7684;&#x7B26;&#x53F7;&#x6570;&#x91CF;&#x76F8;&#x540C;&#x3002;
&#x7CFB;&#x7EDF;&#x7684;&#x8F93;&#x5165;&#x662F;&#x4E00;&#x4E2A;Symbol&#x6570;&#x7EC4;&#xFF0C;&#x8FD9;&#x4FDD;&#x5B58;&#x4E86;&#x6570;&#x7EC4;IN&#x4E2D;&#x7684;&#x7B26;&#x53F7;&#x503C;&#x548C;&#x9891;&#x7387;&#x3002;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x4FDD;&#x5B58;10-bit value&#x548C;32-bit frequency&#x3002;&#x8BE5;&#x6570;&#x7EC4;&#x7684;&#x5927;&#x5C0F;&#x8BBE;&#x7F6E;&#x4E3A;&#x5E38;&#x6570;INPUT_SYMBOL_SIZE&#xFF0C;&#x5728;&#x672C;&#x4F8B;&#x4E2D;&#x4E3A;256&#x3002;filter&#x6A21;&#x5757;&#x4ECE;in&#x6570;&#x7EC4;&#x8BFB;&#x53D6;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x8F93;&#x51FA;&#x5199;&#x5165;&#x5230;filtered&#x6570;&#x7EC4;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;Symbols&#x6570;&#x7EC4;&#xFF0C;&#x5B83;&#x4FDD;&#x5B58;&#x4E86;sort&#x6A21;&#x5757;&#x8F93;&#x5165;&#x7684;&#x975E;&#x96F6;&#x5143;&#x7D20;&#x4E2A;&#x6570;&#x3002; sort&#x6A21;&#x5757;&#x5C06;&#x6309;&#x9891;&#x7387;&#x6392;&#x5E8F;&#x7684;&#x7B26;&#x53F7;&#x5199;&#x5165;&#x4E24;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x6570;&#x7EC4;&#x4E2D; - &#x4E00;&#x4E2A;&#x7528;&#x4E8E;create tree&#x6A21;&#x5757;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;canonize tree&#x6A21;&#x5757;&#x3002;create tree&#x6A21;&#x5757;&#x4ECE;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x6570;&#x7EC4;&#x4E2D;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x970D;&#x592B;&#x66FC;&#x6811;&#x5E76;&#x5C06;&#x5176;&#x5B58;&#x50A8;&#x5230;&#x4E09;&#x4E2A;&#x6570;&#x7EC4;&#x4E2D;&#xFF08;(parent, left, and right&#xFF09;;&#x8FD9;&#x4E9B;&#x6570;&#x7EC4;&#x62E5;&#x6709;&#x970D;&#x592B;&#x66FC;&#x6811;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x6240;&#x6709;&#x4FE1;&#x606F;&#x3002;&#x4F7F;&#x7528;&#x970D;&#x592B;&#x66FC;&#x6811;&#x4FE1;&#x606F;&#xFF0C;compute bit len&#x6A21;&#x5757;&#x8BA1;&#x7B97;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x4F4D;&#x957F;&#x5E76;&#x5C06;&#x8BE5;&#x4FE1;&#x606F;&#x5B58;&#x50A8;&#x5230;initial bit len&#x6570;&#x7EC4;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x6700;&#x5927;&#x6761;&#x76EE;&#x6570;&#x8BBE;&#x7F6E;&#x4E3A;64&#xFF0C;&#x8986;&#x76D6;&#x6700;&#x9AD8;64&#x4F4D;&#x7684;&#x9891;&#x7387;&#x6570;&#xFF0C;&#x8FD9;&#x5BF9;&#x4E8E;&#x5927;&#x591A;&#x6570;&#x5E94;&#x7528;&#x6765;&#x8BF4;&#x662F;&#x8DB3;&#x591F;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x7684;&#x970D;&#x592B;&#x66FC;&#x6811;&#x80FD;&#x591F;&#x91CD;&#x65B0;&#x5E73;&#x8861;&#x5B83;&#x7684;&#x9AD8;&#x5EA6;&#x3002;truncate tree&#x6A21;&#x5757;&#x91CD;&#x65B0;&#x5E73;&#x8861;&#x6811;&#x9AD8;&#xFF0C;&#x5E76;&#x5C06;&#x6BCF;&#x4E2A;&#x7801;&#x5B57;&#x7684;&#x4F4D;&#x957F;&#x5EA6;&#x4FE1;&#x606F;&#x590D;&#x5236;&#x5230;&#x4E24;&#x4E2A;&#x5355;&#x72EC;&#x7684;truncated bit length&#x6570;&#x7EC4;&#x4E2D;&#x3002;&#x5B83;&#x4EEC;&#x6BCF;&#x4E2A;&#x90FD;&#x6709;&#x5B8C;&#x5168;&#x76F8;&#x540C;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4F46;&#x5B83;&#x4EEC;&#x5FC5;&#x987B;&#x88AB;&#x590D;&#x5236;&#x4EE5;&#x786E;&#x4FDD;Vivado HLS&#x5DE5;&#x5177;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x6D41;&#x6C34;&#x7EBF;&#x529F;&#x80FD;;&#x7A0D;&#x540E;&#x6211;&#x4EEC;&#x5C06;&#x4F1A;&#x66F4;&#x8BE6;&#x7EC6;&#x5730;&#x8BA8;&#x8BBA;&#x5B83;&#x3002; canonize tree&#x6A21;&#x5757;&#x904D;&#x5386;sort&#x6A21;&#x5757;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;truncated bit length&#x6570;&#x7EC4;&#x5206;&#x914D;&#x9002;&#x5F53;&#x7684;&#x4F4D;&#x957F;&#x5EA6;&#x3002;canonize&#x6A21;&#x5757;&#x7684;&#x8F93;&#x51FA;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x5176;&#x4E2D;&#x5305;&#x542B;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7801;&#x5B57;&#x7684;&#x4F4D;&#x957F;&#x5EA6;&#x3002;&#x6700;&#x540E;&#xFF0C;create codeword&#x6A21;&#x5757;&#x4E3A;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x751F;&#x6210;canonical&#x7801;&#x5B57;&#x3002;</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;huffman.h&quot;</span></span>
<span class="hljs-comment">// Postcondition: out[x].frequency &gt; 0</span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">filter</span><span class="hljs-params">(
            <span class="hljs-comment">/* input  */</span> Symbol in[INPUT_SYMBOL_SIZE],
            <span class="hljs-comment">/* output */</span> Symbol out[INPUT_SYMBOL_SIZE],
            <span class="hljs-comment">/* output */</span> <span class="hljs-keyword">int</span> *n)</span> </span>{
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS INLINE off</span>
    ap_uint&lt;SYMBOL_BITS&gt; j = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; INPUT_SYMBOL_SIZE; i++) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS pipeline II=1</span>
        <span class="hljs-keyword">if</span>(in[i].frequency != <span class="hljs-number">0</span>) {
            out[j].frequency = in[i].frequency;
            out[j].value = in[i].value;
            j++;
        }
    }
    * n = j;
}
</code></pre>
<figure id="fig3.12.4"><img src="images/placeholder.png" alt="&#x56FE;11.5&#xFF1A;filter&#x51FD;&#x6570;&#x5728;&#x8F93;&#x5165;&#x6570;&#x7EC4;in&#x4E2D;&#x8FED;&#x4EE3;&#xFF0C;&#x5E76;&#x5C06;&#x5177;&#x6709;&#x975E;&#x96F6;&#x9891;&#x7387;&#x5B57;&#x6BB5;&#x7684;&#x4EFB;&#x4F55;&#x7B26;&#x53F7;&#x6761;&#x76EE;&#x6DFB;&#x52A0;&#x5230;&#x8F93;&#x51FA;&#x6570;&#x7EC4;out&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5B83;&#x8BB0;&#x5F55;&#x975E;&#x96F6;&#x9891;&#x7387;&#x5143;&#x7D20;&#x7684;&#x6570;&#x91CF;&#x5E76;&#x5C06;&#x5176;&#x4F20;&#x9012;&#x5230;&#x8F93;&#x51FA;&#x53C2;&#x6570;n&#x3002;"><figcaption>&#x56FE;11.5&#xFF1A;filter&#x51FD;&#x6570;&#x5728;&#x8F93;&#x5165;&#x6570;&#x7EC4;in&#x4E2D;&#x8FED;&#x4EE3;&#xFF0C;&#x5E76;&#x5C06;&#x5177;&#x6709;&#x975E;&#x96F6;&#x9891;&#x7387;&#x5B57;&#x6BB5;&#x7684;&#x4EFB;&#x4F55;&#x7B26;&#x53F7;&#x6761;&#x76EE;&#x6DFB;&#x52A0;&#x5230;&#x8F93;&#x51FA;&#x6570;&#x7EC4;out&#x3002;&#x6B64;&#x5916;&#xFF0C;&#x5B83;&#x8BB0;&#x5F55;&#x975E;&#x96F6;&#x9891;&#x7387;&#x5143;&#x7D20;&#x7684;&#x6570;&#x91CF;&#x5E76;&#x5C06;&#x5176;&#x4F20;&#x9012;&#x5230;&#x8F93;&#x51FA;&#x53C2;&#x6570;n&#x3002;</figcaption></figure>
<h3 id="1121-&#x8FC7;&#x6EE4;"><a name="1121-&#x8FC7;&#x6EE4;" class="anchor-navigation-ex-anchor" href="#1121-&#x8FC7;&#x6EE4;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.1 &#x8FC7;&#x6EE4;</h3>
<p>&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x8FC7;&#x7A0B;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x662F;filter&#xFF0C;&#x5982;&#x56FE;11.5&#x6240;&#x793A;&#x3002; &#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x662F;Symbol&#x6570;&#x7EC4;&#x3002; &#x8F93;&#x51FA;&#x662F;&#x53E6;&#x4E00;&#x4E2A;Symbol&#x6570;&#x7EC4;&#xFF0C;&#x5B83;&#x662F;&#x8F93;&#x5165;&#x6570;&#x7EC4;in&#x7684;&#x4E00;&#x4E2A;&#x5B50;&#x96C6;&#x3002;Filter&#x51FD;&#x6570;&#x5220;&#x9664;&#x4EFB;&#x4F55;&#x9891;&#x7387;&#x7B49;&#x4E8E;0&#x7684;&#x6761;&#x76EE;&#x3002;&#x51FD;&#x6570;&#x672C;&#x8EAB;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x8FED;&#x4EE3;in&#x6570;&#x7EC4;&#xFF0C;&#x5982;&#x679C;&#x5176;frequency&#x57DF;&#x4E0D;&#x4E3A;&#x96F6;&#xFF0C;&#x5219;&#x5C06;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x5B58;&#x50A8;&#x5230;out&#x6570;&#x7EC4;&#x4E2D;&#x3002; &#x53E6;&#x5916;&#xFF0C;&#x8BE5;&#x51FD;&#x6570;&#x8BA1;&#x7B97;&#x8F93;&#x51FA;&#x7684;&#x975E;&#x96F6;&#x6761;&#x76EE;&#x6570;&#xFF0C;&#x4F5C;&#x4E3A;&#x8F93;&#x51FA;&#x53C2;&#x6570;n&#x4F20;&#x9012;&#xFF0C;&#x4F7F;&#x5176;&#x4ED6;&#x51FD;&#x6570;&#x53EA;&#x80FD;&#x5904;&#x7406;&#x201C;&#x6709;&#x7528;&#x7684;&#x201D;&#x6570;&#x636E;&#x3002;</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>Vivado HLS&#x53EF;&#x4EE5;&#x81EA;&#x52A8;&#x5185;&#x8054;&#x51FD;&#x6570;&#x4EE5;&#x4FBF;&#x751F;&#x6210;&#x66F4;&#x9AD8;&#x6548;&#x7684;&#x67B6;&#x6784;&#x3002; &#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x53D1;&#x751F;&#x5728;&#x5C0F;&#x51FD;&#x6570;&#x4E0A;&#x3002; inline&#x6307;&#x4EE4;&#x5141;&#x8BB8;&#x7528;&#x6237;&#x660E;&#x786E;&#x6307;&#x5B9A;Vivado HLS&#x662F;&#x5426;&#x5E94;&#x8BE5;&#x5185;&#x8054;&#x7279;&#x5B9A;&#x7684;&#x529F;&#x80FD;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;INLINE off &#x786E;&#x4FDD;&#x8BE5;&#x529F;&#x80FD;&#x4E0D;&#x4F1A;&#x88AB;&#x5185;&#x8054;&#xFF0C;&#x5E76;&#x4E14;&#x4F1A;&#x5728;&#x751F;&#x6210;&#x5BC4;&#x5B58;&#x5668;&#x4F20;&#x8F93;&#x7EA7;&#xFF08;RTL&#xFF09;&#x8BBE;&#x8BA1;&#x4E2D;&#x4F5C;&#x4E3A;&#x6A21;&#x5757;&#x51FA;&#x73B0;&#x3002; &#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7981;&#x7528;&#x5185;&#x8054;&#x53EF;&#x4EE5;&#x4F7F;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x83B7;&#x5F97;&#x8BE5;&#x51FD;&#x6570;&#x7684;&#x6027;&#x80FD;&#x548C;&#x8D44;&#x6E90;&#x4F7F;&#x7528;&#x60C5;&#x51B5;&#xFF0C;&#x5E76;&#x786E;&#x4FDD;&#x5B83;&#x5C06;&#x4F5C;&#x4E3A;&#x9876;&#x5C42;&#x6570;&#x636E;&#x6D41;&#x8BBE;&#x8BA1;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x6D41;&#x7A0B;&#x6765;&#x5B9E;&#x65BD;&#x3002;</p>
</div></div></p>
<h3 id="1122-&#x5206;&#x7C7B;"><a name="1122-&#x5206;&#x7C7B;" class="anchor-navigation-ex-anchor" href="#1122-&#x5206;&#x7C7B;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.2 &#x5206;&#x7C7B;</h3>
<p>&#x5982;&#x56FE;11.6&#x6240;&#x793A;&#xFF0C;sort&#x51FD;&#x6570;&#x6839;&#x636E;&#x5BF9;&#x8F93;&#x5165;&#x7B26;&#x53F7;&#x7684;frequency&#x503C;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;&#x8BE5;&#x51FD;&#x6570;&#x7531;&#x4E24;&#x4E2A;for&#x5FAA;&#x73AF;&#x7EC4;&#x6210;&#xFF0C;&#x6807;&#x8BB0;&#x4E3A;copy_in_to_sorting&#x548C;radix_sort&#x3002;copy_in_to_sorting&#x5FAA;&#x73AF;&#x628A;&#x8F93;&#x5165;&#x7684;&#x6570;&#x636E;&#x4ECE;in&#x6570;&#x7EC4;&#x642C;&#x79FB;&#x5230;sorting&#x6570;&#x7EC4;&#x4E2D;&#xFF0C;&#x8FD9;&#x786E;&#x4FDD;&#x4E86;in&#x6570;&#x7EC4;&#x662F;&#x53EA;&#x8BFB;&#x7684;&#xFF0C;&#x4EE5;&#x6EE1;&#x8DB3;&#x5728;&#x9876;&#x5C42;&#x4F7F;&#x7528;&#x7684;dataflow&#x6307;&#x4EE4;&#x7684;&#x8981;&#x6C42;&#x3002; sorting&#x51FD;&#x6570;&#x5728;&#x6574;&#x4E2A;&#x6267;&#x884C;&#x8FC7;&#x7A0B;&#x4E2D;&#x8BFB;&#x53D6;&#x548C;&#x5199;&#x5165;sorting&#x6570;&#x7EC4;&#x3002;&#x5373;&#x4F7F;&#x5BF9;&#x4E8E;&#x8FD9;&#x6837;&#x7684;&#x7B80;&#x5355;&#x5FAA;&#x73AF;&#xFF0C;&#x4F7F;&#x7528;pipeline&#x6307;&#x4EE4;&#x751F;&#x6210;&#x6700;&#x6709;&#x6548;&#x7684;&#x7ED3;&#x679C;&#x548C;&#x6700;&#x51C6;&#x786E;&#x7684;&#x6027;&#x80FD;&#x4F30;&#x8BA1;&#x662F;&#x5F88;&#x91CD;&#x8981;&#x7684;&#x3002;
radix_sort &#x5FAA;&#x73AF;&#x5B9E;&#x73B0;&#x6838;&#x5FC3;&#x57FA;&#x6570;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x3002; &#x901A;&#x5E38;&#xFF0C;&#x57FA;&#x6570;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x901A;&#x8FC7;&#x4E00;&#x6B21;&#x5904;&#x7406;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x6216;&#x4E00;&#x7EC4;&#x6BD4;&#x7279;&#x6765;&#x5BF9;&#x6570;&#x636E;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002; &#x6BCF;&#x4E2A;&#x6570;&#x5B57;&#x7684;&#x5927;&#x5C0F;&#x51B3;&#x5B9A;&#x4E86;&#x6392;&#x5E8F;&#x7684;&#x57FA;&#x6570;&#x3002; &#x6211;&#x4EEC;&#x7684;&#x7B97;&#x6CD5;&#x5728;32&#x6BD4;&#x7279;&#x7684;Symbol.frequency&#x53D8;&#x91CF;&#x65F6;&#x5904;&#x7406;4&#x6BD4;&#x7279;&#x3002;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x57FA;&#x6570;r = 2^4 = 16&#x6392;&#x5E8F;&#x3002; &#x5BF9;&#x4E8E;32&#x4F4D;&#x6570;&#x5B57;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;4&#x6BD4;&#x7279;&#x6570;&#x5B57;&#xFF0C;&#x6211;&#x4EEC;&#x8FDB;&#x884C;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x3002;radix_sort&#x5FAA;&#x73AF;&#x6267;&#x884C;&#x8FD9;8&#x4E2A;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x64CD;&#x4F5C;&#xFF0C;&#x4EE5;4&#x4E3A;&#x5355;&#x4F4D;&#x8FED;&#x4EE3;&#x5230;32.&#x57FA;&#x6570;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x4E5F;&#x53EF;&#x4EE5;&#x4ECE;&#x5DE6;&#x5230;&#x53F3;&#xFF08;&#x9996;&#x5148;&#x662F;&#x6700;&#x4F4E;&#x6709;&#x6548;&#x4F4D;&#xFF09;&#x6216;&#x4ECE;&#x53F3;&#x5230;&#x5DE6;&#xFF08;&#x9996;&#x5148;&#x662F;&#x6700;&#x9AD8;&#x6709;&#x6548;&#x4F4D;&#xFF09;&#x64CD;&#x4F5C;&#x3002;&#x7B97;&#x6CD5;&#x4ECE;&#x6700;&#x4F4E;&#x6709;&#x6548;&#x4F4D;&#x8FD0;&#x884C;&#x5230;&#x6700;&#x9AD8;&#x6709;&#x6548;&#x4F4D;&#x3002; &#x5728;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x57FA;&#x6570;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BBE;&#x7F6E;RADIX&#x548C;BITS_PER_LOOP&#x53C2;&#x6570;&#x6765;&#x914D;&#x7F6E;&#x3002;</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x5982;&#x679C;&#x6211;&#x4EEC;&#x589E;&#x52A0;&#x6216;&#x51CF;&#x5C11;&#x57FA;&#x6570;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F;&#x8FD9;&#x5C06;&#x5982;&#x4F55;&#x5F71;&#x54CD;&#x6267;&#x884C;&#x7684;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x64CD;&#x4F5C;&#x7684;&#x6B21;&#x6570;&#xFF1F;&#x8FD9;&#x5C06;&#x5982;&#x4F55;&#x6539;&#x53D8;&#x8D44;&#x6E90;&#x4F7F;&#x7528;&#xFF0C;&#x4F8B;&#x5982;&#x6570;&#x7EC4;&#x7684;&#x5927;&#x5C0F;&#x5462;&#xFF1F;</p>
</div></div></p>
<p>&#x4EE3;&#x7801;&#x5728;sorting[]&#x548C;previous_sorting[]&#x4E2D;&#x5B58;&#x50A8;&#x5F53;&#x524D;&#x6392;&#x5E8F;&#x7684;&#x72B6;&#x6001;&#x3002; &#x6BCF;&#x6B21;&#x8FED;&#x4EE3;radix_sort_loop&#x5FAA;&#x73AF;&#xFF0C;sorting[]&#x7684;&#x5F53;&#x524D;&#x503C;&#x88AB;&#x590D;&#x5236;&#x5230;previous_sorting[]&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x4E9B;&#x503C;&#x5728;&#x88AB;&#x590D;&#x5236;&#x56DE;sorting[]&#x65F6;&#x88AB;&#x6392;&#x5E8F;.digit_histogram[]&#x548C;digit_location[]&#x6570;&#x7EC4;&#x7528;&#x4E8E;radix_sort_loop&#x6765;&#x5B9E;&#x73B0;&#x5BF9;&#x7279;&#x5B9A;&#x6570;&#x5B57;&#x7684;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x3002; &#x4E24;&#x4E2A;array_partition&#x6570;&#x7EC4;&#x58F0;&#x660E;&#x8FD9;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#x5E94;&#x8BE5;&#x5B8C;&#x5168;&#x6620;&#x5C04;&#x5230;&#x5BC4;&#x5B58;&#x5668;&#x4E2D;&#x3002; &#x8FD9;&#x4E9B;&#x6570;&#x7EC4;&#x5F88;&#x5C0F;&#x800C;&#x4E14;&#x4F7F;&#x7528;&#x9891;&#x7E41;&#xFF0C;&#x56E0;&#x6B64;&#x4E0D;&#x5360;&#x7528;&#x5F88;&#x591A;&#x8D44;&#x6E90;&#x5C31;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x826F;&#x597D;&#x7684;&#x6027;&#x80FD;&#x3002;&#x6700;&#x540E;&#xFF0C;current_digit[]&#x5B58;&#x50A8;&#x4E86;&#x57FA;&#x6570;&#x6392;&#x5E8F;&#x7684;&#x5F53;&#x524D;&#x8FED;&#x4EE3;&#x4E2D;&#x4E3A;&#x6BCF;&#x4E2A;&#x9879;&#x76EE;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x5B57;&#x3002;
&#x8BE5;&#x4EE3;&#x7801;&#x8FD8;&#x5305;&#x542B;&#x4E24;&#x4E2A;assert&#xFF08;&#xFF09;&#x8C03;&#x7528;&#xFF0C;&#x7528;&#x4E8E;&#x68C0;&#x67E5;&#x6709;&#x5173;num_symbols&#x7B26;&#x53F7;&#x8F93;&#x5165;&#x3002;&#x7531;&#x4E8E;&#x8BE5;&#x53D8;&#x91CF;&#x51B3;&#x5B9A;&#x4E86;in&#x6570;&#x7EC4;&#x4E2D;&#x6709;&#x6548;&#x5143;&#x7D20;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x5FC5;&#x987B;&#x4EE5;&#x6570;&#x7EC4;&#x7684;&#x5927;&#x5C0F;&#x4E3A;&#x754C;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x65AD;&#x8A00;&#x901A;&#x5E38;&#x662F;&#x826F;&#x597D;&#x7684;&#x9632;&#x5FA1;&#x6027;&#x7F16;&#x7A0B;&#x5B9E;&#x8DF5;&#xFF0C;&#x4EE5;&#x786E;&#x4FDD;&#x6EE1;&#x8DB3;&#x8BE5;&#x51FD;&#x6570;&#x7684;&#x5047;&#x8BBE;&#x3002; &#x5728;Vivado HLS&#x4E2D;&#x4ED6;&#x4EEC;&#x4E5F;&#x6709;&#x4E00;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x76EE;&#x7684;&#x3002; &#x7531;&#x4E8E;num_symbols&#x7B26;&#x53F7;&#x51B3;&#x5B9A;&#x4E86;&#x8BB8;&#x591A;&#x5185;&#x90E8;&#x5FAA;&#x73AF;&#x6267;&#x884C;&#x7684;&#x6B21;&#x6570;&#xFF0C;Vivado HLS&#x53EF;&#x4EE5;&#x57FA;&#x4E8E;&#x8FD9;&#x4E9B;&#x65AD;&#x8A00;&#x63A8;&#x65AD;&#x5FAA;&#x73AF;&#x7684;&#x8BA1;&#x6570;&#x3002; &#x53E6;&#x5916;&#xFF0C;Vivado HLS&#x8FD8;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x65AD;&#x8A00;&#x5728;&#x7535;&#x8DEF;&#x5B9E;&#x73B0;&#x65F6;&#x6700;&#x5C0F;&#x5316;&#x53D8;&#x91CF;&#x7684;&#x4F4D;&#x5BBD;&#x3002;</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;huffman.h&quot;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;assert.h&quot;</span></span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> RADIX = <span class="hljs-number">16</span>;
<span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> BITS_PER_LOOP = <span class="hljs-number">4</span>; <span class="hljs-comment">// should be log2(RADIX)</span>
<span class="hljs-keyword">typedef</span> ap_uint&lt;BITS_PER_LOOP&gt; Digit;

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(
    <span class="hljs-comment">/* input */</span> Symbol in[INPUT_SYMBOL_SIZE],
    <span class="hljs-comment">/* input */</span> <span class="hljs-keyword">int</span> num_symbols,
    <span class="hljs-comment">/* output */</span> Symbol out[INPUT_SYMBOL_SIZE])</span> </span>{
    Symbol previous_sorting[INPUT_SYMBOL_SIZE], sorting[INPUT_SYMBOL_SIZE];
    ap_uint&lt;SYMBOL_BITS&gt; digit_histogram[RADIX], digit_location[RADIX];
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS ARRAY_PARTITION variable=digit_location complete dim=1</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS ARRAY_PARTITION variable=digit_histogram complete dim=1</span>
    Digit current_digit[INPUT_SYMBOL_SIZE];

    assert(num_symbols &gt;= <span class="hljs-number">0</span>);
    assert(num_symbols &lt;= INPUT_SYMBOL_SIZE);
 copy_in_to_sorting:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; num_symbols; j++) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS PIPELINE II=1</span>
        sorting[j] = in[j];
    }

 radix_sort:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> shift = <span class="hljs-number">0</span>; shift &lt; <span class="hljs-number">32</span>; shift += BITS_PER_LOOP) {
    init_histogram:
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; RADIX; i++) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS pipeline II=1</span>
            digit_histogram[i] = <span class="hljs-number">0</span>;
        }

    compute_histogram:
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; num_symbols; j++) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS PIPELINE II=1</span>
            Digit digit = (sorting[j].frequency &gt;&gt; shift) &amp; (RADIX - <span class="hljs-number">1</span>); <span class="hljs-comment">// Extrract a digit</span>
            current_digit[j] = digit;  <span class="hljs-comment">// Store the current_digit for each symbol</span>
            digit_histogram[digit]++;
            previous_sorting[j] = sorting[j]; <span class="hljs-comment">// Save the current sorted order of symbols</span>
        }

        digit_location[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
    find_digit_location:
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; RADIX; i++)
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS PIPELINE II=1</span>
            digit_location[i] = digit_location[i<span class="hljs-number">-1</span>] + digit_histogram[i<span class="hljs-number">-1</span>];

    re_sort:
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; num_symbols; j++) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS PIPELINE II=1</span>
            Digit digit = current_digit[j];
            sorting[digit_location[digit]] = previous_sorting[j]; <span class="hljs-comment">// Move symbol to new sorted location</span>
            out[digit_location[digit]] = previous_sorting[j]; <span class="hljs-comment">// Also copy to output</span>
            digit_location[digit]++; <span class="hljs-comment">// Update digit_location</span>
        }
    }
}
</code></pre>
<figure id="fig3.12.5"><img src="images/placeholder.png" alt="&#x56FE;11.6&#xFF1A;sort&#x51FD;&#x6570;&#x6839;&#x636E;&#x8F93;&#x5165;&#x7B26;&#x53F7;&#x7684;&#x9891;&#x7387;&#x503C;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x57FA;&#x6570;&#x6392;&#x5E8F;&#x3002;"><figcaption>&#x56FE;11.6&#xFF1A;sort&#x51FD;&#x6570;&#x6839;&#x636E;&#x8F93;&#x5165;&#x7B26;&#x53F7;&#x7684;&#x9891;&#x7387;&#x503C;&#x5BF9;&#x5176;&#x8FDB;&#x884C;&#x57FA;&#x6570;&#x6392;&#x5E8F;&#x3002;</figcaption></figure>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x4E4B;&#x524D;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x770B;&#x5230;loop_tripcount&#x6307;&#x4EE4;&#x5411;Vivado HLS&#x63D0;&#x4F9B; &#x5FAA;&#x73AF;&#x6B21;&#x6570;&#x4FE1;&#x606F;&#x3002;&#x4F7F;&#x7528;assert&#xFF08;&#xFF09;&#x8BED;&#x53E5;&#x6709;&#x8BB8;&#x591A;&#x76F8;&#x540C;&#x7684;&#x7528;&#x9014;&#xFF0C;&#x6709;&#x4E00;&#x4E9B;&#x4F18;&#x70B9;&#x548C;&#x7F3A;&#x70B9;&#x3002;&#x4F7F;&#x7528;assert&#xFF08;&#xFF09;&#x8BED;&#x53E5;&#x7684;&#x4E00;&#x4E2A;&#x4F18;&#x70B9;&#x662F;&#x5B83;&#x4EEC;&#x68C0;&#x67E5;&#x4EFF;&#x771F;&#x8FC7;&#x7A0B;&#xFF0C;&#x5E76;&#x4E14;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x8FDB;&#x4E00;&#x6B65;&#x4F18;&#x5316;&#x7535;&#x8DEF;&#x3002;&#x7136;&#x800C;&#xFF0C;loop_tripcount&#x6307;&#x4EE4;&#x53EA;&#x5F71;&#x54CD;&#x6027;&#x80FD;&#x5206;&#x6790;&#xFF0C;&#x4E0D;&#x662F;&#x7528;&#x4E8E;&#x4F18;&#x5316;&#x3002;&#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;assert&#xFF08;&#xFF09;&#x8BED;&#x53E5;&#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x5BF9;&#x53D8;&#x91CF;&#x503C;&#x8FDB;&#x884C;&#x9650;&#x5236;&#xFF0C;&#x4F46;&#x4E0D;&#x80FD;&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;&#x671F;&#x671B;&#x503C;&#x6216;&#x5E73;&#x5747;&#x503C;&#xFF0C;&#x53EA;&#x80FD;&#x901A;&#x8FC7;loop_tripcount&#x6307;&#x4EE4;&#x5B8C;&#x6210;&#x3002;&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5EFA;&#x8BAE;&#x9996;&#x5148;&#x901A;&#x8FC7;assert&#xFF08;&#xFF09;&#x8BED;&#x53E5;&#x63D0;&#x4F9B;&#x6700;&#x5DEE;&#x60C5;&#x51B5;&#x8FB9;&#x754C;&#xFF0C;&#x7136;&#x540E;&#x5728;&#x5FC5;&#x8981;&#x65F6;&#x6DFB;&#x52A0;loop_tripcount&#x6307;&#x4EE4;&#x3002;</p>
</div></div></p>
<p>radix<em>sort&#x5FAA;&#x73AF;&#x7684;&#x4E3B;&#x4F53;&#x88AB;&#x5206;&#x6210;&#x56DB;&#x4E2A;&#x5B50;&#x5FAA;&#x73AF;&#xFF0C;&#x5206;&#x522B;&#x6807;&#x8BB0;&#x4E3A;init_histogram&#xFF0C;compute_histogram,&#xFF0C;find_digit_location,&#x548C;re_sort.&#x3002;init_histogram&#x548C;compute_histogram&#x7ED3;&#x5408;&#x57FA;&#x4E8E;&#x5F53;&#x524D;&#x8003;&#x8651;&#x7684;&#x6570;&#x5B57;&#x6765;&#x8BA1;&#x7B97;&#x8F93;&#x5165;&#x7684;&#x76F4;&#x65B9;&#x56FE;&#x3002;&#x8FD9;&#x4F1A;&#x4EA7;&#x751F;&#x6BCF;&#x6B21;&#x6BCF;&#x4E2A;&#x6570;&#x5B57;&#x5728;digit histogram[]&#x4E2D;&#x51FA;&#x73B0;&#x7684;&#x6570;&#x91CF;&#x3002;compute_histogram&#x5FAA;&#x73AF;&#x8FD8;&#x5B58;&#x50A8;&#x5F53;&#x524D;&#x6B63;&#x5728;&#x4E3A;current_digit[]&#x4E2D;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x5B57;&#x3002;
&#x63A5;&#x4E0B;&#x6765;&#xFF0C;find_digit_location&#x5FAA;&#x73AF;&#x8BA1;&#x7B97;&#x6240;&#x5F97;&#x76F4;&#x65B9;&#x56FE;&#x503C;&#x7684;&#x524D;&#x7F00;&#x4E4B;&#x548C;&#xFF0C;&#x628A;&#x7ED3;&#x679C;&#x5B58;&#x5728;digit location[]&#x3002;&#x5728;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;digit_location[]&#x5305;&#x542B;&#x65B0;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E2D;&#x6BCF;&#x4E2A;&#x6570;&#x5B57;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x6700;&#x540E;&#xFF0C;re_sort&#x5FAA;&#x73AF;&#x6839;&#x636E;&#x8FD9;&#x4E9B;&#x7ED3;&#x679C;&#x5BF9;&#x7B26;&#x53F7;&#x91CD;&#x65B0;&#x6392;&#x5E8F;&#xFF0C;&#x5C06;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x653E;&#x7F6E;&#x5728;&#x65B0;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6B63;&#x786E;&#x4F4D;&#x7F6E;&#x3002;&#x5B83;&#x4F7F;&#x7528;current_digit[]&#x4E2D;&#x5B58;&#x50A8;&#x7684;&#x5BC6;&#x94A5;&#x4ECE;digit_location[]&#x4E2D;&#x9009;&#x62E9;&#x6B63;&#x786E;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x6BCF;&#x6B21;&#x901A;&#x8FC7;re_sort&#x5FAA;&#x73AF;&#x65F6;&#xFF0C;&#x8BE5;&#x4F4D;&#x7F6E;&#x90FD;&#x4F1A;&#x9012;&#x589E;&#xFF0C;&#x4EE5;&#x5C06;&#x4E0B;&#x4E00;&#x4E2A;&#x5177;&#x6709;&#x76F8;&#x540C;&#x6570;&#x5B57;&#x7684;&#x5143;&#x7D20;&#x653E;&#x5165;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x4F4D;&#x7F6E;&#x3002;&#x603B;&#x4F53;&#x800C;&#x8A00;&#xFF0C;&#x6BCF;&#x6B21;&#x90FD;&#x662F;&#x901A;&#x8FC7;radix_sort&#x5FAA;&#x73AF;&#x8FED;&#x4EE3;&#x6765;&#x5B9E;&#x73B0;&#x5BF9;&#x4E00;&#x4E2A;&#x6570;&#x5B57;&#x7684;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x3002;&#x8BA1;&#x6570;&#x6392;&#x5E8F;&#x662F;&#x4E00;&#x4E2A;&#x7A33;&#x5B9A;&#x7684;&#x6392;&#x5E8F;&#xFF0C;&#x5177;&#x6709;&#x76F8;&#x540C;&#x6570;&#x5B57;&#x7684;&#x5143;&#x7D20;&#x4FDD;&#x6301;&#x76F8;&#x540C;&#x7684;&#x987A;&#x5E8F;&#x3002;&#x5728;&#x57FA;&#x4E8E;&#x6BCF;&#x4E2A;&#x6570;&#x5B57;&#x7684;&#x7A33;&#x5B9A;&#x6392;&#x5E8F;&#x4E4B;&#x540E;&#xFF0C;&#x6570;&#x7EC4;&#x4EE5;&#x6B63;&#x786E;&#x7684;&#x6700;&#x7EC8;&#x987A;&#x5E8F;&#x8FD4;&#x56DE;&#x3002;
&#x524D;&#x9762;&#x6211;&#x4EEC;&#x5728;8.2&#x548C;8.1&#x7AE0;&#x4E2D;&#x8BA8;&#x8BBA;&#x8FC7;&#x76F4;&#x65B9;&#x56FE;&#x548C;&#x524D;&#x7F00;&#x6C42;&#x548C;&#x7B97;&#x6CD5;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x7B80;&#x5355;&#x7684;&#x4EE3;&#x7801;&#x548C;digit_histogram[]&#x548C;digit_location[]&#x5B8C;&#x6574;&#x7684;&#x5206;&#x89E3;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;1&#x7684;&#x5FAA;&#x73AF;II&#x6765;&#x8BA1;&#x7B97;&#x76F4;&#x65B9;&#x56FE;&#x548C;&#x524D;&#x7F00;&#x548C;&#xFF0C;&#x56E0;&#x4E3A;&#x7BB1;&#x5B50;&#x7684;&#x6570;&#x91CF;&#x975E;&#x5E38;&#x5C0F;&#x3002;re_sort&#x5FAA;&#x73AF;&#x7684;&#x4F18;&#x5316;&#x4E0E;&#x6B64;&#x7C7B;&#x4F3C;&#x3002; &#x7531;&#x4E8E;&#x552F;&#x4E00;&#x7684;&#x5FAA;&#x73AF;&#x662F;&#x901A;&#x8FC7;&#x76F8;&#x5BF9;&#x8F83;&#x5C0F;&#x7684;digit</em> location[]&#x6570;&#x7EC4;&#xFF0C;&#x5B9E;&#x73B0;1&#x7684;&#x5FAA;&#x73AF;II&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#x3002; &#x6CE8;&#x610F;&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x7684;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#x4E3B;&#x8981;&#x662F;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x914D;&#x7F6E;&#x7684;RADIX&#x76F8;&#x5BF9;&#x8F83;&#x5C0F;&#x3002;&#x8F83;&#x5927;&#x7684;RADIX&#x503C;&#x65F6;&#xFF0C;&#x5C06;digit_histogram[]&#x548C;digit_location[]&#x4F5C;&#x4E3A;&#x5B58;&#x50A8;&#x662F;&#x66F4;&#x597D;&#x7684;&#xFF0C;&#x8FD9;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x4F18;&#x5316;&#x6765;&#x5B9E;&#x73B0;1&#x7684;&#x5FAA;&#x73AF;II&#x3002;
&#x5728;&#x6B64;&#x4EE3;&#x7801;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#x53EF;&#x80FD;&#x6709;&#x610F;&#x4E49;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x66FF;&#x4EE3;&#x65B9;&#x6CD5;&#x662F;&#x5C06;digixPrase[]&#x548C;digialPosith[]&#x5B8C;&#x5168;&#x7684;&#x5206;&#x89E3;&#x4E0E;init_histogram&#x548C;find_digit_location&#x5FAA;&#x73AF;&#x5B8C;&#x5168;&#x7684;&#x5C55;&#x5F00;&#x7ED3;&#x5408;&#x8D77;&#x6765;&#x3002;&#x8FD9;&#x4E9B;&#x5FAA;&#x73AF;&#x8BBF;&#x95EE;&#x8FD9;&#x4E9B;&#x5C0F;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x4F4D;&#x7F6E;&#x5E76;&#x4F7F;&#x7528;&#x6700;&#x5C11;&#x91CF;&#x7684;&#x903B;&#x8F91;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C3D;&#x7BA1;&#x5C55;&#x5F00;&#x5FAA;&#x73AF;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x4E3A;&#x6BCF;&#x4E2A;&#x5FAA;&#x73AF;&#x4F53;&#x590D;&#x5236;&#x7535;&#x8DEF;&#xFF0C;&#x4F46;&#x5B9E;&#x73B0;&#x6B64;&#x7535;&#x8DEF;&#x6240;&#x9700;&#x7684;&#x8D44;&#x6E90;&#x8F83;&#x5C11;&#xFF0C;&#x56E0;&#x4E3A;&#x9635;&#x5217;&#x8BBF;&#x95EE;&#x5C06;&#x5904;&#x4E8E;&#x56FA;&#x5B9A;&#x7D22;&#x5F15;&#x3002; &#x4F46;&#x662F;&#xFF0C;&#x6539;&#x53D8;&#x66F4;&#x5927;&#x7684;&#x503C;&#x7684;BITS_PER_LOOP&#x53C2;&#x6570;&#x662F;&#x7981;&#x6B62;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x6BCF;&#x4E2A;&#x989D;&#x5916;&#x7684;&#x4F4D;&#x90FD;&#x4F1A;&#x4F7F;RADIX&#x53C2;&#x6570;&#x7FFB;&#x500D;&#xFF0C;&#x5C55;&#x5F00;&#x5FAA;&#x73AF;&#x7684;&#x6210;&#x672C;&#x4E5F;&#x7FFB;&#x4E86;&#x4E00;&#x756A;&#x3002; &#x8FD9;&#x5BF9;&#x4E8E;&#x53C2;&#x6570;&#x5316;&#x4EE3;&#x7801;&#x662F;&#x4E00;&#x79CD;&#x5E38;&#x89C1;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x4F18;&#x5316;&#x5BF9;&#x4E8E;&#x4E0D;&#x540C;&#x7684;&#x53C2;&#x6570;&#x503C;&#x662F;&#x6709;&#x610F;&#x4E49;&#x7684;&#x3002;</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x5728;&#x7B2C;8.2&#x548C;&#x7B2C;8.1&#x7AE0;&#x4E2D;&#x63D0;&#x5230;&#x7684;&#x524D;&#x7F00;&#x6C42;&#x548C;&#x548C;&#x76F4;&#x65B9;&#x56FE;&#x5FAA;&#x73AF;&#x4E2D;&#xFF0C;&#x6267;&#x884C;&#x4F18;&#x5316;&#x65F6;&#xFF0C;&#x6027;&#x80FD;&#x548C;&#x5229;&#x7528;&#x7387;&#x7ED3;&#x679C;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#x53D8;&#x5316;&#xFF1F;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F18;&#x5316;&#x662F;&#x5FC5;&#x8981;&#x7684;&#x5417;&#xFF1F;</p>
</div></div></p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>re_sort&#x5FAA;&#x73AF;&#x662F;&#x5426;&#x80FD;&#x591F;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x5468;&#x671F;&#x7684;&#x7279;&#x5B9A;&#x542F;&#x52A8;&#x95F4;&#x9694;&#xFF1F; &#x4E3A;&#x4EC0;&#x4E48;&#x6216;&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#xFF1F;</p>
</div></div></p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x5BF9;&#x4E8E;&#x5927;&#x6570;&#x636E;&#x96C6;&#xFF08;n&gt;256&#xFF09;&#xFF0C;&#x56FE;11.6&#x4E2D;&#x4EE3;&#x7801;&#x7684;&#x8FD1;&#x4F3C;&#x5EF6;&#x65F6;&#xFF08;&#x4EE5;n&#x4E3A;&#x5355;&#x4F4D;&#xFF09;&#x662F;&#x591A;&#x5C11;&#xFF1F; &#x4EE3;&#x7801;&#x7684;&#x54EA;&#x4E9B;&#x90E8;&#x5206;&#x652F;&#x914D;&#x5468;&#x671F;&#x6570;&#x91CF;&#xFF1F; &#x8FD9;&#x5C06;&#x5982;&#x4F55;&#x968F;&#x7740;RADIX&#x53C2;&#x6570;&#x7684;&#x53D8;&#x5316;&#x800C;&#x6539;&#x53D8;&#xFF1F;</p>
</div></div></p>
<p>&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;re_sort&#x5FAA;&#x73AF;&#x4E0D;&#x4EC5;&#x5C06;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x5B58;&#x50A8;&#x5728;sorting[]&#x4E2D;&#xFF0C;&#x800C;&#x4E14;&#x8FD8;&#x5B58;&#x50A8;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x5728;out[]&#x3002; &#x867D;&#x7136;&#x8FD9;&#x53EF;&#x80FD;&#x770B;&#x8D77;&#x6765;&#x591A;&#x4F59;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x786E;&#x4FDD;&#x53EA;&#x5199;&#x5165;out[]&#x4EE5;&#x9075;&#x4ECE;&#x9876;&#x5C42;dataflow&#x6307;&#x4EE4;&#x7684;&#x8981;&#x6C42;&#x3002;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;out[]&#x5C06;&#x4F1A;&#x7528;&#x90E8;&#x5206;&#x6392;&#x5E8F;&#x7684;&#x7ED3;&#x679C;&#x91CD;&#x5199;&#x591A;&#x6B21;&#xFF0C;&#x4F46;&#x53EA;&#x6709;&#x6700;&#x7EC8;&#x7ED3;&#x679C;&#x4F20;&#x9012;&#x7ED9;&#x540E;&#x9762;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>dataflow&#x6307;&#x4EE4;&#x5BF9;&#x4E8E;&#x6267;&#x884C;&#x4EFB;&#x52A1;&#x7EA7;&#x522B;&#x6D41;&#x6C34;&#x7EBF;&#x4F18;&#x5316;&#x6709;&#x51E0;&#x4E2A;&#x8981;&#x6C42;&#x3002;&#x5176;&#x4E2D;&#x4E4B;&#x4E00;&#x5C31;&#x662F;&#x9700;&#x8981;&#x5355;&#x4E00;&#x7684;&#x751F;&#x4EA7;&#x8005;&#x548C;&#x6D88;&#x8D39;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x6570;&#x636E;&#x4EFB;&#x52A1;&#x3002; &#x7531;&#x4E8E;&#x6211;&#x4EEC;&#x60F3;&#x5728;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x8FC7;&#x7A0B;&#x6267;&#x884C;&#x5982;&#x56FE;11.4&#x6240;&#x793A;&#x7684;&#x4EFB;&#x52A1;&#x7EA7;&#x522B;&#x7684;&#x6D41;&#x6C34;&#x7EBF;&#x64CD;&#x4F5C;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x786E;&#x4FDD;&#x6BCF;&#x9879;&#x4EFB;&#x52A1;&#x90FD;&#x7B26;&#x5408;&#x8FD9;&#x4E00;&#x8981;&#x6C42;&#x3002; &#x5728;sort&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x8FD9;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x4EFB;&#x52A1;&#xFF0C;&#x5B83;&#x53EA;&#x80FD;&#x6D88;&#x8017;&#xFF08;&#x8BFB;&#x53D6;&#x4F46;&#x4E0D;&#x5199;&#x5165;&#xFF09;&#x8F93;&#x5165;&#x53C2;&#x6570;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x4E14;&#x53EA;&#x4EA7;&#x751F;&#xFF08;&#x5199;&#x5165;&#x4F46;&#x4E0D;&#x8BFB;&#x53D6;&#xFF09;&#x8F93;&#x51FA;
&#x53C2;&#x6570;&#x6570;&#x636E;&#x3002; &#x4E3A;&#x4E86;&#x6EE1;&#x8DB3;&#x8FD9;&#x4E2A;&#x8981;&#x6C42;&#xFF0C;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E86;&#x5185;&#x90E8;sorting&#x6570;&#x7EC4;&#xFF0C;&#x5B83;&#x8BFB;&#x53D6;&#x548C;&#x5199;&#x5165;&#x6574;&#x4E2A;&#x51FD;&#x6570;&#x3002;&#x6211;&#x4EEC;&#x4ECE;&#x51FD;&#x6570;&#x5F00;&#x5934;&#x7684;&#x53C2;&#x6570;in&#x4E2D;&#x590D;&#x5236;&#x8F93;&#x5165;&#x6570;&#x636E;&#xFF0C;&#x5E76;&#x5C06;&#x6700;&#x7EC8;&#x7ED3;&#x679C;&#x5199;&#x5165;&#x51FD;&#x6570;&#x7ED3;&#x5C3E;&#x5904;&#x7684;&#x8F93;&#x51FA;&#x53C2;&#x6570;&#x3002; &#x8FD9;&#x786E;&#x4FDD;&#x6211;&#x4EEC;&#x9075;&#x5FAA;&#x751F;&#x4EA7;&#x8005;/&#x6D88;&#x8D39;&#x8005;dataflow&#x6307;&#x4EE4;&#x7684;&#x8981;&#x6C42;&#x3002;</p>
</div></div></p>
<h3 id="1123-&#x521B;&#x5EFA;&#x6811;"><a name="1123-&#x521B;&#x5EFA;&#x6811;" class="anchor-navigation-ex-anchor" href="#1123-&#x521B;&#x5EFA;&#x6811;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.3 &#x521B;&#x5EFA;&#x6811;</h3>
<p>&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#x5F62;&#x6210;&#x4E86;&#x4EE3;&#x8868;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x7684;&#x4E8C;&#x53C9;&#x6811;&#x3002;&#x8FD9;&#x5728;&#x56FE;11.8&#x6240;&#x793A;&#x7684;create_tree&#x51FD;&#x6570;&#x4E2D;&#x5B9E;&#x73B0;&#x3002;in[]&#x5305;&#x542B;num_symbols&#x7B26;&#x53F7;&#x5143;&#x7D20;&#xFF0C;&#x6309;&#x6700;&#x4F4E;&#x9891;&#x7387;&#x5230;&#x6700;&#x9AD8;&#x9891;&#x7387;&#x6392;&#x5E8F;&#x3002;&#x8BE5;&#x51FD;&#x6570;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8FD9;&#x4E9B;&#x7B26;&#x53F7;&#x7684;&#x4E8C;&#x53C9;&#x6811;,&#x5B58;&#x50A8;&#x5728;&#x4E09;&#x4E2A;&#x540D;&#x4E3A;parent&#xFF0C;left&#x548C;right&#x7684;&#x8F93;&#x51FA;&#x6570;&#x7EC4;&#x4E2D;&#x3002;left&#x548C;right&#x6570;&#x7EC4;&#x8868;&#x793A;&#x6811;&#x4E2D;&#x6BCF;&#x4E2A;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x7684;&#x5DE6;&#x4FA7;&#x548C;&#x53F3;&#x4FA7;&#x5B50;&#x7ED3;&#x70B9;&#x3002; &#x5982;&#x679C;&#x5B50;&#x7ED3;&#x70B9;&#x662F;&#x4E00;&#x4E2A;&#x53F6;&#x7ED3;&#x70B9;&#xFF0C;&#x90A3;&#x4E48;&#x5DE6;&#x8FB9;&#x6216;&#x53F3;&#x8FB9;&#x6570;&#x7EC4;&#x7684;&#x76F8;&#x5E94;&#x5143;&#x7D20;&#x5C06;&#x5305;&#x542B;&#x5B69;&#x5B50;&#x7684;&#x7B26;&#x53F7;&#x503C;&#xFF0C;&#x5426;&#x5219;&#x5305;&#x542B;&#x7279;&#x6B8A;&#x7B26;&#x53F7;INTERNAL_NODE&#x3002;&#x540C;&#x6837;&#xFF0C;&#x7236;&#x6570;&#x7EC4;&#x4FDD;&#x5B58;&#x6BCF;&#x4E2A;&#x4E2D;&#x95F4;&#x7ED3;&#x70B9;&#x7684;&#x7236;&#x7ED3;&#x70B9;&#x7684;&#x7D22;&#x5F15;&#x3002;&#x6811;&#x7684;&#x6839;&#x7ED3;&#x70B9;&#x7684;&#x7236;&#x7ED3;&#x70B9;&#x88AB;&#x5B9A;&#x4E49;&#x4E3A;&#x7D22;&#x5F15;&#x96F6;&#x70B9;&#x3002;&#x6811;&#x4E5F;&#x662F;&#x6709;&#x5E8F;&#x7684;&#xFF0C;&#x5C31;&#x50CF;&#x7236;&#x6BCD;&#x4E00;&#x6837;&#x603B;&#x662F;&#x6BD4;&#x5B69;&#x5B50;&#x6709;&#x66F4;&#x9AD8;&#x7684;&#x6307;&#x6570;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5F88;&#x597D;&#x5730;&#x5B9E;&#x73B0;&#x6811;&#x7684;&#x81EA;&#x4E0B;&#x800C;&#x4E0A;&#x548C;&#x81EA;&#x4E0A;&#x800C;&#x4E0B;&#x904D;&#x5386;&#x3002;
&#x56FE;11.7&#x663E;&#x793A;&#x4E86;&#x8FD9;&#x4E9B;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x3002; &#x516D;&#x4E2A;&#x7B26;&#x53F7;&#x6309;&#x5176;&#x9891;&#x7387;&#x6392;&#x5E8F;&#x5E76;&#x5B58;&#x50A8;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x3002; &#x970D;&#x592B;&#x66FC;&#x6811;&#x7684;&#x7ED3;&#x679C;&#x5B58;&#x50A8;&#x5728;parent&#xFF0C;left&#x548C;right&#x4E09;&#x4E2A;&#x6570;&#x7EC4;&#x4E2D;&#x3002; &#x53E6;&#x5916;&#xFF0C;&#x6BCF;&#x4E2A;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x7684;&#x9891;&#x7387;&#x90FD;&#x5B58;&#x50A8;&#x5728;frequency&#x6570;&#x7EC4;&#x4E2D;&#x3002;&#x4E3A;&#x4E86;&#x4FBF;&#x4E8E;&#x8BF4;&#x660E;&#xFF0C;&#x6211;&#x4EEC;&#x76F4;&#x63A5;&#x8868;&#x793A;&#x5DE6;&#x53F3;&#x6570;&#x7EC4;&#x7684;&#x8282;&#x70B9;&#x53F7;&#xFF08;&#x4F8B;&#x5982;&#xFF0C;n0&#xFF0C;n1&#x7B49;&#xFF09;&#x3002;&#x8FD9;&#x4E9B;&#x5C06;&#x5728;&#x73B0;&#x5B9E;&#x4E2D;&#x4FDD;&#x5B58;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x5185;&#x90E8;&#x7ED3;&#x70B9;&#x503C;&#x3002;</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x867D;&#x7136;&#x5728;&#x8FD9;&#x6837;&#x7684;&#x6811;&#x4E2D;&#x5B58;&#x50A8;&#x590D;&#x6742;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x53EF;&#x80FD;&#x662F;&#x5947;&#x602A;&#x7684;&#xFF0C;&#x4F46;&#x5728;&#x4E0D;&#x5141;&#x8BB8;&#x6570;&#x636E;&#x5206;&#x914D;&#x7684;&#x5D4C;&#x5165;&#x5F0F;&#x7F16;&#x7A0B;&#x4E2D;&#xFF0C;&#x8FD9;&#x662F;&#x975E;&#x5E38;&#x666E;&#x904D;&#x7684;[<a href="BIBLIOGRAPHY.html#53">53</a>]&#x3002;&#x4E8B;&#x5B9E;&#x4E0A;&#xFF0C;malloc&#xFF08;&#xFF09;&#x548C;free&#xFF08;&#xFF09;&#x7684; c &#x5E93;&#x5B9E;&#x73B0;&#x901A;&#x5E38;&#x4EE5;&#x8FD9;&#x79CD;&#x65B9;&#x5F0F;&#x5B9E;&#x73B0;&#x4F4E;&#x7EA7;&#x5185;&#x5B58;&#x7BA1;&#x7406;&#xFF0C;&#x4EE5;&#x4FBF;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x8FD4;&#x56DE;&#x7684;&#x66F4;&#x5927;&#x7684;&#x5185;&#x5B58;&#x5206;&#x914D;&#xFF08;&#x901A;&#x5E38;&#x79F0;&#x4E3A;&#x9875;&#x9762;&#xFF09;&#x4E2D;&#x521B;&#x5EFA;&#x5C0F;&#x7684;&#x5206;&#x914D;&#xFF0C;&#x8FD9;&#x4F7F;&#x5F97;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x80FD;&#x591F;&#x6709;&#x6548;&#x5730;&#x7BA1;&#x7406;&#x5185;&#x5B58;&#x7684;&#x5927;&#x91CF;&#x5206;&#x914D;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x901A;&#x5E38;&#x5904;&#x7406;&#x5927;&#x578B;&#x6570;&#x636E;&#x5757;&#x7684;&#x5904;&#x7406;&#x5668;&#x9875;&#x8868;&#x548C;&#x78C1;&#x76D8;&#x5B58;&#x50A8;&#x5668;&#x6765;&#x534F;&#x8C03;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x3002; 4&#x5343;&#x5B57;&#x8282;&#x662F;&#x8FD9;&#x4E9B;&#x9875;&#x9762;&#x7684;&#x5178;&#x578B;&#x5927;&#x5C0F;&#x3002;&#x6709;&#x5173;&#x4F7F;&#x7528;&#x6570;&#x7EC4;&#x5B9E;&#x73B0;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x66F4;&#x591A;&#x60F3;&#x6CD5;&#xFF0C;&#x8BF7;&#x53C2;&#x89C1;[<a href="BIBLIOGRAPHY.html#58">58</a>]&#x3002;</p>
</div></div></p>
<p>&#x5728;&#x970D;&#x592B;&#x66FC;&#x6811;&#x4E2D;&#xFF0C;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x90FD;&#x4E0E;&#x6811;&#x4E2D;&#x7684;&#x53F6;&#x7ED3;&#x70B9;&#x76F8;&#x5173;&#x8054;&#x3002;&#x6811;&#x4E2D;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x901A;&#x8FC7;&#x5C06;&#x4E24;&#x4E2A;&#x7B26;&#x53F7;&#x4EE5;&#x6700;&#x5C0F;&#x7684;&#x9891;&#x7387;&#x5206;&#x7EC4;&#x5E76;&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x4F5C;&#x4E3A;&#x65B0;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x7684;&#x5DE6;&#x53F3;&#x7ED3;&#x70B9;&#x6765;&#x521B;&#x5EFA;&#x3002; &#x8BE5;&#x4E2D;&#x95F4;&#x7ED3;&#x70B9;&#x7684;&#x9891;&#x7387;&#x662F;&#x6BCF;&#x4E2A;&#x5B50;&#x7ED3;&#x70B9;&#x7684;&#x9891;&#x7387;&#x4E4B;&#x548C;&#x3002;&#x6B64;&#x8FC7;&#x7A0B;&#x901A;&#x8FC7;&#x8FED;&#x4EE3;&#x5730;&#x521B;&#x5EFA;&#x5177;&#x6709;&#x6700;&#x5C0F;&#x9891;&#x7387;&#x7684;&#x4E24;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5305;&#x62EC;&#x5176;&#x4ED6;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x6216;&#x53F6;&#x8282;&#x70B9;&#x3002;&#x5F53;&#x6240;&#x6709;&#x4E2D;&#x95F4;&#x7ED3;&#x70B9;&#x90FD;&#x88AB;&#x5E76;&#x5165;&#x4E8C;&#x53C9;&#x6811;&#x4E2D;&#x65F6;&#xFF0C;&#x6811;&#x7684;&#x521B;&#x5EFA;&#x8FC7;&#x7A0B;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x3002;
&#x5728;&#x4EE3;&#x7801;&#x4E2D;&#x6709;&#x5F88;&#x591A;&#x65B9;&#x6CD5;&#x53EF;&#x4EE5;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x663E;&#x5F0F;&#x5730;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x8868;&#x793A;&#x6811;&#x4E2D;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x6309;&#x9891;&#x7387;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x7EC4;&#x3002; &#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x9009;&#x62E9;&#x7ED3;&#x70B9;&#x6DFB;&#x52A0;&#x5230;&#x6811;&#x4E2D;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x4EEC;&#x5C06;&#x59CB;&#x7EC8;&#x4F4D;&#x4E8E;&#x5DF2;&#x6392;&#x5E8F;&#x6570;&#x7EC4;&#x7684;&#x76F8;&#x540C;&#x4F4D;&#x7F6E;&#x3002; &#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;&#x5C06;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x7ED3;&#x70B9;&#x63D2;&#x5165;&#x5230;&#x5217;&#x8868;&#x4E2D;&#x76F8;&#x5BF9;&#x6BD4;&#x8F83;&#x590D;&#x6742;&#xFF0C;&#x56E0;&#x4E3A;&#x6570;&#x7EC4;&#x5FC5;&#x987B;&#x518D;&#x6B21;&#x6392;&#x5E8F;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x79FB;&#x52A8;&#x5468;&#x56F4;&#x7684;&#x5143;&#x7D20;&#x3002;&#x6216;&#x8005;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5411;&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x6DFB;&#x52A0;&#x6307;&#x9488;&#x5F0F;&#x6570;&#x7EC4;&#x7D22;&#x5F15;&#xFF0C;&#x4EE5;&#x4FBF;&#x5728;&#x4E0D;&#x5B9E;&#x9645;&#x79FB;&#x52A8;&#x6570;&#x636E;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x903B;&#x8F91;&#x5730;&#x6392;&#x5E8F;&#x6570;&#x636E;&#x3002; &#x8FD9;&#x4F1A;&#x51CF;&#x5C11;&#x6570;&#x636E;&#x590D;&#x5236;&#xFF0C;&#x4F46;&#x662F;&#x4F1A;&#x589E;&#x52A0;&#x8BBF;&#x95EE;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x6210;&#x672C;&#x5E76;&#x9700;&#x8981;&#x989D;&#x5916;&#x7684;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x3002;&#x5728;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x8BBE;&#x8BA1;&#x4E2D;&#xFF0C;&#x8BB8;&#x591A;&#x5E38;&#x89C4;&#x7B97;&#x6CD5;&#x6743;&#x8861;&#x9002;&#x7528;&#x4E8E;HLS&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#x4E2D;&#xFF0C;&#x4E5F;&#x9002;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x5668;&#x4E2D;&#x3002;
<img src="images/huffman_create_tree.jpg" alt="&#x56FE;11.7&#xFF1A;&#x7B26;&#x53F7;&#x6570;&#x7EC4;in&#x88AB;&#x7528;&#x6765;&#x521B;&#x5EFA;&#x970D;&#x592B;&#x66FC;&#x6811;&#xFF0C;&#x6811;&#x4EE5;&#x56FE;&#x5F62;&#x65B9;&#x5F0F;&#x663E;&#x793A;&#xFF0C;&#x4EE5;&#x53CA;&#x7528;&#x4E8E;&#x8868;&#x793A;&#x6811;&#x7684;&#x56DB;&#x4E2A;&#x6570;&#x7EC4;&#x7684;&#x76F8;&#x5E94;&#x7684;&#x503C;(intermediate,left, right, and parent)"></p>
<p>&#x7136;&#x800C;&#xFF0C;&#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x505A;&#x4E00;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x7B80;&#x5316;&#x89C2;&#x5BDF;&#x3002; &#x6700;&#x91CD;&#x8981;&#x7684;&#x89C2;&#x5BDF;&#x662F;&#xFF0C;&#x65B0;&#x7684;&#x4E2D;&#x95F4;&#x7ED3;&#x70B9;&#x603B;&#x662F;&#x6309;&#x9891;&#x7387;&#x987A;&#x5E8F;&#x521B;&#x5EFA;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#xFF0C;&#x5176;&#x9891;&#x7387;&#x5C0F;&#x4E8E;&#x67D0;&#x4E2A;&#x53F6;&#x8282;&#x70B9;&#x7684;&#x9891;&#x7387;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4EEC;&#x5C06;&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6BD4;&#x5DF2;&#x7ECF;&#x521B;&#x5EFA;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x66F4;&#x5C0F;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x3002;&#x8FD9;&#x8868;&#x660E;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x5C06;&#x8282;&#x70B9;&#x5B58;&#x50A8;&#x5728;&#x4E24;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x6570;&#x7EC4;&#x4E2D;&#x6765;&#x7EF4;&#x62A4;&#x6392;&#x5E8F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;&#x4E00;&#x4E2A;&#x6392;&#x5E8F;&#x7684;&#x7B26;&#x53F7;&#x6570;&#x7EC4;&#x548C;&#x4E00;&#x4E2A;&#x6392;&#x5E8F;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x6570;&#x7EC4;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x6BCF;&#x4E2A;&#x5217;&#x8868;&#x4E2D;&#x7684;&#x6700;&#x4F4E;&#x9891;&#x7387;&#x5143;&#x7D20;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x8FFD;&#x52A0;&#x5230;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x5217;&#x8868;&#x7684;&#x672B;&#x5C3E;&#x3002;&#x8FD8;&#x6709;&#x4E00;&#x70B9;&#x989D;&#x5916;&#x7684;&#x590D;&#x6742;&#x6027;&#xFF1A;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x4ECE;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#x4E2D;&#x5220;&#x9664;&#x96F6;&#x4E2A;&#xFF0C;&#x4E00;&#x4E2A;&#x6216;&#x4E24;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x4F46;&#x4E8B;&#x5B9E;&#x8BC1;&#x660E;&#x8FD9;&#x6BD4;&#x590D;&#x5236;&#x8282;&#x70B9;&#x6570;&#x7EC4;&#x590D;&#x6742;&#x5F97;&#x591A;&#x3002;</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x4ECE;&#x6982;&#x5FF5;&#x4E0A;&#x8BB2;&#xFF0C;&#x8FD9;&#x4E2A;&#x7B97;&#x6CD5;&#x4E0E;10.3&#x8282;&#x4E2D;&#x8BA8;&#x8BBA;&#x7684;&#x5408;&#x5171;&#x6392;&#x5E8F;&#x7B97;&#x6CD5;&#x975E;&#x5E38;&#x76F8;&#x4F3C;&#x3002;&#x5173;&#x952E;&#x7684;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x5143;&#x7D20;&#x4ECE;&#x6392;&#x5E8F;&#x540E;&#x7684;&#x6570;&#x7EC4;&#x4E2D;&#x79FB;&#x9664;&#x65F6;&#x7684;&#x64CD;&#x4F5C;&#x3002; &#x5728;&#x5408;&#x5171;&#x6392;&#x5E8F;&#x4E2D;&#xFF0C;&#x6700;&#x5C11;&#x7684;&#x5143;&#x7D20;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x5730;&#x63D2;&#x5165;&#x5230;&#x5408;&#x9002;&#x7684;&#x6570;&#x7EC4;&#x4F4D;&#x7F6E;&#x3002; &#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E24;&#x4E2A;&#x6700;&#x5C0F;&#x5143;&#x7D20;&#x88AB;&#x8BC6;&#x522B;&#xFF0C;&#x7136;&#x540E;&#x5408;&#x5E76;&#x5230;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6811;&#x7ED3;&#x70B9;&#x4E2D;&#x3002;</p>
</div></div></p>
<p>create_tree&#x51FD;&#x6570;&#x7684;&#x5B9E;&#x73B0;&#x4EE3;&#x7801;&#x5982;&#x56FE;11.8&#x6240;&#x793A;&#x3002; &#x7B2C;&#x4E00;&#x4E2A;&#x4EE3;&#x7801;&#x5757;&#x5B9A;&#x4E49;&#x6211;&#x4EEC;&#x5728;&#x51FD;&#x6570;&#x4E2D;&#x4F7F;&#x7528;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;&#x3002; frequency[]&#x5B58;&#x50A8;&#x6BCF;&#x4E2A;&#x88AB;&#x521B;&#x5EFA;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x7684;&#x9891;&#x7387;&#xFF0C; in_count&#x8DDF;&#x8E2A;&#x54EA;&#x4E9B;&#x7B26;&#x53F7;&#x5DF2;&#x88AB;&#x8D4B;&#x4E88;&#x6811;&#x4E2D;&#x7684;&#x7236;&#x8282;&#x70B9;&#xFF0C;tree_count&#x8DDF;&#x8E2A;&#x54EA;&#x4E9B;&#x65B0;&#x521B;&#x5EFA;&#x7684;&#x4E2D;&#x95F4;&#x7ED3;&#x70B9;&#x5DF2;&#x7ECF;&#x88AB;&#x8D4B;&#x4E88;&#x7236;&#x7ED3;&#x70B9;&#x3002; &#x901A;&#x8FC7;&#x4E3B;&#x5FAA;&#x73AF;&#x7684;&#x6BCF;&#x6B21;&#x8FED;&#x4EE3;&#x90FD;&#x4F1A;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6CA1;&#x6709;&#x7236;&#x7EA7;&#x7684;&#x65B0;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#xFF0C;&#x6240;&#x4EE5;tree_count&#x548C;i&#x4E4B;&#x95F4;&#x7684;&#x6240;&#x6709;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x90FD;&#x5C1A;&#x672A;&#x88AB;&#x5206;&#x914D;&#x5230;&#x6811;&#x7684;&#x7236;&#x8282;&#x70B9;&#x4E2D;&#x3002;</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;huffman.h&quot;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;assert.h&quot;</span></span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">create_tree</span> <span class="hljs-params">(
    <span class="hljs-comment">/* input */</span> Symbol in[INPUT_SYMBOL_SIZE],
    <span class="hljs-comment">/* input */</span> <span class="hljs-keyword">int</span> num_symbols,
    <span class="hljs-comment">/* output */</span> ap_uint&lt;SYMBOL_BITS&gt; parent[INPUT_SYMBOL_SIZE<span class="hljs-number">-1</span>],
    <span class="hljs-comment">/* output */</span> ap_uint&lt;SYMBOL_BITS&gt; left[INPUT_SYMBOL_SIZE<span class="hljs-number">-1</span>],
    <span class="hljs-comment">/* output */</span> ap_uint&lt;SYMBOL_BITS&gt; right[INPUT_SYMBOL_SIZE<span class="hljs-number">-1</span>])</span> </span>{
    Frequency frequency[INPUT_SYMBOL_SIZE<span class="hljs-number">-1</span>];
    ap_uint&lt;SYMBOL_BITS&gt; tree_count = <span class="hljs-number">0</span>;  <span class="hljs-comment">// Number of intermediate nodes assigned a parent.</span>
    ap_uint&lt;SYMBOL_BITS&gt; in_count = <span class="hljs-number">0</span>;    <span class="hljs-comment">// Number of inputs consumed.</span>

    assert(num_symbols &gt; <span class="hljs-number">0</span>);
    assert(num_symbols &lt;= INPUT_SYMBOL_SIZE);
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; (num_symbols<span class="hljs-number">-1</span>); i++) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS PIPELINE II=5</span>
        Frequency node_freq = <span class="hljs-number">0</span>;

        <span class="hljs-comment">// There are two cases.</span>
        <span class="hljs-comment">// Case 1: remove a Symbol from in[]</span>
        <span class="hljs-comment">// Case 2: remove an element from intermediate[]</span>
        <span class="hljs-comment">// We do this twice, once for the left and once for the right of the new intermediate node.</span>
        assert(in_count &lt; num_symbols || tree_count &lt; i);
        Frequency intermediate_freq = frequency[tree_count];
        Symbol s = in[in_count];
        <span class="hljs-keyword">if</span>((in_count &lt; num_symbols &amp;&amp; s.frequency &lt;= intermediate_freq) || tree_count == i) {
            <span class="hljs-comment">// Pick symbol from in[].</span>
            left[i] = s.value; <span class="hljs-comment">// Set input symbol as left node</span>
            node_freq = s.frequency; <span class="hljs-comment">// Add symbol frequency to total node frequency</span>
            in_count++; <span class="hljs-comment">// Move to the next input symbol</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// Pick internal node without a parent.</span>
            left[i] = INTERNAL_NODE; <span class="hljs-comment">// Set symbol to indicate an internal node</span>
            node_freq = frequency[tree_count]; <span class="hljs-comment">// Add child node frequency</span>
            parent[tree_count] = i; <span class="hljs-comment">// Set this node as child&apos;s parent</span>
            tree_count++; <span class="hljs-comment">// Go to next parentless internal node</span>
        }

        assert(in_count &lt; num_symbols || tree_count &lt; i);
        intermediate_freq = frequency[tree_count];
        s = in[in_count];
        <span class="hljs-keyword">if</span>((in_count &lt; num_symbols &amp;&amp; s.frequency &lt;= intermediate_freq) || tree_count == i) {
            <span class="hljs-comment">// Pick symbol from in[].</span>
            right[i] = s.value;
            frequency[i] = node_freq + s.frequency;
            in_count++;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// Pick internal node without a parent.</span>
            right[i] = INTERNAL_NODE;
            frequency[i] = node_freq + intermediate_freq;
            parent[tree_count] = i;
            tree_count++;
        }
        <span class="hljs-comment">// Verify that nodes in the tree are sorted by frequency</span>
        assert(i == <span class="hljs-number">0</span> || frequency[i] &gt;= frequency[i<span class="hljs-number">-1</span>]);
    }

    parent[tree_count] = <span class="hljs-number">0</span>; <span class="hljs-comment">//Set parent of last node (root) to 0</span>
}
</code></pre>
<figure id="fig3.12.6"><img src="images/placeholder.png" alt="&#x56FE;11.8&#xFF1A;&#x970D;&#x592B;&#x66FC;&#x6811;&#x7684;&#x521B;&#x5EFA;&#x5B8C;&#x6574;&#x7684;&#x4EE3;&#x7801;&#x3002; &#x8BE5;&#x4EE3;&#x7801;&#x5C06;&#x5DF2;&#x6392;&#x5E8F;&#x7684;&#x7B26;&#x53F7;&#x6570;&#x7EC4;in&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#xFF0C;&#x8BE5;&#x6570;&#x7EC4;&#x4E2D;&#x56FD;&#x7684;&#x5143;&#x7D20;&#x6570;&#x91CF;&#x4E3A;n&#xFF0C;&#x5E76;&#x8F93;&#x51FA;left, right&#x548C; parent&#x4E09;&#x4E2A;&#x6570;&#x7EC4;&#x7684;&#x970D;&#x592B;&#x66FC;&#x6811;&#x3002;"><figcaption>&#x56FE;11.8&#xFF1A;&#x970D;&#x592B;&#x66FC;&#x6811;&#x7684;&#x521B;&#x5EFA;&#x5B8C;&#x6574;&#x7684;&#x4EE3;&#x7801;&#x3002; &#x8BE5;&#x4EE3;&#x7801;&#x5C06;&#x5DF2;&#x6392;&#x5E8F;&#x7684;&#x7B26;&#x53F7;&#x6570;&#x7EC4;in&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#xFF0C;&#x8BE5;&#x6570;&#x7EC4;&#x4E2D;&#x56FD;&#x7684;&#x5143;&#x7D20;&#x6570;&#x91CF;&#x4E3A;n&#xFF0C;&#x5E76;&#x8F93;&#x51FA;left, right&#x548C; parent&#x4E09;&#x4E2A;&#x6570;&#x7EC4;&#x7684;&#x970D;&#x592B;&#x66FC;&#x6811;&#x3002;</figcaption></figure>
<p>&#x4E3B;&#x5FAA;&#x73AF;&#x5305;&#x542B;&#x4E24;&#x4E2A;&#x76F8;&#x4F3C;&#x7684;&#x4EE3;&#x7801;&#x5757;&#x3002;&#x6BCF;&#x4E2A;&#x4EE3;&#x7801;&#x5757;&#x5C06;[in_count].frequency&#x4E2D;&#x4E0B;&#x4E00;&#x4E2A;&#x53EF;&#x7528;&#x7B26;&#x53F7;&#x7684;&#x9891;&#x7387;&#x4E0E;&#x4E0B;&#x4E00;&#x4E2A;[tree_count]&#x53EF;&#x7528;&#x7684;&#x7684;&#x4E2D;&#x95F4;&#x7ED3;&#x70B9;&#x7684;&#x9891;&#x7387;&#x76F8;&#x6BD4;&#x8F83;&#xFF0C;&#x7136;&#x540E;&#x9009;&#x62E9;&#x4E24;&#x4E2A;&#x6700;&#x4F4E;&#x9891;&#x7387;&#x5408;&#x5E76;&#x4E3A;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x4E2D;&#x95F4;&#x7ED3;&#x70B9;&#x7684;&#x53F6;&#x5B50;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;&#x4EE3;&#x7801;&#x5757;&#x5BF9;&#x65B0;&#x8282;&#x70B9;&#x7684;&#x5DE6;&#x4FA7;&#x5B50;&#x8282;&#x70B9;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x5B58;&#x50A8;&#x5728;left[i]&#x4E2D;&#x3002;&#x7B2C;&#x4E8C;&#x4E2A;&#x4EE3;&#x7801;&#x5757;&#x9009;&#x62E9;&#x65B0;&#x8282;&#x70B9;&#x7684;&#x53F3;&#x4FA7;&#x5B50;&#x8282;&#x70B9;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#xFF0C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x5B58;&#x50A8;&#x5728;right[i]&#x4E2D;&#x3002;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x6211;&#x4EEC;&#x90FD;&#x9700;&#x8981;&#x5C0F;&#x5FC3;&#x786E;&#x4FDD;&#x8FD9;&#x4E2A;&#x6BD4;&#x8F83;&#x662F;&#x6709;&#x610F;&#x4E49;&#x7684;&#x3002; &#x5728;&#x7B2C;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;&#x8FED;&#x4EE3;&#x4E2D;&#xFF0C;tree_count==0&#x548C;i==0&#xFF0C;&#x6240;&#x4EE5;&#x6CA1;&#x6709;&#x6709;&#x6548;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x9700;&#x8981;&#x8003;&#x8651;&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x59CB;&#x7EC8;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x7B26;&#x53F7;&#x3002;&#x5728;&#x5FAA;&#x73AF;&#x7684;&#x6700;&#x540E;&#x8FED;&#x4EE3;&#x671F;&#x95F4;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x8F93;&#x5165;&#x7B26;&#x53F7;&#x53EF;&#x80FD;&#x90FD;&#x4F1A;&#x88AB;&#x4F7F;&#x7528;&#xFF0C;&#x56E0;&#x6B64;in_count==num symbols&#xFF0C;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x59CB;&#x7EC8;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x3002;</p>
<p>&#x5FAA;&#x73AF;&#x7684;&#x8FED;&#x4EE3;&#x6B21;&#x6570;&#x4EE5;&#x4E00;&#x79CD;&#x6709;&#x8DA3;&#x7684;&#x65B9;&#x5F0F;&#x4F9D;&#x8D56;&#x4E8E;num<em>symbolsd&#x7684;&#x8F93;&#x5165;&#x3002;&#x7531;&#x4E8E;&#x6BCF;&#x4E2A;&#x8F93;&#x5165;&#x7B26;&#x53F7;&#x90FD;&#x53D8;&#x6210;&#x4E86;&#x4E8C;&#x53C9;&#x6811;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x53F6;&#x8282;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x4F1A;&#x6709;num_symbols-1&#x4E2A;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x4F1A;&#x88AB;&#x521B;&#x5EFA;&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x662F;&#x4E8C;&#x53C9;&#x6811;&#x7684;&#x57FA;&#x672C;&#x5C5E;&#x6027;&#xFF0C; &#x5728;&#x5FAA;&#x73AF;&#x7ED3;&#x675F;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x521B;&#x5EFA;num</em> symbols-1&#x4E2A;&#x65B0;&#x8282;&#x70B9;&#xFF0C;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x6709;&#x4E24;&#x4E2A;&#x5B50;&#x8282;&#x70B9;&#x3002;&#x8FD9;&#x4E9B;&#x5B50;&#x7ED3;&#x70B9;&#x7684;num_symbols&#x5C06;&#x662F;&#x8F93;&#x5165;&#x7B26;&#x53F7;&#xFF0C;num_symbols-2&#x5C06;&#x662F;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x3002;&#x5728;&#x6CA1;&#x6709;&#x7236;&#x8282;&#x70B9;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5C06;&#x6709;&#x4E00;&#x4E2A;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x4F5C;&#x4E3A;&#x6811;&#x7684;&#x6839;&#x3002;&#x8FD9;&#x6700;&#x540E;&#x7684;&#x8282;&#x70B9;&#x5728;&#x6700;&#x540E;&#x4E00;&#x884C;&#x4EE3;&#x7801;&#x4E2D;&#x88AB;&#x8D4B;&#x4E88;&#x4E00;&#x4E2A;&#x7236;&#x7D22;&#x5F15;0&#xFF0C;&#x8FD9;&#x5C31;&#x5B8C;&#x6210;&#x4E86;&#x970D;&#x592B;&#x66FC;&#x6811;&#x7684;&#x521B;&#x5EFA;&#x3002;</p>
<p>&#x6811;&#x4E2D;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x53EF;&#x4EE5;&#x662F;&#x4E00;&#x4E2A;&#x7B26;&#x53F7;&#x8282;&#x70B9;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x3002;&#x5728;&#x521B;&#x5EFA;&#x970D;&#x592B;&#x66FC;&#x6811;&#x65F6;&#xFF0C;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x5E76;&#x4E0D;&#x91CD;&#x8981;&#xFF0C;&#x5C3D;&#x7BA1;&#x7A0D;&#x540E;&#x6211;&#x4EEC;&#x5728;&#x904D;&#x5386;&#x6811;&#x65F6;&#x4F1A;&#x5F88;&#x91CD;&#x8981;&#x3002;&#x5982;&#x679C;&#x76F8;&#x5E94;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x662F;&#x5185;&#x90E8;&#x8282;&#x70B9;&#x7684;&#x8BDD;&#xFF0C;&#x4E3A;&#x4E86;&#x5B58;&#x50A8;&#x8FD9;&#x4E2A;&#x5DEE;&#x522B;&#xFF0C;&#x4E00;&#x4E2A;&#x7279;&#x6B8A;&#x7684;&#x503C;INTERNAL_NODE&#x88AB;&#x5B58;&#x50A8;&#x5728;left[]&#x548C;right[]&#x6570;&#x7EC4;&#x4E2D;&#x3002;&#x8BF7;&#x6CE8;&#x610F;&#xFF0C;&#x8FD9;&#x4E2A;&#x5B58;&#x50A8;&#x672C;&#x8D28;&#x4E0A;&#x9700;&#x8981;&#x5728;&#x6570;&#x7EC4;&#x4E2D;&#x518D;&#x52A0;&#x4E00;&#x4F4D;&#x6765;&#x8868;&#x793A;&#x3002; &#x7ED3;&#x679C;&#xFF0C;left[]&#x548C;right[]&#x6570;&#x7EC4;&#x4F1A;&#x6BD4;&#x4F60;&#x60F3;&#x8C61;&#x7684;&#x5927;&#x4E00;&#x70B9;&#x3002;</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x5728;&#x56FE;11.8&#x4E2D;&#xFF0C;&#x5BF9;&#x4E8E;&#x5927;&#x6570;&#x636E;&#x96C6;&#xFF08;n&gt; 256&#xFF09;&#xFF0C;&#x4EE3;&#x7801;&#x7684;&#x8FD1;&#x4F3C;&#x5EF6;&#x65F6;&#xFF08;&#x4EE5;n&#x4E3A;&#x5355;&#x4F4D;&#xFF09;&#x662F;&#x591A;&#x5C11;&#xFF1F;
&#x4EE3;&#x7801;&#x7684;&#x54EA;&#x4E9B;&#x90E8;&#x5206;&#x652F;&#x914D;&#x5468;&#x671F;&#x6570;&#x91CF;&#xFF1F;</p>
</div></div></p>
<h3 id="1124-&#x8BA1;&#x7B97;&#x6BD4;&#x7279;&#x957F;&#x5EA6;"><a name="1124-&#x8BA1;&#x7B97;&#x6BD4;&#x7279;&#x957F;&#x5EA6;" class="anchor-navigation-ex-anchor" href="#1124-&#x8BA1;&#x7B97;&#x6BD4;&#x7279;&#x957F;&#x5EA6;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.4 &#x8BA1;&#x7B97;&#x6BD4;&#x7279;&#x957F;&#x5EA6;</h3>
<p>Compute_bit_length&#x51FD;&#x6570;&#x4E3A;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x786E;&#x5B9A;&#x4E86;&#x6811;&#x7684;&#x6DF1;&#x5EA6;&#x3002;&#x6DF1;&#x5EA6;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x51B3;&#x5B9A;&#x4E86;&#x7528;&#x4E8E;&#x7F16;&#x7801;&#x7684;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x4F4D;&#x6570;&#x3002;&#x8BA1;&#x7B97;&#x6811;&#x4E2D;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x6DF1;&#x5EA6;&#x662F;&#x4F7F;&#x7528;&#x4E0B;&#x9762;&#x7684;&#x5FAA;&#x73AF;&#x5B8C;&#x6210;&#x7684;&#xFF1A;</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mtext><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">(</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">)</mi></mtext><mo>=</mo><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow><mi mathvariant="normal">&#x2200;</mi><mi>n</mi><mo>!</mo><mo>=</mo><mtext><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">t</mi></mtext><mo separator="true">,</mo><mtext><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi></mtext><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mtext><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">(</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">t</mi></mtext><mo>(</mo><mi>n</mi><mo>)</mo><mo>+</mo><mn>1</mn><mo>)</mo></mrow></mtd></mtr><mtr><mtd><mrow><mi mathvariant="normal">&#x2200;</mi><mi>n</mi><mo separator="true">,</mo><mtext><mi mathvariant="normal">c</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi></mtext><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mtext><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi></mtext><mo>(</mo><mi>n</mi><mo>)</mo><mo>+</mo><mn>1</mn></mrow></mtd></mtr></mtable><mspace width="2em"></mspace><mo>(</mo><mn>1</mn><mn>1</mn><mi mathvariant="normal">.</mi><mn>1</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\text{depth(root)} = 0 \\
\forall n! = \text{root}, \text{depth}(n) = \text{depth(parent}(n) + 1)      \\
\forall n, \text{child\_depth}(n) = \text{depth}(n) + 1
\end{aligned}
\qquad(11.1)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.05em;"></span><span class="strut bottom" style="height:3.6000000000000005em;vertical-align:-1.5500000000000007em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-1.2099999999999997em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">depth(root)</span></span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span><span style="top:-0.00999999999999951em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">&#x2200;</span><span class="mord mathit">n</span><span class="mclose">!</span><span class="mrel">=</span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">root</span></span><span class="mpunct">,</span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">depth</span></span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">depth(parent</span></span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span><span style="top:1.1900000000000006em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">&#x2200;</span><span class="mord mathit">n</span><span class="mpunct">,</span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">child_depth</span></span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">depth</span></span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span><span class="mopen"><span class="mspace qquad"></span><span class="mopen">(</span></span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">.</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span></span></span></p>
<p>&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x904D;&#x5386;&#x4ECE;&#x6839;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#x7684;&#x6811;&#x5E76;&#x6309;&#x987A;&#x5E8F;&#x63A2;&#x7D22;&#x6BCF;&#x4E2A;&#x5185;&#x90E8;&#x8282;&#x70B9;&#x6765;&#x8BA1;&#x7B97;&#x8FD9;&#x79CD;&#x5FAA;&#x73AF;&#x3002;&#x5F53;&#x6211;&#x4EEC;&#x904D;&#x5386;&#x6BCF;&#x4E2A;&#x5185;&#x90E8;&#x8282;&#x70B9;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8BA1;&#x7B97;&#x8282;&#x70B9;&#x7684;&#x6DF1;&#x5EA6;&#x548C;&#x4EFB;&#x4F55;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x76F8;&#x5E94;&#x7684;&#x6DF1;&#x5EA6;&#xFF08;&#x589E;&#x52A0;1&#xFF09;&#x3002;&#x4E8B;&#x5B9E;&#x8BC1;&#x660E;&#xFF0C;&#x6211;&#x4EEC;&#x5B9E;&#x9645;&#x4E0A;&#x5E76;&#x4E0D;&#x5173;&#x5FC3;&#x5185;&#x90E8;&#x8282;&#x70B9;&#x7684;&#x6DF1;&#x5EA6;&#xFF0C;&#x800C;&#x53EA;&#x5173;&#x5FC3;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x6DF1;&#x5EA6;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5BF9;&#x8FD9;&#x79CD;&#x5FAA;&#x73AF;&#x8FDB;&#x884C;&#x4E86;&#x8BA1;&#x7B97;&#xFF1A;</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mtext><mi mathvariant="normal">c</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">(</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">)</mi></mtext><mo>=</mo><mn>1</mn></mrow></mtd></mtr><mtr><mtd><mrow><mi mathvariant="normal">&#x2200;</mi><mi>n</mi><mo>!</mo><mo>=</mo><mtext><mi mathvariant="normal">r</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">t</mi></mtext><mo separator="true">,</mo><mtext><mi mathvariant="normal">c</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi></mtext><mo>(</mo><mi>n</mi><mo>)</mo><mo>=</mo><mtext><mi mathvariant="normal">c</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">(</mi><mi mathvariant="normal">p</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">t</mi></mtext><mo>(</mo><mi>n</mi><mo>)</mo><mo>+</mo><mn>1</mn><mo>)</mo></mrow></mtd></mtr></mtable><mspace width="2em"></mspace><mo>(</mo><mn>1</mn><mn>1</mn><mi mathvariant="normal">.</mi><mn>2</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\text{child\_depth(root)}  = 1 \\
\forall n! = \text{root}, \text{child\_depth}(n) = \text{chil\_depth(parent}(n) + 1)  
\end{aligned}
\qquad(11.2)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.45em;"></span><span class="strut bottom" style="height:2.4000000000000004em;vertical-align:-0.9500000000000004em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-0.6099999999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">child_depth(root)</span></span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span><span style="top:0.5900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathrm">&#x2200;</span><span class="mord mathit">n</span><span class="mclose">!</span><span class="mrel">=</span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">root</span></span><span class="mpunct">,</span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">child_depth</span></span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">chil_depth(parent</span></span><span class="mopen">(</span><span class="mord mathit">n</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span><span class="mopen"><span class="mspace qquad"></span><span class="mopen">(</span></span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">.</span><span class="mord mathrm">2</span><span class="mclose">)</span></span></span></span></span></p>
<p>&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x56FE;11.9&#x6240;&#x793A;&#x3002; &#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x53C2;&#x6570;&#x8868;&#x793A;&#x970D;&#x592B;&#x66FC;&#x6811;&#x7684;parent[], left[]&#x548C;right[]&#x3002;num_symbols&#x5305;&#x542B;&#x8F93;&#x5165;&#x7B26;&#x53F7;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x5B83;&#x6BD4;&#x6811;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#x7684;&#x6570;&#x91CF;&#x591A;&#x4E00;&#x4E2A;&#x3002;length_histogram[]&#x6570;&#x7EC4;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x90FD;&#x5B58;&#x50A8;&#x5177;&#x6709;&#x7ED9;&#x5B9A;&#x6DF1;&#x5EA6;&#x7684;&#x7B26;&#x53F7;&#x6570;&#x91CF;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x6709;&#x6DF1;&#x5EA6;&#x4E3A;3&#x7684;5&#x4E2A;&#x7B26;&#x53F7;&#xFF0C;&#x5219;length_histogram[3] = 5&#x3002;
child_depth[]&#x5728;&#x904D;&#x5386;&#x6811;&#x65F6;&#x5B58;&#x50A8;&#x6BCF;&#x4E2A;&#x5185;&#x90E8;&#x8282;&#x70B9;&#x7684;&#x6DF1;&#x5EA6;&#x3002;&#x6BCF;&#x4E2A;&#x5185;&#x90E8;&#x7ED3;&#x70B9;&#x7684;&#x6DF1;&#x5EA6;&#x5728;traverse_tree &#x5FAA;&#x73AF;&#x4E2D;&#x88AB;&#x786E;&#x5B9A;&#x540E;&#xFF0C;length_histogram[]&#x88AB;&#x66F4;&#x65B0;&#x3002;Internal_length_histogram[]&#x7528;&#x4E8E;&#x786E;&#x4FDD;&#x6211;&#x4EEC;&#x7684;&#x529F;&#x80FD;&#x7B26;&#x5408;dataflow&#x6307;&#x4EE4;&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x5176;&#x4E2D;&#x8F93;&#x51FA;&#x6570;&#x7EC4;length_histogram[]&#x6C38;&#x8FDC;&#x4E0D;&#x4F1A;&#x88AB;&#x8BFB;&#x53D6;&#xFF0C;init_histogram&#x521D;&#x59CB;&#x5316;&#x8FD9;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#x3002;</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>init_histogram&#x5FAA;&#x73AF;&#x5177;&#x6709;II = 1&#x7684;pipeline&#x6307;&#x4EE4;&#x3002;&#x662F;&#x5426;&#x6709;&#x53EF;&#x80FD;&#x6EE1;&#x8DB3;&#x8FD9;&#x4E2A;II&#xFF1F;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5C06;II&#x589E;&#x52A0;&#x5230;&#x66F4;&#x5927;&#x7684;&#x503C;&#xFF0C;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F; &#x5982;&#x679C;&#x6211;&#x4EEC;&#x4E0D;&#x5E94;&#x7528;&#x8FD9;&#x4E2A;&#x6307;&#x4EE4;&#xFF0C;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F;</p>
</div></div></p>
<p>&#x6811;&#x4E2D;&#x7684;&#x5185;&#x90E8;&#x8282;&#x70B9;&#x4ECE;&#x6839;&#x8282;&#x70B9;&#x904D;&#x5386;&#xFF0C;&#x6839;&#x8282;&#x70B9;&#x5177;&#x6709;&#x6700;&#x5927;&#x7684;&#x7D22;&#x5F15;&#xFF0C;&#x76F4;&#x5230;&#x7D22;&#x5F15;&#x4E3A;&#x96F6;&#x3002;&#x7531;&#x4E8E;&#x8282;&#x70B9;&#x7684;&#x6570;&#x7EC4;&#x662F;&#x4EE5;&#x81EA;&#x4E0B;&#x800C;&#x4E0A;&#x7684;&#x987A;&#x5E8F;&#x521B;&#x5EFA;&#x7684;&#xFF0C;&#x56E0;&#x6B64;&#x8BE5;&#x53CD;&#x5411;&#x987A;&#x5E8F;&#x5BFC;&#x81F4;&#x6811;&#x7684;&#x81EA;&#x9876;&#x5411;&#x4E0B;&#x904D;&#x5386;&#xFF0C;&#x4F7F;&#x5F97;&#x80FD;&#x591F;&#x5728;&#x901A;&#x8FC7;&#x8282;&#x70B9;&#x7684;&#x5355;&#x4E2A;&#x8DEF;&#x5F84;&#x4E2D;&#x8BA1;&#x7B97;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x7684;&#x9012;&#x5F52;&#x3002;&#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#xFF0C;&#x6211;&#x4EEC;&#x786E;&#x5B9A;&#x5B83;&#x7684;&#x5B69;&#x5B50;&#x7684;&#x6DF1;&#x5EA6;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x8BE5;&#x8282;&#x70B9;&#x5B58;&#x5728;&#x6709;&#x4EFB;&#x4F55;&#x7B26;&#x53F7;&#x7684;&#x5B69;&#x5B50;&#xFF0C;&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x786E;&#x5B9A;&#x6709;&#x591A;&#x5C11;&#x5B69;&#x5B50;&#xFF0C;&#x5E76;&#x76F8;&#x5E94;&#x5730;&#x66F4;&#x65B0;&#x76F4;&#x65B9;&#x56FE;&#x3002;&#x5185;&#x90E8;&#x8282;&#x70B9;&#x7684;&#x5B50;&#x8282;&#x70B9;&#x7531;&#x7279;&#x6B8A;&#x503C;INTERNAL_NODE&#x6765;&#x8868;&#x793A;&#x3002;</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;huffman.h&quot;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;assert.h&quot;</span></span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">compute_bit_length</span> <span class="hljs-params">(
    <span class="hljs-comment">/* input */</span> ap_uint&lt;SYMBOL_BITS&gt; parent[INPUT_SYMBOL_SIZE<span class="hljs-number">-1</span>],
    <span class="hljs-comment">/* input */</span> ap_uint&lt;SYMBOL_BITS&gt; left[INPUT_SYMBOL_SIZE<span class="hljs-number">-1</span>],
    <span class="hljs-comment">/* input */</span> ap_uint&lt;SYMBOL_BITS&gt; right[INPUT_SYMBOL_SIZE<span class="hljs-number">-1</span>],
    <span class="hljs-comment">/* input */</span> <span class="hljs-keyword">int</span> num_symbols,
    <span class="hljs-comment">/* output */</span> ap_uint&lt;SYMBOL_BITS&gt; length_histogram[TREE_DEPTH])</span> </span>{
    assert(num_symbols &gt; <span class="hljs-number">0</span>);
    assert(num_symbols &lt;= INPUT_SYMBOL_SIZE);
    ap_uint&lt;TREE_DEPTH_BITS&gt; child_depth[INPUT_SYMBOL_SIZE<span class="hljs-number">-1</span>];
    ap_uint&lt;SYMBOL_BITS&gt; internal_length_histogram[TREE_DEPTH];
 init_histogram:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; TREE_DEPTH; i++) {
        <span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS pipeline II=1</span>
        internal_length_histogram[i] = <span class="hljs-number">0</span>;
    }

    child_depth[num_symbols<span class="hljs-number">-2</span>] = <span class="hljs-number">1</span>; <span class="hljs-comment">// Depth of the root node is 1.</span>

traverse_tree:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = num_symbols<span class="hljs-number">-3</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS pipeline II=3</span>
        ap_uint&lt;TREE_DEPTH_BITS&gt; length = child_depth[parent[i]] + <span class="hljs-number">1</span>;
        child_depth[i] = length;
        <span class="hljs-keyword">if</span>(left[i] != INTERNAL_NODE || right[i] != INTERNAL_NODE){
            <span class="hljs-keyword">int</span> children;
            <span class="hljs-keyword">if</span>(left[i] != INTERNAL_NODE &amp;&amp; right[i] != INTERNAL_NODE) {
                <span class="hljs-comment">// Both the children of the original node were symbols</span>
                children = <span class="hljs-number">2</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// One child of the original node was a symbol</span>
                children = <span class="hljs-number">1</span>;
            }
            ap_uint&lt;SYMBOL_BITS&gt; count = internal_length_histogram[length];
            count += children;
            internal_length_histogram[length] = count;
            length_histogram[length] = count;
        }
    }
}
</code></pre>
<figure id="fig3.12.7"><img src="images/placeholder.png" alt="&#x56FE;11.9&#xFF1A;&#x7528;&#x4E8E;&#x786E;&#x5B9A;&#x6BCF;&#x4E2A;&#x6BD4;&#x7279;&#x957F;&#x5EA6;&#x4E0A;&#x7B26;&#x53F7;&#x6570;&#x91CF;&#x7684;&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x3002;"><figcaption>&#x56FE;11.9&#xFF1A;&#x7528;&#x4E8E;&#x786E;&#x5B9A;&#x6BCF;&#x4E2A;&#x6BD4;&#x7279;&#x957F;&#x5EA6;&#x4E0A;&#x7B26;&#x53F7;&#x6570;&#x91CF;&#x7684;&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x3002;</figcaption></figure>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x5BF9;&#x4E8E;&#x5927;&#x6570;&#x636E;&#x96C6;&#xFF08;n&gt; 256&#xFF09;&#xFF0C;&#x56FE;11.9&#x4E2D;&#x4EE3;&#x7801;&#x7684;&#x8FD1;&#x4F3C;&#x5EF6;&#x65F6;&#xFF08;&#x4EE5;n&#x4E3A;&#x5355;&#x4F4D;&#xFF09;&#x662F;&#x591A;&#x5C11;&#xFF1F; &#x4EE3;&#x7801;&#x7684;&#x54EA;&#x4E9B;&#x90E8;&#x5206;&#x652F;&#x914D;&#x5468;&#x671F;&#x6570;&#x91CF;&#xFF1F;</p>
</div></div></p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x6B64;&#x4EE3;&#x7801;&#x6709;&#x51E0;&#x4E2A;&#x5FAA;&#x73AF;&#x3002; &#x4F8B;&#x5982;&#xFF0C;&#x4E00;&#x6B21;&#x5FAA;&#x73AF;&#x53D1;&#x751F;&#x662F;&#x56E0;&#x4E3A;&#x76F4;&#x65B9;&#x56FE;&#x8BA1;&#x7B97;&#x3002; &#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8BE5;&#x5FAA;&#x73AF;&#x7528;II&#x7684;3&#x5408;&#x6210;&#x3002;&#x5982;&#x679C;&#x4F60;&#x5728;pipeline&#x6307;&#x4EE4;&#x4E2D;&#xFF0C;&#x76EE;&#x6807;&#x662F;&#x8F83;&#x4F4E;&#x7684;II&#xFF0C;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F; &#x4F60;&#x53EF;&#x4EE5;&#x91CD;&#x5199;&#x4EE3;&#x7801;&#x6765;&#x6D88;&#x9664;&#x5FAA;&#x73AF;&#x5E76;&#x8FBE;&#x5230;&#x8F83;&#x4F4E;&#x7684;II&#x5417;&#xFF1F;</p>
</div></div></p>
<h3 id="1125-&#x622A;&#x65AD;&#x6811;"><a name="1125-&#x622A;&#x65AD;&#x6811;" class="anchor-navigation-ex-anchor" href="#1125-&#x622A;&#x65AD;&#x6811;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.5 &#x622A;&#x65AD;&#x6811;</h3>
<p>&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x8FC7;&#x7A0B;&#x7684;&#x4E0B;&#x4E00;&#x90E8;&#x5206;&#x662F;&#x91CD;&#x7EC4;&#x5177;&#x6709;&#x5927;&#x4E8E;MAX_CODEWORD_LENGTH&#x6240;&#x6307;&#x5B9A;&#x7684;&#x6DF1;&#x5EA6;&#x7684;&#x8282;&#x70B9;&#x3002;&#x8FD9;&#x662F;&#x901A;&#x8FC7;&#x5BFB;&#x627E;&#x4EFB;&#x4F55;&#x5177;&#x6709;&#x66F4;&#x5927;&#x6DF1;&#x5EA6;&#x7684;&#x7B26;&#x53F7;&#xFF0C;&#x5E76;&#x5C06;&#x5B83;&#x4EEC;&#x79FB;&#x52A8;&#x5230;&#x6BD4;&#x6240;&#x6307;&#x5B9A;&#x7684;&#x76EE;&#x6807;&#x66F4;&#x5C0F;&#x7684;&#x7EA7;&#x522B;&#x6765;&#x5B8C;&#x6210;&#x7684;&#x3002;&#x6709;&#x8DA3;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x5B8C;&#x5168;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x64CD;&#x4F5C;&#x7B26;&#x53F7;&#x6DF1;&#x5EA6;&#x76F4;&#x65B9;&#x56FE;&#x6765;&#x5B8C;&#x6210;&#xFF0C;&#x53EA;&#x8981;&#x76F4;&#x65B9;&#x56FE;&#x4EE5;&#x4E0E;&#x539F;&#x59CB;&#x6811;&#x4E0A;&#x76F8;&#x540C;&#x7684;&#x6A21;&#x5F0F;&#x4E00;&#x81F4;&#x7684;&#x65B9;&#x5F0F;&#x88AB;&#x4FEE;&#x6539;&#x3002;
&#x8F93;&#x5165;&#x76F4;&#x65B9;&#x56FE;&#x5305;&#x542B;&#x5728;input_length_histogram&#x4E2D;&#xFF0C;&#x5B83;&#x662F;&#x524D;&#x9762;&#x7AE0;&#x8282;&#x4E2D;compute_bit_length()&#x51FD;&#x6570;&#x5BFC;&#x51FA;&#x7684;&#x3002;&#x6709;&#x4E24;&#x4E2A;&#x76F8;&#x540C;&#x7684;&#x8F93;&#x51FA;&#x6570;&#x7EC4;truncated_length_histogram1&#x548C;truncated_length histogram2&#x3002;&#x5B83;&#x4EEC;&#x5728;&#x7A0D;&#x540E;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F20;&#x9012;&#x7ED9;&#x4E24;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x51FD;&#x6570;(canonize_tree and create_codewords)&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x5FC5;&#x987B;&#x4F7F;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#x9075;&#x5B88;&#x5355;&#x4E2A;&#x751F;&#x4EA7;&#x8005;&#xFF0C;&#x5355;&#x4E2A;&#x6D88;&#x8D39;&#x8005;&#x7684;dataow&#x6307;&#x4EE4;&#x7684;&#x7EA6;&#x675F;&#x3002;</p>
<p>&#x4EE3;&#x7801;&#x5982;&#x56FE;11.10&#x6240;&#x793A;&#x3002; copy<em>input&#x5FAA;&#x73AF;&#x4ECE;&#x8F93;&#x5165;&#x6570;&#x7EC4;input_length</em> histogram&#x590D;&#x5236;&#x6570;&#x636E;&#x3002; move_nodes&#x5FAA;&#x73AF;&#x5305;&#x542B;&#x4FEE;&#x6539;&#x76F4;&#x65B9;&#x56FE;&#x7684;&#x5927;&#x90E8;&#x5206;&#x5904;&#x7406;&#x3002; &#x6700;&#x540E;&#xFF0C;input_length_histogram&#x51FD;&#x6570;&#x5C06;&#x5185;&#x90E8;&#x7ED3;&#x679C;&#x590D;&#x5236;&#x5230;&#x51FD;&#x6570;&#x7ED3;&#x5C3E;&#x7684;&#x5176;&#x4ED6;&#x8F93;&#x51FA;&#x3002;</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>copy_in for&#x5FAA;&#x73AF;&#x5E76;&#x672A;&#x88AB;&#x4F18;&#x5316;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5728;&#x8FD9;&#x4E2A;&#x5FAA;&#x73AF;&#x4E2D;&#x4F7F;&#x7528;pipeline&#x6216;unroll&#x6307;&#x4EE4;,&#x5EF6;&#x8FDF;&#x548C;&#x542F;&#x52A8;&#x95F4;&#x9694;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#xFF1F;&#x8BBE;&#x8BA1;&#x7684;&#x603B;&#x5EF6;&#x65F6;&#x548C;&#x542F;&#x52A8;&#x95F4;&#x9694;&#x4F1A;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#x53D8;&#x5316;&#xFF1F;</p>
</div></div></p>
<p>&#x8BE5;&#x51FD;&#x6570;&#x7EE7;&#x7EED;&#x5728;&#x7B2C;&#x4E8C;&#x4E2A;&#x8282;&#x70B9;&#x79FB;&#x52A8; for&#x5FAA;&#x73AF;&#x4E2D;&#x6267;&#x884C;&#x5927;&#x90E8;&#x5206;&#x5FAA;&#x73AF;&#x8BA1;&#x7B97;&#x3002;for&#x5FAA;&#x73AF;&#x662F;&#x901A;&#x8FC7;&#x4ECE;&#x6700;&#x5927;&#x7684;&#x7D22;&#x5F15;&#xFF08;TREE_DEPTH-&#x6811;&#x7684;&#x6700;&#x5927;&#x6DF1;&#x5EA6;&#xFF09;&#x8FED;&#x4EE3;&#x904D;&#x5386;&#x622A;&#x65AD;&#x957F;&#x5EA6;&#x76F4;&#x65B9;&#x56FE;&#x6570;&#x7EC4;&#x5F00;&#x59CB;&#x7684;&#x3002;&#x8FD9;&#x6837;&#x7EE7;&#x7EED;&#x4E0B;&#x53BB;&#x76F4;&#x5230;&#x627E;&#x5230;&#x4E00;&#x4E2A;&#x975E;&#x96F6;&#x5143;&#x7D20;&#x6216;i&#x8FBE;&#x5230;MAX_CODEWORD_LENGTH&#x7684;&#x503C;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x627E;&#x4E0D;&#x5230;&#x4E00;&#x4E2A;&#x975E;&#x96F6;&#x5143;&#x7D20;&#xFF0C;&#x90A3;&#x610F;&#x5473;&#x7740;&#x970D;&#x592B;&#x66FC;&#x6811;&#x7684;&#x521D;&#x59CB;&#x8F93;&#x5165;&#x6CA1;&#x6709;&#x6DF1;&#x5EA6;&#x5927;&#x4E8E;&#x76EE;&#x6807;&#x6DF1;&#x5EA6;&#x7684;&#x8282;&#x70B9;&#x3002;&#x6362;&#x53E5;&#x8BDD;&#x8BF4;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x9000;&#x51FA;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E0D;&#x7528;&#x6267;&#x884C;&#x4EFB;&#x4F55;&#x622A;&#x65AD;&#x3002;&#x5982;&#x679C;&#x6709;&#x4E00;&#x4E2A;&#x5927;&#x4E8E;&#x76EE;&#x6807;&#x6DF1;&#x5EA6;&#x7684;&#x503C;&#xFF0C;&#x90A3;&#x4E48;&#x8BE5;&#x51FD;&#x6570;&#x7EE7;&#x7EED;&#x91CD;&#x65B0;&#x7EC4;&#x7EC7;&#x6811;&#xFF0C;&#x4F7F;&#x6240;&#x6709;&#x8282;&#x70B9;&#x7684;&#x6DF1;&#x5EA6;&#x90FD;&#x5C0F;&#x4E8E;&#x76EE;&#x6807;&#x6DF1;&#x5EA6;&#xFF0C;&#x8FD9;&#x662F;&#x901A;&#x8FC7;&#x91CD;&#x65B0;&#x6392;&#x5E8F; while&#x5FAA;&#x73AF;&#x4E2D;&#x7684;&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x7684;&#x3002;&#x5F53;&#x6709;&#x8282;&#x70B9;&#x79FB;&#x52A8;&#x65F6;&#xFF0C;&#x8282;&#x70B9;&#x79FB;&#x52A8; for&#x5FAA;&#x73AF;&#x4ECE;&#x6DF1;&#x5EA6;&#x6700;&#x5927;&#x7684;&#x8282;&#x70B9;&#x5F00;&#x59CB;&#xFF0C;&#x7136;&#x540E;&#x7EE7;&#x7EED;&#xFF0C;&#x76F4;&#x5230;&#x6240;&#x6709;&#x8282;&#x70B9;&#x91CD;&#x65B0;&#x6392;&#x5217;&#x7684;&#x6DF1;&#x5EA6;&#x90FD;&#x5C0F;&#x4E8E;&#x76EE;&#x6807;&#x6DF1;&#x5EA6;&#x3002;&#x6BCF;&#x4E2A;&#x8282;&#x70B9;&#x79FB;&#x52A8;for&#x5FAA;&#x73AF;&#x7684;&#x8FED;&#x4EE3;&#x90FD;&#x5728;&#x4E00;&#x4E2A;&#x6DF1;&#x5EA6;&#x7684;&#x79FB;&#x52A8;&#x7ED3;&#x70B9;&#x4E0A;&#x8FDB;&#x884C;&#x3002;</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;huffman.h&quot;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;assert.h&quot;</span></span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">truncate_tree</span><span class="hljs-params">(
    <span class="hljs-comment">/* input */</span> ap_uint&lt;SYMBOL_BITS&gt; input_length_histogram[TREE_DEPTH],
    <span class="hljs-comment">/* output */</span> ap_uint&lt;SYMBOL_BITS&gt; output_length_histogram1[TREE_DEPTH],
    <span class="hljs-comment">/* output */</span> ap_uint&lt;SYMBOL_BITS&gt; output_length_histogram2[TREE_DEPTH]
)</span> </span>{
    <span class="hljs-comment">// Copy into temporary storage to maintain dataflow properties</span>
 copy_input:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; TREE_DEPTH; i++) {
        output_length_histogram1[i] = input_length_histogram[i];
    }

    ap_uint&lt;SYMBOL_BITS&gt; j = MAX_CODEWORD_LENGTH;
 move_nodes:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = TREE_DEPTH - <span class="hljs-number">1</span>; i &gt; MAX_CODEWORD_LENGTH; i--) {
        <span class="hljs-comment">// Look to see if there is any nodes at lengths greater than target depth</span>
    reorder:
        <span class="hljs-keyword">while</span>(output_length_histogram1[i] != <span class="hljs-number">0</span>) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS LOOP_TRIPCOUNT min=3 max=3 avg=3</span>
            <span class="hljs-keyword">if</span> (j == MAX_CODEWORD_LENGTH) {
                <span class="hljs-comment">// Find deepest leaf with codeword length &lt; target depth</span>
                <span class="hljs-keyword">do</span> {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS LOOP_TRIPCOUNT min=1 max=1 avg=1</span>
                    j--;
                } <span class="hljs-keyword">while</span>(output_length_histogram1[j] == <span class="hljs-number">0</span>);
            }

            <span class="hljs-comment">// Move leaf with depth i to depth j+1.</span>
            output_length_histogram1[j] -= <span class="hljs-number">1</span>; <span class="hljs-comment">// The node at level j is no longer a leaf.</span>
            output_length_histogram1[j+<span class="hljs-number">1</span>] += <span class="hljs-number">2</span>; <span class="hljs-comment">// Two new leaf nodes are attached at level j+1.</span>
            output_length_histogram1[i<span class="hljs-number">-1</span>] += <span class="hljs-number">1</span>; <span class="hljs-comment">// The leaf node at level i+1 gets attached here.</span>
            output_length_histogram1[i] -= <span class="hljs-number">2</span>; <span class="hljs-comment">// Two leaf nodes have been lost from level i.</span>

            <span class="hljs-comment">// now deepest leaf with codeword length &lt; target length</span>
            <span class="hljs-comment">// is at level (j+1) unless j+1 == target length</span>
            j++;
        }
    }

    <span class="hljs-comment">// Copy the output to meet dataflow requirements and check the validity</span>
    <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> limit = <span class="hljs-number">1</span>;
 copy_output:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; TREE_DEPTH; i++) {
        output_length_histogram2[i] = output_length_histogram1[i];
        assert(output_length_histogram1[i] &gt;= <span class="hljs-number">0</span>);
        assert(output_length_histogram1[i] &lt;= limit);
        limit * = <span class="hljs-number">2</span>;
    }
}
</code></pre>
<figure id="fig3.12.8"><img src="images/placeholder.png" alt="&#x56FE;11.10&#xFF1A;&#x91CD;&#x65B0;&#x7EC4;&#x7EC7;&#x970D;&#x592B;&#x66FC;&#x6811;&#x7684;&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#xFF0C;&#x4EE5;&#x4FBF;&#x4EFB;&#x4F55;&#x8282;&#x70B9;&#x7684;&#x6DF1;&#x5EA6;&#x4F4E;&#x4E8E;&#x53C2;&#x6570;MAX_CODEWORD_LENGTH&#x6307;&#x5B9A;&#x7684;&#x76EE;&#x6807;&#x503C;&#x3002;"><figcaption>&#x56FE;11.10&#xFF1A;&#x91CD;&#x65B0;&#x7EC4;&#x7EC7;&#x970D;&#x592B;&#x66FC;&#x6811;&#x7684;&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#xFF0C;&#x4EE5;&#x4FBF;&#x4EFB;&#x4F55;&#x8282;&#x70B9;&#x7684;&#x6DF1;&#x5EA6;&#x4F4E;&#x4E8E;&#x53C2;&#x6570;MAX_CODEWORD_LENGTH&#x6307;&#x5B9A;&#x7684;&#x76EE;&#x6807;&#x503C;&#x3002;</figcaption></figure>
<p>&#x91CD;&#x65B0;&#x6392;&#x5E8F; while&#x5FAA;&#x73AF;&#x5728;&#x6BCF;&#x6B21;&#x8FED;&#x4EE3;&#x4E2D;&#x79FB;&#x52A8;&#x4E00;&#x4E2A;&#x8282;&#x70B9;&#x3002;&#x7B2C;&#x4E00;&#x4E2A; if&#x8BED;&#x53E5;&#x7528;&#x4E8E;&#x627E;&#x5230;&#x6700;&#x5927;&#x6DF1;&#x5EA6;&#x7684;&#x53F6;&#x8282;&#x70B9;&#x3002;&#x7136;&#x540E;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x8FD9;&#x4E2A;&#x7ED3;&#x70B9;&#x8BBE;&#x4E3A;&#x4E2D;&#x95F4;&#x7ED3;&#x70B9;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x6DFB;&#x52A0;&#x5230;&#x6BD4;&#x76EE;&#x6807;&#x7684;&#x6DF1;&#x5EA6;&#x5927;&#x7684;&#x53F6;&#x8282;&#x70B9;&#x4F5C;&#x4E3A;&#x5B50;&#x8282;&#x70B9;&#x3002;&#x8FD9;&#x4E2A;if&#x4ECE;&#x53E5;&#x6709;&#x4E00;&#x4E2A;do/while&#x5FAA;&#x73AF;&#xFF0C;&#x4ECE;&#x76EE;&#x6807;&#x5411;&#x4E0B;&#x8FED;&#x4EE3;&#xFF0C;&#x5BFB;&#x627E;truncated_length_histogram&#x6570;&#x7EC4;&#x4E2D;&#x975E;&#x96F6;&#x7684;&#x8BB0;&#x5F55;&#x3002;&#x5B83;&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x4E0E;&#x5F00;&#x5934;&#x7684;&#x8282;&#x70B9;&#x79FB;&#x52A8;for&#x5FAA;&#x73AF;&#x76F8;&#x4F3C;&#x3002;&#x5F53;&#x5B83;&#x53D1;&#x73B0;&#x6700;&#x6DF1;&#x7684;&#x53F6;&#x8282;&#x70B9;&#x5C0F;&#x4E8E;&#x76EE;&#x6807;&#x6DF1;&#x5EA6;&#x65F6;&#x5C31;&#x505C;&#x6B62;&#xFF0C;&#x8BE5;&#x8282;&#x70B9;&#x7684;&#x6DF1;&#x5EA6;&#x5B58;&#x50A8;&#x5728;j&#x4E2D;&#x3002;</p>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x6709;&#x4E00;&#x4E2A;&#x6DF1;&#x5EA6;&#x4E3A;i&#x5927;&#x4E8E;&#x76EE;&#x6807;&#x7684;&#x8282;&#x70B9;&#xFF0C;&#x4EE5;&#x53CA;&#x4E00;&#x4E2A;&#x6DF1;&#x5EA6;&#x5C0F;&#x4E8E;&#x5B58;&#x50A8;&#x5728;j&#x4E2D;&#x7684;&#x76EE;&#x6807;&#x7684;&#x8282;&#x70B9;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x8282;&#x70B9;&#x4ECE;&#x6DF1;&#x5EA6;i&#x548C;&#x8282;&#x70B9;&#x4ECE;j&#x79FB;&#x5230;&#x5230;&#x6DF1;&#x5EA6;&#x4E3A;j+1&#x7684;&#x5B50;&#x8282;&#x70B9;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E24;&#x4E2A;&#x7B26;&#x53F7;&#x5230;truncated_length_histogram[j+1]&#x3002;&#x6211;&#x4EEC;&#x6B63;&#x5728;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x6DF1;&#x5EA6;&#x4E3A;j&#x7684;&#x65B0;&#x7684;&#x4E2D;&#x95F4;&#x8282;&#x70B9;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x4ECE;&#x8BE5;&#x7EA7;&#x522B;&#x53BB;&#x6389;&#x4E00;&#x4E2A;&#x7B26;&#x53F7;&#x3002;&#x6211;&#x4EEC;&#x79FB;&#x52A8;&#x53E6;&#x4E00;&#x4E2A;&#x53F6;&#x7ED3;&#x70B9;&#x4ECE;&#x6DF1;&#x5EA6;i&#x5230;&#x6DF1;&#x5EA6;i-1&#x3002;&#x6211;&#x4EEC;&#x4ECE;truncated_length_histogram[i]&#x4E2D;&#x51CF;&#x53BB;2&#xFF0C;&#x56E0;&#x4E3A;&#x5176;&#x4E2D;1&#x4E2A;&#x8282;&#x70B9;&#x8FDB;&#x5165;&#x7EA7;&#x522B;j+1&#xFF0C;&#x53E6;&#x4E00;&#x7EA7;&#x5230;&#x8FBE;&#x7EA7;&#x522B;i-1&#x3002;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x662F;&#x5728;truncated_length_histogram&#x6570;&#x7EC4;&#x4E0A;&#x7684;&#x56DB;&#x4E2A;&#x8BED;&#x53E5;&#x4E2D;&#x5B8C;&#x6210;&#x7684;&#x3002;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;&#x7B26;&#x53F7;&#x5230;&#x7EA7;&#x522B;j+1&#xFF0C;&#x6211;&#x4EEC;&#x66F4;&#x65B0;j&#xFF0C;&#x5B83;&#x62E5;&#x6709;&#x76EE;&#x6807;&#x7EA7;&#x522B;&#x4EE5;&#x4E0B;&#x7684;&#x6700;&#x9AD8;&#x7EA7;&#x522B;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x4EEC;&#x91CD;&#x590D;&#x8FD9;&#x4E2A;&#x7A0B;&#x5E8F;&#x76F4;&#x5230;&#x6CA1;&#x6709;&#x6DF1;&#x5EA6;&#x5927;&#x4E8E;&#x76EE;&#x6807;&#x7684;&#x9644;&#x52A0;&#x7B26;&#x53F7;&#x3002;</p>
<p>&#x8BE5;&#x51FD;&#x6570;&#x901A;&#x8FC7;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x4F4D;&#x957F;&#x5EA6;&#x7684;&#x53E6;&#x4E00;&#x526F;&#x672C;&#x6765;&#x5B8C;&#x6210;&#x7684;&#x3002;&#x8FD9;&#x662F;&#x901A;&#x8FC7;&#x5B58;&#x50A8;&#x6570;&#x7EC4;truncated_length_histogram1&#x7684;&#x66F4;&#x65B0;&#x4F4D;&#x957F;&#x5EA6;&#x5230;truncated_length_histogram2&#x4E2D;&#x5B8C;&#x6210;&#x7684;&#x3002;&#x6211;&#x4EEC;&#x5C06;&#x8FD9;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#x4F20;&#x9012;&#x7ED9;huffman_encoding&#x9876;&#x5C42;&#x51FD;&#x6570;&#x7684;&#x6700;&#x540E;&#x7684;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8FD9;&#x4E24;&#x4E2A;&#x6570;&#x7EC4;&#x6765;&#x786E;&#x4FDD;&#x6EE1;&#x8DB3;dataflow&#x6307;&#x4EE4;&#x7684;&#x7EA6;&#x675F;&#x3002;</p>
<h3 id="1126-canonize&#x6811;"><a name="1126-canonize&#x6811;" class="anchor-navigation-ex-anchor" href="#1126-canonize&#x6811;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.6 Canonize&#x6811;</h3>
<p>&#x7F16;&#x7801;&#x8FC7;&#x7A0B;&#x7684;&#x4E0B;&#x4E00;&#x6B65;&#x662F;&#x786E;&#x5B9A;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x4F4D;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x56FE;11.11&#x6240;&#x793A;&#x7684;canoniz_tree&#x51FD;&#x6570;&#x4E2D;&#x6267;&#x884C;&#x6B64;&#x64CD;&#x4F5C;&#x3002;&#x8BE5;&#x51FD;&#x6570;&#x6309;&#x6392;&#x5E8F;&#x987A;&#x5E8F;&#x7684;&#x7B26;&#x53F7;&#x6570;&#x7EC4;&#x3001;&#x7B26;&#x53F7;&#x603B;&#x6570;&#xFF08;num_symbols&#xFF09;&#x548C;&#x970D;&#x592B;&#x66FC;&#x6811;&#x76F4;&#x65B9;&#x56FE;&#x7684;&#x957F;&#x5EA6;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#x3002;symbol_bits[]&#x5305;&#x542B;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x4F7F;&#x7528;&#x7684;&#x7F16;&#x7801;&#x4F4D;&#x6570;&#x3002; &#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x5177;&#x6709;&#x503C;0x0A&#x7684;&#x7B26;&#x53F7;&#x4EE5;4&#x4F4D;&#x7F16;&#x7801;&#xFF0C;&#x5219;symbol_bits[10] = 4&#x3002;</p>
<p>canonization&#x8FC7;&#x7A0B;&#x7531;&#x4E24;&#x4E2A;&#x5FAA;&#x73AF;&#x7EC4;&#x6210;&#xFF0C;&#x5206;&#x522B;&#x662F;init_bits &#x548C; process_symbols&#x3002; init_bits&#x5FAA;&#x73AF;&#x9996;&#x5148;&#x6267;&#x884C;&#xFF0C;&#x521D;&#x59CB;&#x5316;symbol_bits[]&#x6570;&#x7EC4;&#x4E3A;0&#x3002;&#x7136;&#x540E;process_symbols&#x5FAA;&#x73AF;&#x6309;&#x7167;&#x4ECE;&#x6700;&#x5C0F;&#x9891;&#x7387;&#x5230;&#x6700;&#x5927;&#x9891;&#x7387;&#x7684;&#x6392;&#x5E8F;&#x987A;&#x5E8F;&#x5904;&#x7406;&#x7B26;&#x53F7;&#x3002;&#x901A;&#x5E38;&#xFF0C;&#x9891;&#x7387;&#x6700;&#x4F4E;&#x7684;&#x7B26;&#x53F7;&#x88AB;&#x5206;&#x914D;&#x6700;&#x957F;&#x7684;&#x7801;&#xFF0C;&#x800C;&#x9891;&#x7387;&#x6700;&#x9AD8;&#x7684;&#x7B26;&#x53F7;&#x88AB;&#x5206;&#x914D;&#x6700;&#x77ED;&#x7684;&#x7801;&#x3002; &#x6BCF;&#x6B21;&#x901A;&#x8FC7;process_symbols&#x5FAA;&#x73AF;&#x65F6;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x5206;&#x914D;&#x5230;&#x4E00;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x957F;&#x5EA6;&#x3002;&#x7B26;&#x53F7;&#x7684;&#x957F;&#x5EA6;&#x7531;&#x5185;&#x90E8;do / while&#x5FAA;&#x73AF;&#x51B3;&#x5B9A;&#xFF0C;&#x5B83;&#x904D;&#x5386;&#x957F;&#x5EA6;&#x76F4;&#x65B9;&#x56FE;&#x3002;&#x8BE5;&#x5FAA;&#x73AF;&#x67E5;&#x627E;&#x5C1A;&#x672A;&#x5206;&#x914D;&#x7801;&#x5B57;&#x7684;&#x6700;&#x5927;&#x4F4D;&#x957F;&#xFF0C;&#x5E76;&#x5C06;&#x8BE5;&#x957F;&#x5EA6;&#x4E2D;&#x7684;&#x7801;&#x5B57;&#x6570;&#x5B58;&#x50A8;&#x5728;count&#x4E2D;&#x3002; &#x6BCF;&#x6B21;&#x901A;&#x8FC7;&#x5916;&#x5FAA;&#x73AF;&#xFF0C;count&#x9012;&#x51CF;&#xFF0C;&#x76F4;&#x5230;&#x6211;&#x4EEC;&#x7528;&#x5B8C;&#x7801;&#x5B57;&#x3002; &#x5F53;count&#x53D8;&#x4E3A;&#x96F6;&#x65F6;&#xFF0C;&#x5185;&#x90E8;do/while&#x5FAA;&#x73AF;&#x518D;&#x6B21;&#x6267;&#x884C;&#x53BB;&#x5BFB;&#x627E;&#x8981;&#x5206;&#x914D;&#x7684;&#x4EE3;&#x7801;&#x5B57;&#x7684;&#x957F;&#x5EA6;&#x3002;</p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;huffman.h&quot;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;assert.h&quot;</span></span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">canonize_tree</span><span class="hljs-params">(
    <span class="hljs-comment">/* input */</span> Symbol sorted[INPUT_SYMBOL_SIZE],
    <span class="hljs-comment">/* input */</span> ap_uint&lt;SYMBOL_BITS&gt; num_symbols,
    <span class="hljs-comment">/* input */</span> ap_uint&lt;SYMBOL_BITS&gt; codeword_length_histogram[TREE_DEPTH],
    <span class="hljs-comment">/* output */</span> CodewordLength symbol_bits[INPUT_SYMBOL_SIZE] )</span> </span>{
    assert(num_symbols &lt;= INPUT_SYMBOL_SIZE);

 init_bits:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; INPUT_SYMBOL_SIZE; i++) {
        symbol_bits[i] = <span class="hljs-number">0</span>;
    }

    ap_uint&lt;SYMBOL_BITS&gt; length = TREE_DEPTH;
    ap_uint&lt;SYMBOL_BITS&gt; count = <span class="hljs-number">0</span>;

    <span class="hljs-comment">// Iterate across the symbols from lowest frequency to highest</span>
    <span class="hljs-comment">// Assign them largest bit length to smallest</span>
 process_symbols:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; k &lt; num_symbols; k++) {
        <span class="hljs-keyword">if</span> (count == <span class="hljs-number">0</span>) {
            <span class="hljs-comment">//find the next non-zero bit length</span>
            <span class="hljs-keyword">do</span> {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS LOOP_TRIPCOUNT min=1 avg=1 max=2</span>
                length--;
                <span class="hljs-comment">// n is the number of symbols with encoded length i</span>
                count = codeword_length_histogram[length];
            }
            <span class="hljs-keyword">while</span> (count == <span class="hljs-number">0</span>);
        }
        symbol_bits[sorted[k].value] = length; <span class="hljs-comment">//assign symbol k to have length bits</span>
        count--; <span class="hljs-comment">//keep assigning i bits until we have counted off n symbols</span>
    }
}
</code></pre>
<figure id="fig3.12.9"><img src="images/placeholder.png" alt="&#x56FE;11.11&#xFF1A;&#x5B8C;&#x6574;&#x7684;canonizing&#x970D;&#x592B;&#x66FC;&#x6811;&#x4EE3;&#x7801;&#xFF0C;&#x5B83;&#x5B9A;&#x4E49;&#x4E86;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x4F4D;&#x6570;"><figcaption>&#x56FE;11.11&#xFF1A;&#x5B8C;&#x6574;&#x7684;canonizing&#x970D;&#x592B;&#x66FC;&#x6811;&#x4EE3;&#x7801;&#xFF0C;&#x5B83;&#x5B9A;&#x4E49;&#x4E86;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x4F4D;&#x6570;</figcaption></figure>
<pre><code class="lang-c"><span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>;
process_symbols:
<span class="hljs-keyword">for</span>(length = TREE_DEPTH; length &gt;= <span class="hljs-number">0</span>; length--) {
    count = codeword_length_histogram[length];
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; count; i++) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS pipeline II=1</span>
        symbol_bits[sorted[k++].value] = length;
    }
 }
</code></pre>
<figure id="fig3.12.10"><img src="images/placeholder.png" alt="&#x56FE;11.12&#xFF1A;&#x56FE;11.11&#x4E2D;process_symbols&#x5FAA;&#x73AF;&#x7684;&#x66FF;&#x4EE3;&#x5FAA;&#x73AF;&#x7ED3;&#x6784;&#x3002;"><figcaption>&#x56FE;11.12&#xFF1A;&#x56FE;11.11&#x4E2D;process_symbols&#x5FAA;&#x73AF;&#x7684;&#x66FF;&#x4EE3;&#x5FAA;&#x73AF;&#x7ED3;&#x6784;&#x3002;</figcaption></figure>
<p><div class="alert alert-info hints-alert"><div class="hints-icon"><i class="fa fa-info-circle"></i></div><div class="hints-container"><p>process_symbols&#x5FAA;&#x73AF;&#x65E0;&#x6CD5;&#x8FDB;&#x884C;&#x6D41;&#x6C34;&#x7EBF;&#x64CD;&#x4F5C;&#xFF0C;&#x56E0;&#x4E3A;&#x5185;&#x90E8;do / while&#x5FAA;&#x73AF;&#x65E0;&#x6CD5;&#x5C55;&#x5F00;&#x3002; &#x8FD9;&#x6709;&#x70B9;&#x5C34;&#x5C2C;&#xFF0C;&#x56E0;&#x4E3A;&#x5185;&#x90E8;&#x5FAA;&#x73AF;&#x901A;&#x5E38;&#x53EA;&#x6267;&#x884C;&#x4E00;&#x6B21;&#xFF0C;&#x6B65;&#x8FDB;&#x5230;&#x76F4;&#x65B9;&#x56FE;&#x4E2D;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x957F;&#x5EA6;&#x3002; &#x53EA;&#x6709;&#x5728;&#x6781;&#x5C11;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F8B;&#x5982;&#x6211;&#x4EEC;&#x78B0;&#x5DE7;&#x6CA1;&#x6709;&#x5206;&#x914D;&#x4EFB;&#x4F55;&#x4EE3;&#x7801;&#x5B57;&#xFF0C;&#x5185;&#x90E8;&#x5FAA;&#x73AF;&#x9700;&#x8981;&#x6267;&#x884C;&#x591A;&#x6B21;&#x3002; &#x5728;&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6CA1;&#x6709;&#x592A;&#x591A;&#x7684;&#x635F;&#x5931;&#xFF0C;&#x56E0;&#x4E3A;&#x5FAA;&#x73AF;&#x4E2D;&#x7684;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x90FD;&#x662F;&#x7B80;&#x5355;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x9664;&#x4E86;&#x5185;&#x5B58;&#x64CD;&#x4F5C;&#x4E4B;&#x5916;&#xFF0C;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x4E0D;&#x53EF;&#x80FD;&#x662F;&#x6D41;&#x6C34;&#x7EBF;&#x64CD;&#x4F5C;&#x3002; &#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x6784;&#x5EFA;&#x8FD9;&#x4E2A;&#x5FAA;&#x73AF;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x662F;&#x6D41;&#x6C34;&#x7EBF;&#x7684;&#x3002; &#x4E00;&#x79CD;&#x53EF;&#x80FD;&#x6027;&#x662F;&#x4F7F;&#x7528;&#x5916;&#x90E8;for&#x5FAA;&#x73AF;&#x8FED;&#x4EE3;codeword_length_histogram[]&#x548C;&#x5185;&#x90E8;&#x5FAA;&#x73AF;&#x6765;&#x8BA1;&#x7B97;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#xFF0C;&#x5982;&#x56FE;11.12&#x6240;&#x793A;&#x3002;</p>
</div></div></p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x5B9E;&#x73B0;&#x56FE;11.11&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x548C;&#x56FE;11.12&#x4E2D;&#x7684;&#x66FF;&#x4EE3;&#x4EE3;&#x7801;&#x7ED3;&#x6784;&#x3002; &#x54EA;&#x4E00;&#x4E2A;&#x4F1A;&#x5B9E;&#x73B0;&#x66F4;&#x9AD8;&#x7684;&#x6027;&#x80FD;&#xFF1F; &#x54EA;&#x79CD;&#x7F16;&#x7801;&#x98CE;&#x683C;&#x5BF9;&#x4F60;&#x6765;&#x8BF4;&#x66F4;&#x81EA;&#x7136;&#xFF1F;</p>
</div></div></p>
<h3 id="1127-&#x521B;&#x5EFA;&#x7801;&#x5B57;"><a name="1127-&#x521B;&#x5EFA;&#x7801;&#x5B57;" class="anchor-navigation-ex-anchor" href="#1127-&#x521B;&#x5EFA;&#x7801;&#x5B57;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.7 &#x521B;&#x5EFA;&#x7801;&#x5B57;</h3>
<p>&#x7F16;&#x7801;&#x8FC7;&#x7A0B;&#x4E2D;&#x7684;&#x6700;&#x540E;&#x4E00;&#x6B65;&#x662F;&#x4E3A;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x521B;&#x5EFA;&#x7801;&#x5B57;&#x3002; &#x8BE5;&#x6D41;&#x7A0B;&#x6839;&#x636E;Canonical&#x970D;&#x592B;&#x66FC;&#x4EE3;&#x7801;&#x7684;&#x7279;&#x6027;&#xFF0C;&#x6309;&#x987A;&#x5E8F;&#x7B80;&#x5355;&#x5730;&#x5206;&#x914D;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x3002;&#x7B2C;&#x4E00;&#x4E2A;&#x7279;&#x6027;&#x662F;&#x5177;&#x6709;&#x76F8;&#x540C;&#x957F;&#x5EA6;&#x524D;&#x7F00;&#x7684;&#x8F83;&#x957F;&#x7684;&#x4EE3;&#x7801;&#x6BD4;&#x77ED;&#x7801;&#x6709;&#x66F4;&#x9AD8;&#x7684;&#x6570;&#x503C;&#x3002;&#x7B2C;&#x4E8C;&#x4E2A;&#x7279;&#x6027;&#x662F;&#x76F8;&#x540C;&#x957F;&#x5EA6;&#x7684;&#x4EE3;&#x7801;&#x968F;&#x7740;&#x7B26;&#x53F7;&#x503C;&#x7684;&#x589E;&#x52A0;&#x800C;&#x589E;&#x52A0;&#x3002;&#x4E3A;&#x4E86;&#x5728;&#x4FDD;&#x6301;&#x4EE3;&#x7801;&#x7B80;&#x5355;&#x7684;&#x540C;&#x65F6;&#x5B9E;&#x73B0;&#x8FD9;&#x4E9B;&#x5C5E;&#x6027;&#xFF0C;&#x786E;&#x5B9A;&#x6BCF;&#x4E2A;&#x957F;&#x5EA6;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7801;&#x5B57;&#x662F;&#x6709;&#x7528;&#x7684;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x77E5;&#x9053;&#x7531;&#x7801;&#x5B57;&#x957F;&#x5EA6;&#x76F4;&#x65B9;&#x56FE;&#x7ED9;&#x51FA;&#x7684;&#x6BCF;&#x4E2A;&#x957F;&#x5EA6;&#x7684;&#x7801;&#x5B57;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x5219;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4EE5;&#x4E0B;&#x5FAA;&#x73AF;&#x6765;&#x5F97;&#x51FA;&#x7ED3;&#x679C;&#xFF1A;
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mtext><mi mathvariant="normal">f</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">d</mi></mtext><mo>(</mo><mn>1</mn><mo>)</mo><mo>=</mo><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mi mathvariant="normal">&#x2200;</mi><mi>i</mi><mo>&gt;</mo><mn>1</mn><mo separator="true">,</mo><mtext><mi mathvariant="normal">f</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">d</mi></mtext><mo>(</mo><mi>i</mi><mo>)</mo><mo>=</mo></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mrow></mrow><mo>(</mo><mtext><mi mathvariant="normal">f</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">d</mi></mtext><mo>(</mo><mi>i</mi><mo>&#x2212;</mo><mn>1</mn><mo>)</mo><mo>+</mo><mtext><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">g</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">h</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">g</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">m</mi></mtext><mo>(</mo><mi>i</mi><mo>&#x2212;</mo><mn>1</mn><mo>)</mo><mo>)</mo><mo>&#x226A;</mo><mn>1</mn></mrow></mtd></mtr></mtable><mspace width="2em"></mspace><mo>(</mo><mn>1</mn><mn>1</mn><mi mathvariant="normal">.</mi><mn>3</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">
\begin{aligned}
&amp;\text{first\_codeword}(1) = 0 \\
&amp;\forall i&gt;1,\text{first\_codeword}(i) = \\
&amp;(\text{first\_codeword}(i-1) + \text{codeword\_length\_histogram}(i-1))\ll1
\end{aligned}
\qquad(11.3)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.05em;"></span><span class="strut bottom" style="height:3.6000000000000005em;vertical-align:-1.5500000000000007em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-1.2099999999999997em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:-0.00999999999999951em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:1.1900000000000006em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-1.2099999999999997em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">first_codeword</span></span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span><span style="top:-0.00999999999999951em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mord mathrm">&#x2200;</span><span class="mord mathit">i</span><span class="mrel">&gt;</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">first_codeword</span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mclose">)</span><span class="mrel">=</span></span></span><span style="top:1.1900000000000006em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mopen">(</span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">first_codeword</span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mbin">&#x2212;</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mbin">+</span><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">codeword_length_histogram</span></span><span class="mopen">(</span><span class="mord mathit">i</span><span class="mbin">&#x2212;</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mclose">)</span><span class="mrel">&#x226A;</span><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span><span class="mopen"><span class="mspace qquad"></span><span class="mopen">(</span></span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">.</span><span class="mord mathrm">3</span><span class="mclose">)</span></span></span></span></span>
&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x4E00;&#x4E2A;&#x5730;&#x5206;&#x914D;&#x7801;&#x5B57;&#xFF0C;&#x800C;&#x662F;&#x8FD9;&#x4E2A;&#x5FAA;&#x73AF;&#x9996;&#x5148;&#x5206;&#x914D;&#x4E86;&#x6240;&#x6709;&#x7684;&#x4EE3;&#x7801;&#x5B57;&#x3002;&#x8FD9;&#x4F7F;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x6309;&#x7167;&#x7B26;&#x53F7;&#x503C;&#x7684;&#x987A;&#x5E8F;&#x6765;&#x5206;&#x914D;&#x7801;&#x5B57;&#xFF0C;&#x800C;&#x4E0D;&#x7528;&#x62C5;&#x5FC3;&#x6309;&#x957F;&#x5EA6;&#x6216;&#x9891;&#x7387;&#x5BF9;&#x5B83;&#x4EEC;&#x8FDB;&#x884C;&#x6392;&#x5E8F;&#x3002;
&#x9664;&#x4E86;&#x5C06;&#x7801;&#x5B57;&#x5206;&#x914D;&#x7ED9;&#x7B26;&#x53F7;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x8FD8;&#x9700;&#x8981;&#x5BF9;&#x7801;&#x5B57;&#x8FDB;&#x884C;&#x683C;&#x5F0F;&#x5316;&#xFF0C;&#x4F7F;&#x5F97;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x5F88;&#x5BB9;&#x6613;&#x5730;&#x7528;&#x4E8E;&#x7F16;&#x7801;&#x548C;&#x89E3;&#x7801;&#x3002; &#x4F7F;&#x7528;&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x7684;&#x7CFB;&#x7EDF;&#x901A;&#x5E38;&#x4EE5;&#x4F4D;&#x53CD;&#x8F6C;&#x7684;&#x987A;&#x5E8F;&#x5B58;&#x50A8;&#x4EE3;&#x7801;&#x5B57;&#x3002; &#x8FD9;&#x4F7F;&#x5F97;&#x89E3;&#x7801;&#x8FC7;&#x7A0B;&#x66F4;&#x5BB9;&#x6613;&#xFF0C;&#x56E0;&#x4E3A;&#x4ECE;&#x6839;&#x8282;&#x70B9;&#x5230;&#x53F6;&#x7ED3;&#x70B9;&#xFF0C;&#x6BD4;&#x7279;&#x6D41;&#x88AB;&#x6309;&#x7167;&#x4E0E;&#x89E3;&#x7801;&#x671F;&#x95F4;&#x6811;&#x904D;&#x5386;&#x76F8;&#x540C;&#x7684;&#x987A;&#x5E8F;&#x5B58;&#x50A8;&#x3002;</p>
<p>&#x5B9E;&#x73B0;create<em>codewords&#x51FD;&#x6570;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x56FE;11.13&#x6240;&#x793A;&#x3002;Symbol_bits[]&#x5305;&#x542B;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x7801;&#x5B57;&#x548C;&#x957F;&#x5EA6;&#xFF0C;codeword_length_histogram[]&#x5305;&#x542B;&#x6BCF;&#x4E2A;&#x957F;&#x5EA6;&#x7684;&#x7801;&#x5B57;&#x6570;&#x91CF;&#xFF0C;encoding[]&#x7684;&#x8F93;&#x51FA;&#x8868;&#x793A;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x7F16;&#x7801;&#x3002;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7531;&#x5B9E;&#x9645;&#x7684;&#x7801;&#x5B57;&#x548C;&#x6BCF;&#x4E2A;&#x7801;&#x5B57;&#x7684;&#x957F;&#x5EA6;&#x6253;&#x5305;&#x5728;&#x4E00;&#x8D77;&#x7EC4;&#x6210;&#x3002;&#x7801;&#x5B57;&#x7684;&#x6700;&#x5927;&#x957F;&#x5EA6;&#x7531;MAX_CODEWORD_LENGTH&#x53C2;&#x6570;&#x7ED9;&#x5B9A;&#x3002;&#x53CD;&#x8FC7;&#x6765;&#xFF0C;&#x8FD9;&#x53C8;&#x51B3;&#x5B9A;&#x4E86;&#x4FDD;&#x6301;&#x7801;&#x5B57;&#x6240;&#x9700;&#x7684;&#x4F4D;&#x6570;&#xFF0C;&#x5B83;&#x7531;CODEWORD_LENGTH BITS&#x7ED9;&#x5B9A;&#x3002; CODEWORD_LENGTH_BITS&#x7F16;&#x7801;&#x6570;&#x7EC4;&#x4E2D;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x7684;&#x6700;&#x4F4E;&#x6709;&#x6548;&#x4F4D;&#x5305;&#x542B;&#x4ECE;&#x8F93;&#x5165;&#x6570;&#x7EC4;symbol_bits&#x63A5;&#x6536;&#x5230;&#x7684;&#x76F8;&#x540C;&#x503C;&#x3002;&#x6BCF;&#x4E2A;&#x7F16;&#x7801;&#x5143;&#x7D20;&#x7684;&#x9AD8;&#x4F4D;MAX_CODEWORD_LENGTH&#x5305;&#x542B;&#x5B9E;&#x9645;&#x7801;&#x5B57;&#x3002;&#x4F7F;&#x7528;27&#x4F4D;MAX_CODEWORD_LENGTH&#x5BFC;&#x81F4;CODEWORD_LENGTH</em> BITS&#x4E3A;5&#x662F;&#x4E00;&#x4E2A;&#x7279;&#x522B;&#x6709;&#x7528;&#x7684;&#x7EC4;&#x5408;&#xFF0C;&#x56E0;&#x4E3A;encoding[]&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x5143;&#x7D20;&#x6EE1;&#x8DB3;&#x4E00;&#x4E2A;32&#x4F4D;&#x5B57;&#x957F;&#x5EA6;&#x3002;</p>
<p>&#x8BE5;&#x4EE3;&#x7801;&#x4E3B;&#x8981;&#x7531;&#x4E24;&#x4E2A;&#x5FAA;&#x73AF;&#x7EC4;&#x6210;&#xFF0C;&#x5206;&#x522B;&#x662F;first_codewords&#x548C;assign_codewords&#x3002;first_codewords&#x5FAA;&#x73AF;&#x5BFB;&#x627E;&#x6BCF;&#x4E2A;&#x957F;&#x5EA6;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x7801;&#x5B57;&#xFF0C;&#x5E76;&#x6267;&#x884C;&#x516C;&#x5F0F;11.3&#x7684;&#x5FAA;&#x73AF;&#x3002; assign_codewords&#x5FAA;&#x73AF;&#x6700;&#x7EC8;&#x5C06;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x4E0E;&#x6BCF;&#x4E2A;&#x7801;&#x5B57;&#x76F8;&#x5173;&#x8054;&#x3002;</p>
<p>&#x7801;&#x5B57;&#x662F;&#x901A;&#x8FC7;&#x6BCF;&#x4E2A;&#x7801;&#x5B57;&#x7684;&#x957F;&#x5EA6;&#x5E76;&#x7D22;&#x5F15;&#x5230;first_codeword[]&#x7684;&#x6B63;&#x786E;&#x5143;&#x7D20;&#x4E2D;&#x627E;&#x5230;&#x7684;&#x3002; &#x8BE5;&#x4EE3;&#x7801;&#x7684;&#x4E3B;&#x8981;&#x590D;&#x6742;&#x6027;&#x5728;&#x4E8E;&#x4F4D;&#x53CD;&#x8F6C;&#x8FC7;&#x7A0B;&#xFF0C;&#x5B83;&#x662F;&#x57FA;&#x4E8E;bit_reverse32&#x51FD;&#x6570;&#x3002; &#x6211;&#x4EEC;&#x4E4B;&#x524D;&#x5728;FFT&#x7AE0;&#x8282;&#x4E2D;&#x5DF2;&#x7ECF;&#x8BA8;&#x8BBA;&#x4E86;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#xFF08;&#x53C2;&#x89C1;&#x7B2C;5.3&#x7AE0;&#xFF09;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x4E0D;&#x4F1A;&#x5728;&#x8FD9;&#x91CC;&#x518D;&#x8BA8;&#x8BBA;&#x5B83;&#x3002; &#x5728;&#x53CD;&#x8F6C;&#x7801;&#x5B57;&#x4E2D;&#x7684;&#x4F4D;&#x4E4B;&#x540E;&#xFF0C;&#x4E0B;&#x4E00;&#x4E2A;&#x8BED;&#x53E5;&#x5220;&#x9664;&#x6700;&#x4E0D;&#x91CD;&#x8981;&#x7684;&apos;0&apos;&#x4F4D;&#xFF0C;&#x53EA;&#x7559;&#x4E0B;&#x4F4D;&#x53CD;&#x8F6C;&#x7684;&#x7801;&#x5B57;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x4F4D;&#x53CD;&#x8F6C;&#x7684;&#x7801;&#x5B57;&#x4E0E;&#x4F4E;&#x4F4D;&#x4E2D;&#x7684;&#x7B26;&#x53F7;&#x7684;&#x957F;&#x5EA6;&#x4E00;&#x8D77;&#x6253;&#x5305;&#x5728;&#x9AD8;&#x4F4D;&#x4E2D;&#xFF0C;&#x5E76;&#x5B58;&#x50A8;&#x5728;encoding[]&#x4E2D;&#x3002; &#x6700;&#x540E;&#xFF0C;first_codeword[]&#x4E2D;&#x7684;&#x503C;&#x662F;&#x9012;&#x589E;&#x7684;&#x3002;</p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x5728;&#x56FE;11.13&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x8F93;&#x5165;&#x5B9E;&#x9645;&#x4E0A;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x5197;&#x4F59;&#x4FE1;&#x606F;&#x3002;&#x7279;&#x522B;&#x662F;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x76F4;&#x65B9;&#x56FE;&#x6765;&#x8BA1;&#x7B97;&#x6BCF;&#x4E2A;&#x7801;&#x5B57;symbol_bits[]&#x7684;&#x957F;&#x5EA6;&#xFF0C;&#x8BA1;&#x7B97;&#x5B58;&#x50A8;&#x5728;codeword_length_histogram[]&#x4E2D;&#x6BCF;&#x4E2A;&#x6BD4;&#x7279;&#x957F;&#x5EA6;&#x7684;&#x7B26;&#x53F7;&#x6570;&#x3002; &#x76F8;&#x53CD;&#xFF0C;&#x5728;&#x6B64;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x6211;&#x4EEC;&#x9009;&#x62E9;&#x590D;&#x7528;&#x6700;&#x521D;&#x8BA1;&#x7B97;&#x7684;&#x76F4;&#x65B9;&#x56FE;&#x7684;truncate_tree&#xFF08;&#xFF09;&#x51FD;&#x6570;&#x3002; &#x8FD9;&#x6837;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x91CD;&#x65B0;&#x8BA1;&#x7B97;&#x76F4;&#x65B9;&#x56FE;&#x6765;&#x8282;&#x7701;&#x5B58;&#x50A8;&#x7A7A;&#x95F4;&#x3002;&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x5F88;&#x597D;&#x7684;&#x8003;&#x91CF;&#x5417;&#xFF1F; &#x5728;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x591A;&#x5C11;&#x8D44;&#x6E90;&#x6765;&#x8BA1;&#x7B97;&#x76F4;&#x65B9;&#x56FE;&#xFF1F; &#x901A;&#x8FC7;&#x6D41;&#x6C34;&#x7EBF;&#x4F20;&#x9012;&#x76F4;&#x65B9;&#x56FE;&#x9700;&#x8981;&#x591A;&#x5C11;&#x8D44;&#x6E90;&#xFF1F;</p>
</div></div></p>
<p><div class="alert alert-success hints-alert"><div class="hints-icon"><i class="fa fa-mortar-board"></i></div><div class="hints-container"><p>&#x4F30;&#x8BA1;&#x56FE;11.13&#x4E2D;&#x4EE3;&#x7801;&#x7684;&#x5EF6;&#x8FDF;&#x3002;</p>
</div></div></p>
<pre><code class="lang-c"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;huffman.h&quot;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string">&quot;assert.h&quot;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">create_codeword</span><span class="hljs-params">(
  <span class="hljs-comment">/* input */</span> CodewordLength symbol_bits[INPUT_SYMBOL_SIZE],
  <span class="hljs-comment">/* input */</span> ap_uint&lt;SYMBOL_BITS&gt; codeword_length_histogram[TREE_DEPTH],
  <span class="hljs-comment">/* output */</span> PackedCodewordAndLength encoding[INPUT_SYMBOL_SIZE]
)</span> </span>{
    Codeword first_codeword[MAX_CODEWORD_LENGTH];

    <span class="hljs-comment">// Computes the initial codeword value for a symbol with bit length i</span>
    first_codeword[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
 first_codewords:
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; MAX_CODEWORD_LENGTH; i++) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS PIPELINE II=1</span>
        first_codeword[i] = (first_codeword[i<span class="hljs-number">-1</span>] + codeword_length_histogram[i<span class="hljs-number">-1</span>]) &lt;&lt; <span class="hljs-number">1</span>;
        Codeword c = first_codeword[i];
        <span class="hljs-comment">//        std::cout &lt;&lt; c.to_string(2) &lt;&lt; &quot; with length &quot; &lt;&lt; i &lt;&lt; &quot;\n&quot;;</span>
    }

 assign_codewords:
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; INPUT_SYMBOL_SIZE; ++i) {
<span class="hljs-meta">#<span class="hljs-meta-keyword">pragma</span> HLS PIPELINE II=5</span>
      CodewordLength length = symbol_bits[i];
      <span class="hljs-comment">//if symbol has 0 bits, it doesn&apos;t need to be encoded</span>
  make_codeword:
      <span class="hljs-keyword">if</span>(length != <span class="hljs-number">0</span>) {
          <span class="hljs-comment">//          std::cout &lt;&lt; first_codeword[length].to_string(2) &lt;&lt; &quot;\n&quot;;</span>
          Codeword out_reversed = first_codeword[length];
          out_reversed.reverse();
          out_reversed = out_reversed &gt;&gt; (MAX_CODEWORD_LENGTH - length);
          <span class="hljs-comment">// std::cout &lt;&lt; out_reversed.to_string(2) &lt;&lt; &quot;\n&quot;;</span>
          encoding[i] = (out_reversed &lt;&lt; CODEWORD_LENGTH_BITS) + length;
          first_codeword[length]++;
      } <span class="hljs-keyword">else</span> {
          encoding[i] = <span class="hljs-number">0</span>;
      }
  }
}
</code></pre>
<figure id="fig3.12.11"><img src="images/placeholder.png" alt="&#x56FE;11.13:&#x4E3A;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x751F;&#x6210;canonical&#x970D;&#x592B;&#x66FC;&#x7801;&#x5B57;&#x7684;&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x3002;&#x53EF;&#x4EE5;&#x5728;&#x77E5;&#x9053;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x6BD4;&#x7279;&#x6570;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8BA1;&#x7B97;&#x7801;&#x5B57;&#xFF08;&#x5B58;&#x50A8;&#x5728;&#x8F93;&#x5165;&#x6570;&#x7EC4;symbol_bits[]&#x4E2D;&#xFF09;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x53E6;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x6570;&#x7EC4;codeword_length_histogram[]&#xFF0C;&#x5176;&#x5728;&#x6BCF;&#x4E2A;&#x6761;&#x76EE;&#x4E2D;&#x5B58;&#x50A8;&#x5177;&#x6709;&#x8BE5;&#x4F4D;&#x957F;&#x5EA6;&#x7684;&#x7801;&#x5B57;&#x7684;&#x7B26;&#x53F7;&#x6570;&#xFF0C;&#x8F93;&#x51FA;&#x662F;&#x5B58;&#x50A8;&#x5728;encoding[]&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x4EE3;&#x7801;&#x5B57;&#x3002;"><figcaption>&#x56FE;11.13:&#x4E3A;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x751F;&#x6210;canonical&#x970D;&#x592B;&#x66FC;&#x7801;&#x5B57;&#x7684;&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x3002;&#x53EF;&#x4EE5;&#x5728;&#x77E5;&#x9053;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x6BD4;&#x7279;&#x6570;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x8BA1;&#x7B97;&#x7801;&#x5B57;&#xFF08;&#x5B58;&#x50A8;&#x5728;&#x8F93;&#x5165;&#x6570;&#x7EC4;symbol_bits[]&#x4E2D;&#xFF09;&#x3002;&#x53E6;&#x5916;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#x53E6;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x6570;&#x7EC4;codeword_length_histogram[]&#xFF0C;&#x5176;&#x5728;&#x6BCF;&#x4E2A;&#x6761;&#x76EE;&#x4E2D;&#x5B58;&#x50A8;&#x5177;&#x6709;&#x8BE5;&#x4F4D;&#x957F;&#x5EA6;&#x7684;&#x7801;&#x5B57;&#x7684;&#x7B26;&#x53F7;&#x6570;&#xFF0C;&#x8F93;&#x51FA;&#x662F;&#x5B58;&#x50A8;&#x5728;encoding[]&#x6570;&#x7EC4;&#x4E2D;&#x7684;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x4EE3;&#x7801;&#x5B57;&#x3002;</figcaption></figure>
<p>&#x73B0;&#x5728;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x6211;&#x4EEC;&#x7684;&#x8FD0;&#x884C;&#x793A;&#x4F8B;&#xFF0C;&#x5E76;&#x8BF4;&#x660E;&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x5B83;&#x6765;&#x5BFC;&#x51FA;&#x6700;&#x521D;&#x7684;&#x7801;&#x5B57;&#x3002; &#x5728;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x4E2D;&#xFF0C;&#x7B26;&#x53F7;A&#xFF0C;D&#x548C;E&#x5BF9;&#x4E8E;&#x5B83;&#x4EEC;&#x7684;&#x7F16;&#x7801;&#x6709;&#x4E24;&#x6BD4;&#x7279;; &#x7B26;&#x53F7;C&#x6709;&#x4E09;&#x6BD4;&#x7279;; &#x800C;&#x7B26;&#x53F7;B&#x548C;F&#x6709;&#x56DB;&#x6BD4;&#x7279;&#x3002; &#x56E0;&#x6B64;&#xFF0C;&#x6211;&#x4EEC;&#x6709;&#xFF1A;</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mtext><mi mathvariant="normal">b</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">g</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi></mtext><mo>(</mo><mn>1</mn><mo>)</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow><mtext><mi mathvariant="normal">b</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">g</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi></mtext><mo>(</mo><mn>2</mn><mo>)</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mn>3</mn></mrow></mtd></mtr><mtr><mtd><mrow><mtext><mi mathvariant="normal">b</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">g</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi></mtext><mo>(</mo><mn>3</mn><mo>)</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mn>1</mn></mrow></mtd></mtr><mtr><mtd><mrow><mtext><mi mathvariant="normal">b</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">g</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">h</mi></mtext><mo>(</mo><mn>4</mn><mo>)</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mn>2</mn></mrow></mtd></mtr></mtable><mspace width="2em"></mspace><mo>(</mo><mn>1</mn><mn>1</mn><mi mathvariant="normal">.</mi><mn>4</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\text{bit\_length}(1) &amp;= 0 \\
\text{bit\_length}(2) &amp;= 3 \\
\text{bit\_length}(3) &amp;= 1 \\
\text{bit\_length}(4) &amp;= 2
\end{aligned}
\qquad(11.4)   
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.6500000000000004em;"></span><span class="strut bottom" style="height:4.800000000000001em;vertical-align:-2.1500000000000004em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-1.8100000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">bit_length</span></span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span><span style="top:-0.6100000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">bit_length</span></span><span class="mopen">(</span><span class="mord mathrm">2</span><span class="mclose">)</span></span></span><span style="top:0.5900000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">bit_length</span></span><span class="mopen">(</span><span class="mord mathrm">3</span><span class="mclose">)</span></span></span><span style="top:1.7900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">bit_length</span></span><span class="mopen">(</span><span class="mord mathrm">4</span><span class="mclose">)</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-1.8100000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span><span style="top:-0.6100000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathrm">3</span></span></span><span style="top:0.5900000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathrm">1</span></span></span><span style="top:1.7900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathrm">2</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span><span class="mopen"><span class="mspace qquad"></span><span class="mopen">(</span></span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">.</span><span class="mord mathrm">4</span><span class="mclose">)</span></span></span></span></span></p>
<p>&#x4F7F;&#x7528;&#x516C;&#x5F0F;11.3&#x6765;&#x8BA1;&#x7B97;&#x7B2C;&#x4E00;&#x4E2A;&#x7801;&#x5B57;&#x7684;&#x503C;&#xFF0C;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#xFF1A;
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mtext><mi mathvariant="normal">f</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">d</mi></mtext><mo>(</mo><mn>1</mn><mo>)</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mn>0</mn></mrow></mtd><mtd><mrow><mo>=</mo><mn>0</mn><mi>b</mi><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow><mtext><mi mathvariant="normal">f</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">d</mi></mtext><mo>(</mo><mn>2</mn><mo>)</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mo>(</mo><mn>0</mn><mo>+</mo><mn>0</mn><mo>)</mo><mo>&#x226A;</mo><mn>1</mn></mrow></mtd><mtd><mrow><mo>=</mo><mn>0</mn><mi>b</mi><mn>0</mn><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow><mtext><mi mathvariant="normal">f</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">d</mi></mtext><mo>(</mo><mn>3</mn><mo>)</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mo>(</mo><mn>0</mn><mo>+</mo><mn>3</mn><mo>)</mo><mo>&#x226A;</mo><mn>1</mn></mrow></mtd><mtd><mrow><mo>=</mo><mn>0</mn><mi>b</mi><mn>1</mn><mn>1</mn><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow><mtext><mi mathvariant="normal">f</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">_</mi><mi mathvariant="normal">c</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">w</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">d</mi></mtext><mo>(</mo><mn>4</mn><mo>)</mo></mrow></mtd><mtd><mrow><mrow></mrow><mo>=</mo><mo>(</mo><mn>6</mn><mo>+</mo><mn>1</mn><mo>)</mo><mo>&#x226A;</mo><mn>1</mn></mrow></mtd><mtd><mrow><mo>=</mo><mn>0</mn><mi>b</mi><mn>1</mn><mn>1</mn><mn>1</mn><mn>0</mn></mrow></mtd></mtr></mtable><mspace width="2em"></mspace><mo>(</mo><mn>1</mn><mn>1</mn><mi mathvariant="normal">.</mi><mn>5</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\text{first\_codeword}(1) &amp;= 0 &amp;= 0b0   \\  
\text{first\_codeword}(2) &amp;= (0 + 0) \ll 1 &amp;= 0b00 \\  
\text{first\_codeword}(3) &amp;= (0 + 3) \ll 1 &amp;= 0b110 \\  
\text{first\_codeword}(4) &amp;= (6 + 1) \ll 1 &amp;= 0b1110
\end{aligned}
\qquad(11.5)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:2.6500000000000004em;"></span><span class="strut bottom" style="height:4.800000000000001em;vertical-align:-2.1500000000000004em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-1.8100000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">first_codeword</span></span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mclose">)</span></span></span><span style="top:-0.6100000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">first_codeword</span></span><span class="mopen">(</span><span class="mord mathrm">2</span><span class="mclose">)</span></span></span><span style="top:0.5900000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">first_codeword</span></span><span class="mopen">(</span><span class="mord mathrm">3</span><span class="mclose">)</span></span></span><span style="top:1.7900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">first_codeword</span></span><span class="mopen">(</span><span class="mord mathrm">4</span><span class="mclose">)</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-1.8100000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mord mathrm">0</span></span></span><span style="top:-0.6100000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mopen">(</span><span class="mord mathrm">0</span><span class="mbin">+</span><span class="mord mathrm">0</span><span class="mclose">)</span><span class="mrel">&#x226A;</span><span class="mord mathrm">1</span></span></span><span style="top:0.5900000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mopen">(</span><span class="mord mathrm">0</span><span class="mbin">+</span><span class="mord mathrm">3</span><span class="mclose">)</span><span class="mrel">&#x226A;</span><span class="mord mathrm">1</span></span></span><span style="top:1.7900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">=</span><span class="mopen">(</span><span class="mord mathrm">6</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mrel">&#x226A;</span><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span><span class="arraycolsep" style="width:2em;"></span><span class="col-align-r"><span class="vlist"><span style="top:-1.8100000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mrel">=</span><span class="mord mathrm">0</span><span class="mord mathit">b</span><span class="mord mathrm">0</span></span></span><span style="top:-0.6100000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mrel">=</span><span class="mord mathrm">0</span><span class="mord mathit">b</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span></span></span><span style="top:0.5900000000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mrel">=</span><span class="mord mathrm">0</span><span class="mord mathit">b</span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">0</span></span></span><span style="top:1.7900000000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mrel">=</span><span class="mord mathrm">0</span><span class="mord mathit">b</span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">0</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span><span class="mopen"><span class="mspace qquad"></span><span class="mopen">(</span></span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">.</span><span class="mord mathrm">5</span><span class="mclose">)</span></span></span></span></span>
&#x4E00;&#x65E6;&#x6211;&#x4EEC;&#x786E;&#x5B9A;&#x4E86;&#x8FD9;&#x4E9B;&#x503C;&#xFF0C;&#x7136;&#x540E;&#x4ECE;&#x5C0F;&#x5230;&#x5927;&#x4F9D;&#x6B21;&#x8003;&#x8651;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x3002; &#x5BF9;&#x4E8E;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#xFF0C;&#x786E;&#x5B9A;&#x5176;&#x7801;&#x5B57;&#x7684;&#x957F;&#x5EA6;&#x5E76;&#x5206;&#x914D;&#x4E0B;&#x4E00;&#x4E2A;&#x7801;&#x5B57;&#x9002;&#x5F53;&#x7684;&#x957F;&#x5EA6;&#x3002; &#x5728;&#x8FD0;&#x884C;&#x793A;&#x4F8B;&#x4E2D;&#xFF0C;&#x8003;&#x8651;&#x7B26;&#x53F7;&#x6309;&#x5B57;&#x6BCD;&#x987A;&#x5E8F;A&#xFF0C;B&#xFF0C;C&#xFF0C;D&#xFF0C;E&#x548C;F&#x6392;&#x5217;&#xFF0C; &#x7B26;&#x53F7;A&#x6709;&#x4E24;&#x6BD4;&#x7279;&#x7528;&#x4E8E;&#x7F16;&#x7801;&#xFF0C; &#x6267;&#x884C;&#x67E5;&#x627E;first_codeword[2]=0&#x3002;
&#x56E0;&#x6B64;&#xFF0C;&#x5206;&#x914D;&#x7ED9;A&#x7684;&#x7801;&#x5B57;&#x662F;0b00&#xFF0C;&#x6211;&#x4EEC;&#x589E;&#x52A0;first_codeword[2]&#x7684;&#x503C;&#x5230;1&#x3002;&#x7B26;&#x53F7;B&#x6709;&#x56DB;&#x4E2A;&#x6BD4;&#x7279;&#x3002; &#x7531;&#x4E8E;first_codeword[4]=14=0b1110&#xFF0C;&#x6240;&#x4EE5;&#x7801;&#x5B57;&#x662F;0b1110&#x3002; &#x7B26;&#x53F7;C&#x6709;&#x4E09;&#x4E2A;&#x6BD4;&#x7279;&#x3002; first_codeword[3]=6=0b110&#xFF0C;&#x7801;&#x5B57;&#x662F;110&#x3002;&#x7B26;&#x53F7;D&#x5177;&#x6709;&#x4E24;&#x6BD4;&#x7279;&#xFF0C;&#x56E0;&#x6B64;first_codeword[2]=1=0b01&#xFF1B;&#x8BF7;&#x8BB0;&#x4F4F;&#xFF0C;&#x6211;&#x4EEC;&#x5728;&#x5C06;&#x7801;&#x5B57;&#x5206;&#x914D;&#x7ED9;&#x7B26;&#x53F7;A&#x540E;&#x8FD9;&#x4E2A;&#x503C;&#x5C06;&#x9012;&#x589E;&#x3002;&#x7B26;&#x53F7;E&#x6709;&#x4E24;&#x4F4D;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x7684;&#x7801;&#x5B57;&#x662F;0b01+1=0b10&#x3002;F&#x6709;4&#x6BD4;&#x7279;&#xFF0C;&#x6240;&#x4EE5;&#x5B83;&#x7684;&#x7801;&#x5B57;&#x662F;0b1110+1=0b1111&#x3002;
&#x6240;&#x6709;&#x7B26;&#x53F7;&#x7684;&#x6700;&#x7EC8;&#x7801;&#x5B57;&#x662F;&#xFF1A;
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtable><mtr><mtd><mrow><mtext><mi mathvariant="normal">A</mi></mtext></mrow></mtd><mtd><mrow><mrow></mrow><mo>&#x2192;</mo><mspace width="1em"></mspace><mn>0</mn><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow><mtext><mi mathvariant="normal">B</mi></mtext></mrow></mtd><mtd><mrow><mrow></mrow><mo>&#x2192;</mo><mspace width="1em"></mspace><mn>1</mn><mn>1</mn><mn>1</mn><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow><mtext><mi mathvariant="normal">C</mi></mtext></mrow></mtd><mtd><mrow><mrow></mrow><mo>&#x2192;</mo><mspace width="1em"></mspace><mn>1</mn><mn>1</mn><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow><mtext><mi mathvariant="normal">D</mi></mtext></mrow></mtd><mtd><mrow><mrow></mrow><mo>&#x2192;</mo><mspace width="1em"></mspace><mn>0</mn><mn>1</mn></mrow></mtd></mtr><mtr><mtd><mrow><mtext><mi mathvariant="normal">E</mi></mtext></mrow></mtd><mtd><mrow><mrow></mrow><mo>&#x2192;</mo><mspace width="1em"></mspace><mn>1</mn><mn>0</mn></mrow></mtd></mtr><mtr><mtd><mrow><mtext><mi mathvariant="normal">F</mi></mtext></mrow></mtd><mtd><mrow><mrow></mrow><mo>&#x2192;</mo><mspace width="1em"></mspace><mn>1</mn><mn>1</mn><mn>1</mn><mn>1</mn></mrow></mtd></mtr></mtable><mspace width="2em"></mspace><mo>(</mo><mn>1</mn><mn>1</mn><mi mathvariant="normal">.</mi><mn>6</mn><mo>)</mo></mrow><annotation encoding="application/x-tex">
\begin{aligned}
\text{A} &amp;\rightarrow \quad00  \\
\text{B}  &amp;\rightarrow \quad1110 \\
\text{C}  &amp;\rightarrow \quad110    \\
\text{D}  &amp;\rightarrow \quad01 \\
\text{E}  &amp;\rightarrow \quad10  \\  
\text{F}  &amp;\rightarrow \quad1111  
\end{aligned}
\qquad(11.6)  
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:3.8500000000000005em;"></span><span class="strut bottom" style="height:7.200000000000001em;vertical-align:-3.35em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist"><span style="top:-3.0100000000000007em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">A</span></span></span></span><span style="top:-1.8100000000000007em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">B</span></span></span></span><span style="top:-0.6100000000000005em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">C</span></span></span></span><span style="top:0.5899999999999996em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">D</span></span></span></span><span style="top:1.7899999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">E</span></span></span></span><span style="top:2.99em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord text displaystyle textstyle uncramped"><span class="mord mathrm">F</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span><span class="col-align-l"><span class="vlist"><span style="top:-3.0100000000000007em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">&#x2192;</span><span class="mord mathrm"><span class="mspace quad"></span><span class="mord mathrm">0</span></span><span class="mord mathrm">0</span></span></span><span style="top:-1.8100000000000007em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">&#x2192;</span><span class="mord mathrm"><span class="mspace quad"></span><span class="mord mathrm">1</span></span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">0</span></span></span><span style="top:-0.6100000000000005em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">&#x2192;</span><span class="mord mathrm"><span class="mspace quad"></span><span class="mord mathrm">1</span></span><span class="mord mathrm">1</span><span class="mord mathrm">0</span></span></span><span style="top:0.5899999999999996em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">&#x2192;</span><span class="mord mathrm"><span class="mspace quad"></span><span class="mord mathrm">0</span></span><span class="mord mathrm">1</span></span></span><span style="top:1.7899999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">&#x2192;</span><span class="mord mathrm"><span class="mspace quad"></span><span class="mord mathrm">1</span></span><span class="mord mathrm">0</span></span></span><span style="top:2.99em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord displaystyle textstyle uncramped"></span><span class="mrel">&#x2192;</span><span class="mord mathrm"><span class="mspace quad"></span><span class="mord mathrm">1</span></span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">1</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">&#x200B;</span></span>&#x200B;</span></span></span></span></span><span class="mopen"><span class="mspace qquad"></span><span class="mopen">(</span></span><span class="mord mathrm">1</span><span class="mord mathrm">1</span><span class="mord mathrm">.</span><span class="mord mathrm">6</span><span class="mclose">)</span></span></span></span></span></p>
<h3 id="1128-&#x6D4B;&#x8BD5;&#x5E73;&#x53F0;"><a name="1128-&#x6D4B;&#x8BD5;&#x5E73;&#x53F0;" class="anchor-navigation-ex-anchor" href="#1128-&#x6D4B;&#x8BD5;&#x5E73;&#x53F0;"><i class="fa fa-link" aria-hidden="true"></i></a>11.2.8 &#x6D4B;&#x8BD5;&#x5E73;&#x53F0;</h3>
<p>&#x4EE3;&#x7801;&#x7684;&#x6700;&#x540E;&#x90E8;&#x5206;&#x662F;&#x6D4B;&#x8BD5;&#x5E73;&#x53F0;&#xFF0C;&#x5982;&#x56FE;11.14&#x6240;&#x793A;&#x3002; &#x603B;&#x4F53;&#x7ED3;&#x6784;&#x662F;&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x8F93;&#x5165;&#x7684;&#x9891;&#x7387;&#x503C;&#xFF0C;&#x4F7F;&#x7528;huffman_encoding&#x51FD;&#x6570;&#x5904;&#x7406;&#x5B83;&#x4EEC;&#xFF0C;&#x5E76;&#x5C06;&#x7ED3;&#x679C;&#x7801;&#x5B57;&#x4E0E;&#x5B58;&#x50A8;&#x5728;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x73B0;&#x6709;&#x9EC4;&#x91D1;&#x53C2;&#x8003;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;
main()&#x51FD;&#x6570;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4ECE;&#x6587;&#x4EF6;&#x4E2D;&#x8BFB;&#x53D6;&#x9891;&#x7387;&#x6240;&#x9700;&#x7684;&#x53D8;&#x91CF;&#xFF08;&#x5728;&#x8FD9;&#x91CC;&#xFF0C;&#x6587;&#x4EF6;&#x662F;huffman.random256.txt&#xFF09;&#x5E76;&#x5C06;&#x5B83;&#x4EEC;&#x653E;&#x5165;in[]&#x4E2D;&#xFF0C;&#x8FD9;&#x662F;&#x5728;file_to_array&#x51FD;&#x6570;&#x4E2D;&#x5B8C;&#x6210;&#x7684;&#xFF0C;&#x8BE5;&#x51FD;&#x6570;&#x5C06;&#x8F93;&#x5165;&#x6570;&#x636E;&#x7684;&#x6587;&#x4EF6;&#x540D;&#x548C;&#x6570;&#x636E;&#x957F;&#x5EA6;&#xFF08;&#x6570;&#x7EC4;&#x957F;&#x5EA6;&#xFF09;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#xFF0C;&#x5E76;&#x5C06;&#x8BE5;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x8F93;&#x5165;&#x5B58;&#x50A8;&#x5230;array[]&#x53D8;&#x91CF;&#x4E2D;&#x3002; &#x8FD9;&#x4E2A;&#x6587;&#x4EF6;&#x5305;&#x542B;&#x4E86;&#x6BCF;&#x4E2A;&#x7B26;&#x53F7;&#x7684;&#x9891;&#x7387;&#xFF0C; &#x9891;&#x7387;&#x503C;&#x6309;&#x7167;&#x7B26;&#x53F7;&#x987A;&#x5E8F;&#x5B58;&#x50A8;&#xFF0C;&#x56E0;&#x6B64;&#x6587;&#x4EF6;&#x7B2C;&#x4E00;&#x4E2A;&#x503C;&#x8868;&#x793A;&#x7B26;&#x53F7;&apos;0&apos;&#x7684;&#x9891;&#x7387;&#xFF0C;&#x4F9D;&#x6B64;&#x7C7B;&#x63A8;&#x3002;</p>
<p>main()&#x51FD;&#x6570;&#x901A;&#x8FC7;&#x4F7F;&#x7528;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x9891;&#x7387;&#x5728;in[]&#x4E2D;&#x8FDB;&#x884C;&#x521D;&#x59CB;&#x5316;&#xFF0C;&#x7136;&#x540E;&#x5B83;&#x4F1A;&#x8C03;&#x7528;&#x9876;&#x5C42;&#x7684;&#x970D;&#x592B;&#x66FC;&#x51FD;&#x6570;&#x3002;&#x8BE5;&#x51FD;&#x6570;&#x8FD4;&#x56DE;encoding[]&#x4E2D;&#x7684;&#x7F16;&#x7801;&#x7B26;&#x53F7;&#x503C;&#x3002;&#x7531;&#x4E8E;&#x5904;&#x7406;&#x7ED3;&#x679C;&#x5E94;&#x8BE5;&#x662F;&#x4E00;&#x4E2A;&#x524D;&#x7F00;&#x7801;&#xFF0C;&#x56E0;&#x6B64;&#x6211;&#x4EEC;&#x68C0;&#x67E5;&#x524D;&#x7F00;&#x7801;&#x7684;&#x5C5E;&#x6027;&#x662F;&#x5426;&#x786E;&#x5B9E;&#x5F97;&#x5230;&#x6EE1;&#x8DB3;&#xFF0C;&#x7136;&#x540E;&#x5C06;&#x7ED3;&#x679C;&#x4E0E;&#x5B58;&#x50A8;&#x5728;&#x6587;&#x4EF6;huffman.random256.gold&#x4E2D;&#x7684;&#x9EC4;&#x91D1;&#x53C2;&#x8003;&#x4E2D;&#x7684;&#x4EE3;&#x7801;&#x5B57;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x3002;&#x7136;&#x540E;&#x5C06;&#x7ED3;&#x679C;&#x5199;&#x5165;&#x540D;&#x4E3A;random256.out&#x7684;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;diff&#x5DE5;&#x5177;&#x6267;&#x884C;&#x6587;&#x4EF6;&#x6BD4;&#x8F83;&#x64CD;&#x4F5C;&#x3002;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x76F8;&#x540C;&#xFF0C;diff&#x5DE5;&#x5177;&#x8FD4;&#x56DE;&apos;0&apos;&#xFF0C;&#x5982;&#x679C;&#x6587;&#x4EF6;&#x4E0D;&#x540C;&#x5219;&#x8FD4;&#x56DE;&#x975E;&#x96F6;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x6761;&#x4EF6;&#x4E0D;&#x540C;&#x65F6;&#xFF0C;&#x5219;&#x6267;&#x884C;if&#x6761;&#x4EF6;&#xFF0C;&#x800C;&#x5F53;&#x6587;&#x4EF6;&#x76F8;&#x540C;&#x65F6;&#xFF0C;&#x6267;&#x884C;else&#x6761;&#x4EF6;&#x3002;&#x5728;&#x8FD9;&#x4E24;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC;&#x90FD;&#x4F1A;&#x6253;&#x5370;&#x4E00;&#x6761;&#x6D88;&#x606F;&#x5E76;&#x5C06;return_val&#x8BBE;&#x7F6E;&#x4E3A;&#x9002;&#x5F53;&#x7684;&#x503C;&#x3002;Vivado RHLS&#x5DE5;&#x5177;&#x5728;&#x534F;&#x540C;&#x4EFF;&#x771F;&#x8FC7;&#x7A0B;&#x4E2D;&#x4F7F;&#x7528;&#x8BE5;&#x8FD4;&#x56DE;&#x503C;&#x6765;&#x68C0;&#x67E5;&#x7ED3;&#x679C;&#x7684;&#x6B63;&#x786E;&#x6027;&#x3002;&#x5982;&#x679C;&#x68C0;&#x67E5;&#x901A;&#x8FC7;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x503C;&#x4E3A;0;&#x5982;&#x679C;&#x4E0D;&#x901A;&#x8FC7;&#xFF0C;&#x5219;&#x8FD4;&#x56DE;&#x503C;&#x4E0D;&#x4E3A;&#x96F6;&#x3002;</p>
<pre><code class="lang-c">#include &quot;huffman.h&quot;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

void file_to_array(const char *filename, ap_uint&lt;16&gt; *&amp;array, int array_length) {
    printf(&quot;Start reading file [%s]\n&quot;, filename);
    FILE * file = fopen(filename, &quot;r&quot;);
    if(file == NULL) {
        printf(&quot;Cannot find the input file\n&quot;);
        exit(1);
    }

    int     file_value = 0;
    int     count = 0;
    array = (ap_uint&lt;16&gt; * ) malloc(array_length*sizeof(ap_uint&lt;16&gt;));

    while(1) {
        int eof_check = fscanf(file, &quot;%x&quot;, &amp;file_value);
        if(eof_check == EOF) break;
        else {
            array[count++] = (ap_uint&lt;16&gt;) file_value ;
        }
    }
    fclose(file);

    if(count != array_length) exit(1);
}

int main() {
    printf(&quot;Starting canonical Huffman encoding testbench\n&quot;);
    FILE * output_file;
    int return_val = 0;
    ap_uint&lt;16&gt; * frequencies = NULL;
    file_to_array(&quot;huffman.random256.txt&quot;, frequencies, INPUT_SYMBOL_SIZE);

    Symbol in[INPUT_SYMBOL_SIZE];
    for (int i = 0 ; i &lt;  INPUT_SYMBOL_SIZE; i++) {
        in[i].frequency = frequencies[i];
        in[i].value = i;
    }

    int num_nonzero_symbols;
    PackedCodewordAndLength encoding[INPUT_SYMBOL_SIZE];
    huffman_encoding(in, encoding, &amp;num_nonzero_symbols);

    output_file = fopen(&quot;huffman.random256.out&quot;, &quot;w&quot;);
    for(int i = 0; i &lt; INPUT_SYMBOL_SIZE; i++)
        fprintf(output_file, &quot;%d, %x\n&quot;, i, (unsigned int) encoding[i]);
    fclose(output_file);

    printf (&quot;\n***************Comparing against output data*************** \n\n&quot;);
    if (system(&quot;diff huffman.random256.out huffman.random256.golden&quot;)) {
        fprintf(stdout, &quot;*******************************************\n&quot;);
        fprintf(stdout, &quot;FAIL: Output DOES NOT match the golden output\n&quot;);
        fprintf(stdout, &quot;*******************************************\n&quot;);
        return_val = 1;
    } else {
        fprintf(stdout, &quot;*******************************************\n&quot;);
        fprintf(stdout, &quot; PASS: The output matches the golden output\n&quot;);
        fprintf(stdout, &quot;*******************************************\n&quot;);
        return_val = 0;
    }

    printf(&quot;Ending canonical Huffman encoding testbench\n&quot;);
    return return_val;
}
</code></pre>
<figure id="fig3.12.12"><img src="images/placeholder.png" alt="&#x56FE;11.14&#xFF1A;&#x5B8C;&#x6574;&#x7684;canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x6D4B;&#x8BD5;&#x5E73;&#x53F0;&#x4EE3;&#x7801;&#x3002;&#x8BE5;&#x4EE3;&#x7801;&#x4F7F;&#x7528;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x521D;&#x59CB;&#x5316;in&#x6570;&#x7EC4;&#xFF0C;&#x5E76;&#x5C06;&#x5B83;&#x4F20;&#x9012;&#x7ED9;&#x9876;&#x5C42;&#x7684;huffman_encoding&#x51FD;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x5B83;&#x5C06;&#x7ED3;&#x679C;&#x7801;&#x5B57;&#x5B58;&#x50A8;&#x5230;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x4E0E;&#x53E6;&#x4E00;&#x4E2A;&#x9EC4;&#x91D1;&#x53C2;&#x8003;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x6700;&#x540E;&#x6253;&#x5370;&#x51FA;&#x6BD4;&#x8F83;&#x7ED3;&#x679C;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x9002;&#x5F53;&#x7684;&#x503C;"><figcaption>&#x56FE;11.14&#xFF1A;&#x5B8C;&#x6574;&#x7684;canonical&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x6D4B;&#x8BD5;&#x5E73;&#x53F0;&#x4EE3;&#x7801;&#x3002;&#x8BE5;&#x4EE3;&#x7801;&#x4F7F;&#x7528;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x521D;&#x59CB;&#x5316;in&#x6570;&#x7EC4;&#xFF0C;&#x5E76;&#x5C06;&#x5B83;&#x4F20;&#x9012;&#x7ED9;&#x9876;&#x5C42;&#x7684;huffman_encoding&#x51FD;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x5B83;&#x5C06;&#x7ED3;&#x679C;&#x7801;&#x5B57;&#x5B58;&#x50A8;&#x5230;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x4E2D;&#xFF0C;&#x5E76;&#x5C06;&#x5176;&#x4E0E;&#x53E6;&#x4E00;&#x4E2A;&#x9EC4;&#x91D1;&#x53C2;&#x8003;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#xFF0C;&#x6700;&#x540E;&#x6253;&#x5370;&#x51FA;&#x6BD4;&#x8F83;&#x7ED3;&#x679C;&#xFF0C;&#x5E76;&#x8FD4;&#x56DE;&#x9002;&#x5F53;&#x7684;&#x503C;</figcaption></figure>
<h2 id="113-&#x7ED3;&#x8BBA;"><a name="113-&#x7ED3;&#x8BBA;" class="anchor-navigation-ex-anchor" href="#113-&#x7ED3;&#x8BBA;"><i class="fa fa-link" aria-hidden="true"></i></a>11.3 &#x7ED3;&#x8BBA;</h2>
<p>&#x970D;&#x592B;&#x66FC;&#x7F16;&#x7801;&#x662F;&#x8BB8;&#x591A;&#x5E94;&#x7528;&#x4E2D;&#x5E38;&#x7528;&#x7684;&#x6570;&#x636E;&#x538B;&#x7F29;&#x7C7B;&#x578B;&#x3002; &#x867D;&#x7136;&#x4F7F;&#x7528;&#x970D;&#x592B;&#x66FC;&#x7801;&#x8FDB;&#x884C;&#x7F16;&#x7801;&#x548C;&#x89E3;&#x7801;&#x662F;&#x76F8;&#x5BF9;&#x7B80;&#x5355;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x4F46;&#x751F;&#x6210;&#x970D;&#x592B;&#x66FC;&#x7801;&#x672C;&#x8EAB;&#x53EF;&#x80FD;&#x662F;&#x8BA1;&#x7B97;&#x4E0A;&#x5177;&#x6709;&#x6311;&#x6218;&#x6027;&#x7684;&#x95EE;&#x9898;&#x3002; &#x5728;&#x8BB8;&#x591A;&#x7CFB;&#x7EDF;&#x4E2D;&#xFF0C;&#x62E5;&#x6709;&#x76F8;&#x5BF9;&#x8F83;&#x5C0F;&#x7684;&#x6570;&#x636E;&#x5757;&#x662F;&#x6709;&#x5229;&#x7684;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5FC5;&#x987B;&#x7ECF;&#x5E38;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x970D;&#x592B;&#x66FC;&#x7801;&#x5E76;&#x52A0;&#x901F;&#x5B83;&#x662F;&#x503C;&#x5F97;&#x3002;&#x4E0E;&#x6211;&#x4EEC;&#x5728;&#x672C;&#x4E66;&#x4E2D;&#x7814;&#x7A76;&#x8FC7;&#x7684;&#x5176;&#x4ED6;&#x7B97;&#x6CD5;&#x76F8;&#x6BD4;&#xFF0C;&#x521B;&#x5EFA;&#x970D;&#x592B;&#x66FC;&#x7801;&#x5305;&#x542B;&#x8BB8;&#x591A;&#x5177;&#x6709;&#x5B8C;&#x5168;&#x4E0D;&#x540C;&#x4EE3;&#x7801;&#x7ED3;&#x6784;&#x7684;&#x6B65;&#x9AA4;&#x3002; &#x6709;&#x4E9B;&#x76F8;&#x5BF9;&#x5BB9;&#x6613;&#x5B9E;&#x73B0;&#x5E76;&#x884C;&#x5316;&#xFF0C;&#x800C;&#x53E6;&#x4E00;&#x4E9B;&#x5B9E;&#x73B0;&#x8D77;&#x6765;&#x5219;&#x66F4;&#x5177;&#x6709;&#x6311;&#x6218;&#x6027;&#x3002; &#x7B97;&#x6CD5;&#x7684;&#x67D0;&#x4E9B;&#x90E8;&#x5206;&#x81EA;&#x7136;&#x5177;&#x6709;&#x8F83;&#x9AD8;&#x7684;O&#xFF08;n&#xFF09;&#x590D;&#x6742;&#x5EA6;&#xFF0C;&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5B83;&#x4EEC;&#x5FC5;&#x987B;&#x66F4;&#x52A0;&#x5E76;&#x884C;&#x5316;&#x4EE5;&#x5B9E;&#x73B0;&#x5E73;&#x8861;&#x7684;&#x6D41;&#x6C34;&#x7EBF;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x4F7F;&#x7528;Vivado HLS&#x4E2D;&#x7684;&#x6570;&#x636E;&#x6D41;&#x6307;&#x4EE4;&#xFF0C;&#x8FD9;&#x4E9B;&#x4E0D;&#x540C;&#x7684;&#x4EE3;&#x7801;&#x7ED3;&#x6784;&#x53EF;&#x4EE5;&#x76F8;&#x5BF9;&#x5BB9;&#x6613;&#x5730;&#x94FE;&#x63A5;&#x5728;&#x4E00;&#x8D77;&#x3002;</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="10-Sorting-Algorithms.html" class="navigation navigation-prev " aria-label="Previous page: 第十章 排序算法">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="SKIPGLOSSARY.html" class="navigation navigation-next " aria-label="Next page: 词汇表汇总">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"第十一章 霍夫曼排序","level":"3.12","depth":1,"next":{"title":"词汇表汇总","level":"4.1","depth":1,"path":"SKIPGLOSSARY.md","ref":"SKIPGLOSSARY.md","articles":[]},"previous":{"title":"第十章 排序算法","level":"3.11","depth":1,"path":"10-Sorting-Algorithms.md","ref":"10-Sorting-Algorithms.md","articles":[]},"dir":"ltr"},"config":{"plugins":["yahei","code","katex","splitter","github-buttons","disqus","-lunr","-search","search-plus","-sharing","sharing-plus","expandable-chapters-small","image-captions","anchor-navigation-ex-toc","hints","custom-favicon"],"root":".","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"disqus":{"useIdentifier":false,"shortName":"pp4fpga-cn"},"yahei":{},"splitter":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"hints":{"danger":"fa fa-exclamation-triangle","info":"fa fa-info-circle","tip":"fa fa-mortar-board","working":"fa fa-wrench"},"code":{"copyButtons":true},"anchor-navigation-ex-toc":{"associatedWithSummary":false,"float":{"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right","showLevelIcon":false},"mode":"float","multipleH1":false,"pageTop":{"level1Icon":"fa fa-hand-o-right","level2Icon":"fa fa-hand-o-right","level3Icon":"fa fa-hand-o-right","showLevelIcon":false},"printLog":false,"showLevel":false},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"fontSettings":{"theme":"white","family":"msyh","size":2},"highlight":{},"favicon":"favicon.ico","github-buttons":{"buttons":[{"user":"xupsh","repo":"pp4fpgas-cn","type":"star","size":"small","count":true}]},"custom-favicon":{},"expandable-chapters-small":{},"sharing":{"qq":true,"all":["facebook","google","twitter","weibo","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":false,"weibo":true,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":false,"messenger":false,"line":false,"vk":false,"pocket":false,"google":true,"viber":false,"stumbleupon":false,"qzone":true,"linkedin":true},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{},"image-captions":{"caption":"_CAPTION_","variable_name":"_pictures"}},"theme":"default","author":"xupsh","pdf":{"pageBreaksBefore":"/","headerTemplate":null,"paperSize":"a4","margin":{"right":62,"left":62,"top":36,"bottom":36},"fontSize":14,"fontFamily":"Arial","footerTemplate":null,"chapterMark":"pagebreak","pageNumbers":true},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"_pictures":[{"backlink":"PREFACE.html#fig1.1.1","level":"1.1","list_caption":"Figure: 胡成龙，复旦大学计算机科学技术学院在读研究生，Xilinx实习生","alt":"胡成龙，复旦大学计算机科学技术学院在读研究生，Xilinx实习生","nro":1,"url":"images/hcl.png","index":1,"caption_template":"_CAPTION_","label":"胡成龙，复旦大学计算机科学技术学院在读研究生，Xilinx实习生","attributes":{},"skip":false,"key":"1.1.1"},{"backlink":"PREFACE.html#fig1.1.2","level":"1.1","list_caption":"Figure: 李彦晔，伊利诺伊大学香槟分校本科在读，Xilinx实习生","alt":"李彦晔，伊利诺伊大学香槟分校本科在读，Xilinx实习生","nro":2,"url":"images/lyy.png","index":2,"caption_template":"_CAPTION_","label":"李彦晔，伊利诺伊大学香槟分校本科在读，Xilinx实习生","attributes":{},"skip":false,"key":"1.1.2"},{"backlink":"PREFACE.html#fig1.1.3","level":"1.1","list_caption":"Figure: 曹越，现就职于中国科学院电子学研究所，研究方向为实时信号处理。工作至今已完成多个合成孔径雷达实时信号处理项目，在雷达成像、动目标检测和识别领域有丰富的工程经验。","alt":"曹越，现就职于中国科学院电子学研究所，研究方向为实时信号处理。工作至今已完成多个合成孔径雷达实时信号处理项目，在雷达成像、动目标检测和识别领域有丰富的工程经验。","nro":3,"url":"images/cy.png","index":3,"caption_template":"_CAPTION_","label":"曹越，现就职于中国科学院电子学研究所，研究方向为实时信号处理。工作至今已完成多个合成孔径雷达实时信号处理项目，在雷达成像、动目标检测和识别领域有丰富的工程经验。","attributes":{},"skip":false,"key":"1.1.3"},{"backlink":"PREFACE.html#fig1.1.4","level":"1.1","list_caption":"Figure: 陈雯，东南大学电气学院在读研究生，Xilinx实习生","alt":"陈雯，东南大学电气学院在读研究生，Xilinx实习生","nro":4,"url":"images/cw.png","index":4,"caption_template":"_CAPTION_","label":"陈雯，东南大学电气学院在读研究生，Xilinx实习生","attributes":{},"skip":false,"key":"1.1.4"},{"backlink":"PREFACE.html#fig1.1.5","level":"1.1","list_caption":"Figure: 吴彦北，武汉邮电科学研究院硕士毕业，目前主要工作方式向是医疗图像处理FPGA平台相关的开发。","alt":"吴彦北，武汉邮电科学研究院硕士毕业，目前主要工作方式向是医疗图像处理FPGA平台相关的开发。","nro":5,"url":"images/wyb.png","index":5,"caption_template":"_CAPTION_","label":"吴彦北，武汉邮电科学研究院硕士毕业，目前主要工作方式向是医疗图像处理FPGA平台相关的开发。","attributes":{},"skip":false,"key":"1.1.5"},{"backlink":"PREFACE.html#fig1.1.6","level":"1.1","list_caption":"Figure: 胡博，本硕毕业于哈尔滨工程大学。上学期间多次参加国家挑战杯（国家三等奖）、\"博创杯\"全国嵌入式设计大赛（国家一等奖）、Robosub全球水下机器人大赛（全球第五）、微软imageinecup等比赛。目前主要从事视频编解码、图像预处理、目标识别与跟踪等相关工作。近几年技术方向积累多围绕SOC相关开发来构建自己的知识体系，主要是逻辑设计（Verilog和HLS）、驱动开发（Linux及裸核）、Linux系统上应用程序设计等。目前正在研究深度学习在前端智能中的应用。","alt":"胡博，本硕毕业于哈尔滨工程大学。上学期间多次参加国家挑战杯（国家三等奖）、\"博创杯\"全国嵌入式设计大赛（国家一等奖）、Robosub全球水下机器人大赛（全球第五）、微软imageinecup等比赛。目前主要从事视频编解码、图像预处理、目标识别与跟踪等相关工作。近几年技术方向积累多围绕SOC相关开发来构建自己的知识体系，主要是逻辑设计（Verilog和HLS）、驱动开发（Linux及裸核）、Linux系统上应用程序设计等。目前正在研究深度学习在前端智能中的应用。","nro":6,"url":"images/hb.png","index":6,"caption_template":"_CAPTION_","label":"胡博，本硕毕业于哈尔滨工程大学。上学期间多次参加国家挑战杯（国家三等奖）、\"博创杯\"全国嵌入式设计大赛（国家一等奖）、Robosub全球水下机器人大赛（全球第五）、微软imageinecup等比赛。目前主要从事视频编解码、图像预处理、目标识别与跟踪等相关工作。近几年技术方向积累多围绕SOC相关开发来构建自己的知识体系，主要是逻辑设计（Verilog和HLS）、驱动开发（Linux及裸核）、Linux系统上应用程序设计等。目前正在研究深度学习在前端智能中的应用。","attributes":{},"skip":false,"key":"1.1.6"},{"backlink":"PREFACE.html#fig1.1.7","level":"1.1","list_caption":"Figure: 王芝斌，江南大学计算机科学与技术硕士毕业，原OpenHEC FPGA 云初创公司联合创始人、技术合伙人，现任科大讯飞研究院高级软件工程师，从事异构计算、云计算方面的工作。基于HLS 的光流算法加速工作发表在FPGA、FPT、FSP 和ACM TACO 等国际会议或期刊上。","alt":"王芝斌，江南大学计算机科学与技术硕士毕业，原OpenHEC FPGA 云初创公司联合创始人、技术合伙人，现任科大讯飞研究院高级软件工程师，从事异构计算、云计算方面的工作。基于HLS 的光流算法加速工作发表在FPGA、FPT、FSP 和ACM TACO 等国际会议或期刊上。","nro":7,"url":"images/wzb.jpg","index":7,"caption_template":"_CAPTION_","label":"王芝斌，江南大学计算机科学与技术硕士毕业，原OpenHEC FPGA 云初创公司联合创始人、技术合伙人，现任科大讯飞研究院高级软件工程师，从事异构计算、云计算方面的工作。基于HLS 的光流算法加速工作发表在FPGA、FPT、FSP 和ACM TACO 等国际会议或期刊上。","attributes":{},"skip":false,"key":"1.1.7"},{"backlink":"PREFACE.html#fig1.1.8","level":"1.1","list_caption":"Figure: 杨勇（网名：rowen800），2013年于华中师范大学获得无线电物理专业硕士学位，具有5年的FPGA设计和板级硬件开发经历，主要从事数字信号处理、无线通信以及FPGA应用技术的研究。活跃于各大电子技术论坛，分享了多篇博文，个人的技术博客深受广大网友的喜爱。","alt":"杨勇（网名：rowen800），2013年于华中师范大学获得无线电物理专业硕士学位，具有5年的FPGA设计和板级硬件开发经历，主要从事数字信号处理、无线通信以及FPGA应用技术的研究。活跃于各大电子技术论坛，分享了多篇博文，个人的技术博客深受广大网友的喜爱。","nro":8,"url":"images/yy.png","index":8,"caption_template":"_CAPTION_","label":"杨勇（网名：rowen800），2013年于华中师范大学获得无线电物理专业硕士学位，具有5年的FPGA设计和板级硬件开发经历，主要从事数字信号处理、无线通信以及FPGA应用技术的研究。活跃于各大电子技术论坛，分享了多篇博文，个人的技术博客深受广大网友的喜爱。","attributes":{},"skip":false,"key":"1.1.8"},{"backlink":"01-Introduction.html#fig3.2.1","level":"3.2","list_caption":"Figure: 图1.1：a部分是一个两位输入查找表，写作2-LUT。每一个configuration bit，即备置比特，可以根据查找表的功能变化而变化，这样的特性让它具有了可编写的特性。b部分是AND门的编写方式，out一列的数值从上到下依次对应了配置比特0-3的数值。c部分是一个由查找表和触发器组成的简单的slice。这个查找表拥有九个配置比特，其中八个决定查找表的功能，剩下一个决定直接使用查找表的输出或使用触发器中储存的输出。slice的性质见下文。","alt":"图1.1：a部分是一个两位输入查找表，写作2-LUT。每一个configuration bit，即备置比特，可以根据查找表的功能变化而变化，这样的特性让它具有了可编写的特性。b部分是AND门的编写方式，out一列的数值从上到下依次对应了配置比特0-3的数值。c部分是一个由查找表和触发器组成的简单的slice。这个查找表拥有九个配置比特，其中八个决定查找表的功能，剩下一个决定直接使用查找表的输出或使用触发器中储存的输出。slice的性质见下文。","nro":9,"url":"/images/lut.jpg","index":1,"caption_template":"_CAPTION_","label":"图1.1：a部分是一个两位输入查找表，写作2-LUT。每一个configuration bit，即备置比特，可以根据查找表的功能变化而变化，这样的特性让它具有了可编写的特性。b部分是AND门的编写方式，out一列的数值从上到下依次对应了配置比特0-3的数值。c部分是一个由查找表和触发器组成的简单的slice。这个查找表拥有九个配置比特，其中八个决定查找表的功能，剩下一个决定直接使用查找表的输出或使用触发器中储存的输出。slice的性质见下文。","attributes":{},"skip":false,"key":"3.2.1"},{"backlink":"01-Introduction.html#fig3.2.2","level":"3.2","list_caption":"Figure: 图1.2:由查找表和触发器组成的slice，通常slice比图上结构更加复杂一点，slice之间通过连线通道（routing channel）和开关盒（switchbox）相连，这两个用于连接的设备提供了一个同样可编写的互联和自定义的数据传输方向。开关盒是一个包含很多开关（传输晶体管制成）的部分，提供了编写传输路径的能力","alt":"图1.2:由查找表和触发器组成的slice，通常slice比图上结构更加复杂一点，slice之间通过连线通道（routing channel）和开关盒（switchbox）相连，这两个用于连接的设备提供了一个同样可编写的互联和自定义的数据传输方向。开关盒是一个包含很多开关（传输晶体管制成）的部分，提供了编写传输路径的能力","nro":10,"url":"images/slice_channel.jpg","index":2,"caption_template":"_CAPTION_","label":"图1.2:由查找表和触发器组成的slice，通常slice比图上结构更加复杂一点，slice之间通过连线通道（routing channel）和开关盒（switchbox）相连，这两个用于连接的设备提供了一个同样可编写的互联和自定义的数据传输方向。开关盒是一个包含很多开关（传输晶体管制成）的部分，提供了编写传输路径的能力","attributes":{},"skip":false,"key":"3.2.2"},{"backlink":"01-Introduction.html#fig3.2.3","level":"3.2","list_caption":"Figure: 图1.3:2D的FPGA岛状结构。每个slice内的逻辑与内存通过连接通道和开关盒相连。IO模块有一个对外接口，可以通往内存，处理器，传感器等等。一些FPGA上IO直接与芯片引脚相连，一些FPGA则用起连接逻辑架构和片上的一些资源。","alt":"图1.3:2D的FPGA岛状结构。每个slice内的逻辑与内存通过连接通道和开关盒相连。IO模块有一个对外接口，可以通往内存，处理器，传感器等等。一些FPGA上IO直接与芯片引脚相连，一些FPGA则用起连接逻辑架构和片上的一些资源。","nro":11,"url":"images/fpga.jpg","index":3,"caption_template":"_CAPTION_","label":"图1.3:2D的FPGA岛状结构。每个slice内的逻辑与内存通过连接通道和开关盒相连。IO模块有一个对外接口，可以通往内存，处理器，传感器等等。一些FPGA上IO直接与芯片引脚相连，一些FPGA则用起连接逻辑架构和片上的一些资源。","attributes":{},"skip":false,"key":"3.2.3"},{"backlink":"01-Introduction.html#fig3.2.4","level":"3.2","list_caption":"Figure: 图1.4:现代FPGA变得更加异构化，一些FPGA除了可编程部分之外，加入了很多预配好的结构比如寄存器堆，自定义数据路径，高速互联等等。现如今FPGA通常配有一个或多个处理器，比如ARM或x86核，两者协同控制系统。","alt":"图1.4:现代FPGA变得更加异构化，一些FPGA除了可编程部分之外，加入了很多预配好的结构比如寄存器堆，自定义数据路径，高速互联等等。现如今FPGA通常配有一个或多个处理器，比如ARM或x86核，两者协同控制系统。","nro":12,"url":"images/heterogenous_fpga.jpg","index":4,"caption_template":"_CAPTION_","label":"图1.4:现代FPGA变得更加异构化，一些FPGA除了可编程部分之外，加入了很多预配好的结构比如寄存器堆，自定义数据路径，高速互联等等。现如今FPGA通常配有一个或多个处理器，比如ARM或x86核，两者协同控制系统。","attributes":{},"skip":false,"key":"3.2.4"},{"backlink":"01-Introduction.html#fig3.2.5","level":"3.2","list_caption":"Figure: 图1.6:设想中的嵌入式FPGA设计结构图，包括接口核心（蓝色框），标准核（绿色框），和应用加速核（紫色框）。注意应用加速核也可能自带流接口，内存对应接口。","alt":"图1.6:设想中的嵌入式FPGA设计结构图，包括接口核心（蓝色框），标准核（绿色框），和应用加速核（紫色框）。注意应用加速核也可能自带流接口，内存对应接口。","nro":13,"url":"images/embedded_design_template.jpg","index":5,"caption_template":"_CAPTION_","label":"图1.6:设想中的嵌入式FPGA设计结构图，包括接口核心（蓝色框），标准核（绿色框），和应用加速核（紫色框）。注意应用加速核也可能自带流接口，内存对应接口。","attributes":{},"skip":false,"key":"3.2.5"},{"backlink":"01-Introduction.html#fig3.2.6","level":"3.2","list_caption":"Figure: 图1.7:两种不同设计的任务间隔和任务延迟，上方的弧线指示的是任务间隔，下方的弧线指示的是任务延迟。左右两个设计的区别在于，左边是流水线（pipeline），右边使用了更顺序化的设计。","alt":"图1.7:两种不同设计的任务间隔和任务延迟，上方的弧线指示的是任务间隔，下方的弧线指示的是任务延迟。左右两个设计的区别在于，左边是流水线（pipeline），右边使用了更顺序化的设计。","nro":14,"url":"images/intervalduration.jpg","index":6,"caption_template":"_CAPTION_","label":"图1.7:两种不同设计的任务间隔和任务延迟，上方的弧线指示的是任务间隔，下方的弧线指示的是任务延迟。左右两个设计的区别在于，左边是流水线（pipeline），右边使用了更顺序化的设计。","attributes":{},"skip":false,"key":"3.2.6"},{"backlink":"01-Introduction.html#fig3.2.7","level":"3.2","list_caption":"Figure: （代码样例）图1.8:四抽头FIR滤波器的代码","alt":"（代码样例）图1.8:四抽头FIR滤波器的代码","nro":15,"url":"images/placeholder.png","index":7,"caption_template":"_CAPTION_","label":"（代码样例）图1.8:四抽头FIR滤波器的代码","attributes":{},"skip":false,"key":"3.2.7"},{"backlink":"01-Introduction.html#fig3.2.8","level":"3.2","list_caption":"Figure: （代码样例）图1.9:RISC风格下图1.8中的代码的汇编版。在赛灵思Microblaze处理器下施行。这段代码由microblazeel-xilinx-linux-gnu-gcc -01 -mno -xl -soft -mul S fir.c 指令产生","alt":"（代码样例）图1.9:RISC风格下图1.8中的代码的汇编版。在赛灵思Microblaze处理器下施行。这段代码由microblazeel-xilinx-linux-gnu-gcc -01 -mno -xl -soft -mul S fir.c 指令产生","nro":16,"url":"images/filter_asm_behavior.jpg","index":8,"caption_template":"_CAPTION_","label":"（代码样例）图1.9:RISC风格下图1.8中的代码的汇编版。在赛灵思Microblaze处理器下施行。这段代码由microblazeel-xilinx-linux-gnu-gcc -01 -mno -xl -soft -mul S fir.c 指令产生","attributes":{},"skip":false,"key":"3.2.8"},{"backlink":"01-Introduction.html#fig3.2.9","level":"3.2","list_caption":"Figure: 图1.10:每周期一抽头设计。可以由图1.8中的代码产出","alt":"图1.10:每周期一抽头设计。可以由图1.8中的代码产出","nro":17,"url":"images/filter_one_sample_behavior.jpg","index":9,"caption_template":"_CAPTION_","label":"图1.10:每周期一抽头设计。可以由图1.8中的代码产出","attributes":{},"skip":false,"key":"3.2.9"},{"backlink":"01-Introduction.html#fig3.2.10","level":"3.2","list_caption":"Figure: 图1.11:每周期一样本设计。可以由图1.8中的代码加入函数流水指令产出","alt":"图1.11:每周期一样本设计。可以由图1.8中的代码加入函数流水指令产出","nro":18,"url":"images/filter_one_tap_behavior.jpg","index":10,"caption_template":"_CAPTION_","label":"图1.11:每周期一样本设计。可以由图1.8中的代码加入函数流水指令产出","attributes":{},"skip":false,"key":"3.2.10"},{"backlink":"01-Introduction.html#fig3.2.11","level":"3.2","list_caption":"Figure: （代码样例）图1.12：另一种FIR滤波器代码","alt":"（代码样例）图1.12：另一种FIR滤波器代码","nro":19,"url":"images/placeholder.png","index":11,"caption_template":"_CAPTION_","label":"（代码样例）图1.12：另一种FIR滤波器代码","attributes":{},"skip":false,"key":"3.2.11"},{"backlink":"01-Introduction.html#fig3.2.12","level":"3.2","list_caption":"Figure: 表1.1:一个优化策略和章节的对照表","alt":"表1.1:一个优化策略和章节的对照表","nro":20,"url":"images/placeholder.png","index":12,"caption_template":"_CAPTION_","label":"表1.1:一个优化策略和章节的对照表","attributes":{},"skip":false,"key":"3.2.12"},{"backlink":"02-Finite-Impulse-Response-Filters.html#fig3.3.1","level":"3.3","list_caption":"Figure: mac","alt":"mac","nro":21,"url":"/images/mac.jpg","index":1,"caption_template":"_CAPTION_","label":"mac","attributes":{},"skip":false,"key":"3.3.1"},{"backlink":"02-Finite-Impulse-Response-Filters.html#fig3.3.2","level":"3.3","list_caption":"Figure: 图2.6:在fir11函数中以展开因子4手动将MAC循环展开。","alt":"图2.6:在fir11函数中以展开因子4手动将MAC循环展开。","nro":22,"url":"images/placeholder.png","index":2,"caption_template":"_CAPTION_","label":"图2.6:在fir11函数中以展开因子4手动将MAC循环展开。","attributes":{},"skip":false,"key":"3.3.2"},{"backlink":"02-Finite-Impulse-Response-Filters.html#fig3.3.3","level":"3.3","list_caption":"Figure: pipeline_mac","alt":"pipeline_mac","nro":23,"url":"/images/pipeline_mac.jpg","index":3,"caption_template":"_CAPTION_","label":"pipeline_mac","attributes":{},"skip":false,"key":"3.3.3"},{"backlink":"02-Finite-Impulse-Response-Filters.html#fig3.3.4","level":"3.3","list_caption":"Figure: 图2.7: a)表示MAC for循环时序图。b)表示三个迭代运算用流水形式优化的MAC for循环。","alt":"图2.7: a)表示MAC for循环时序图。b)表示三个迭代运算用流水形式优化的MAC for循环。","nro":24,"url":"images/placeholder.png","index":4,"caption_template":"_CAPTION_","label":"图2.7: a)表示MAC for循环时序图。b)表示三个迭代运算用流水形式优化的MAC for循环。","attributes":{},"skip":false,"key":"3.3.4"},{"backlink":"02-Finite-Impulse-Response-Filters.html#fig3.3.5","level":"3.3","list_caption":"Figure: pipeline_tdl","alt":"pipeline_tdl","nro":25,"url":"/images/pipeline_tdl.jpg","index":5,"caption_template":"_CAPTION_","label":"pipeline_tdl","attributes":{},"skip":false,"key":"3.3.5"},{"backlink":"02-Finite-Impulse-Response-Filters.html#fig3.3.6","level":"3.3","list_caption":"Figure: 图2.8:a)TDL for循环两次迭代流程表。b)II=1，TDL for循环三次迭代流程表。","alt":"图2.8:a)TDL for循环两次迭代流程表。b)II=1，TDL for循环三次迭代流程表。","nro":26,"url":"images/placeholder.png","index":6,"caption_template":"_CAPTION_","label":"图2.8:a)TDL for循环两次迭代流程表。b)II=1，TDL for循环三次迭代流程表。","attributes":{},"skip":false,"key":"3.3.6"},{"backlink":"02-Finite-Impulse-Response-Filters.html#fig3.3.7","level":"3.3","list_caption":"Figure: complex_fir","alt":"complex_fir","nro":27,"url":"/images/complex_fir.jpg","index":7,"caption_template":"_CAPTION_","label":"complex_fir","attributes":{},"skip":false,"key":"3.3.7"},{"backlink":"03-CORDIC.html#fig3.4.1","level":"3.4","list_caption":"Figure: 图3.2用CORDIC算法计算 cos60 和 sin60 。使用递增数i(0，1，2，3，4)来表示执行五次旋转，最终旋转结果为61.078度 。这个矢量对应的x和y值可以近似为指定角度的余弦和正弦值。","alt":"图3.2用CORDIC算法计算 cos60 和 sin60 。使用递增数i(0，1，2，3，4)来表示执行五次旋转，最终旋转结果为61.078度 。这个矢量对应的x和y值可以近似为指定角度的余弦和正弦值。","nro":28,"url":"images/sin_cos_cordic.jpg","index":1,"caption_template":"_CAPTION_","label":"图3.2用CORDIC算法计算 cos60 和 sin60 。使用递增数i(0，1，2，3，4)来表示执行五次旋转，最终旋转结果为61.078度 。这个矢量对应的x和y值可以近似为指定角度的余弦和正弦值。","attributes":{},"skip":false,"key":"3.4.1"},{"backlink":"03-CORDIC.html#fig3.4.2","level":"3.4","list_caption":"Figure: 图3.4:图中显示了一个二维平面和一个同时用笛卡尔形式(x,y)和极坐标形式(r,θ)表示的矢量,通过该矢量说明这两个坐标系之间的关系。","alt":"图3.4:图中显示了一个二维平面和一个同时用笛卡尔形式(x,y)和极坐标形式(r,θ)表示的矢量,通过该矢量说明这两个坐标系之间的关系。","nro":29,"url":"images/rotation.jpg","index":2,"caption_template":"_CAPTION_","label":"图3.4:图中显示了一个二维平面和一个同时用笛卡尔形式(x,y)和极坐标形式(r,θ)表示的矢量,通过该矢量说明这两个坐标系之间的关系。","attributes":{},"skip":false,"key":"3.4.2"},{"backlink":"03-CORDIC.html#fig3.4.3","level":"3.4","list_caption":"Figure: 图3.5：笛卡尔坐标系转换为极坐标系的第一步是执行一个正或负90度的旋转，这次旋转的目的是为了使初始矢量到象限I或IV。一旦矢量到了这两个象限，后续的旋转将使矢量到达最终角度0◦。此时，初始矢量的径向值是最终旋转矢量的x值，初始矢量的角度是CORDIC所做旋转角度累加和。a)和b)展示了一个初始y值为正的例子，这意味着矢量位于象限I或II中。旋转-90度将它们旋转到相应象限中。c)和d)给出了类似的情况，当初始矢量y值为负值时，我们希望旋转+90度使矢量转到第I或第IV象限。 ","alt":"图3.5：笛卡尔坐标系转换为极坐标系的第一步是执行一个正或负90度的旋转，这次旋转的目的是为了使初始矢量到象限I或IV。一旦矢量到了这两个象限，后续的旋转将使矢量到达最终角度0◦。此时，初始矢量的径向值是最终旋转矢量的x值，初始矢量的角度是CORDIC所做旋转角度累加和。a)和b)展示了一个初始y值为正的例子，这意味着矢量位于象限I或II中。旋转-90度将它们旋转到相应象限中。c)和d)给出了类似的情况，当初始矢量y值为负值时，我们希望旋转+90度使矢量转到第I或第IV象限。 ","nro":30,"url":"images/cordic_magnitude_angle.jpg","index":3,"caption_template":"_CAPTION_","label":"图3.5：笛卡尔坐标系转换为极坐标系的第一步是执行一个正或负90度的旋转，这次旋转的目的是为了使初始矢量到象限I或IV。一旦矢量到了这两个象限，后续的旋转将使矢量到达最终角度0◦。此时，初始矢量的径向值是最终旋转矢量的x值，初始矢量的角度是CORDIC所做旋转角度累加和。a)和b)展示了一个初始y值为正的例子，这意味着矢量位于象限I或II中。旋转-90度将它们旋转到相应象限中。c)和d)给出了类似的情况，当初始矢量y值为负值时，我们希望旋转+90度使矢量转到第I或第IV象限。 ","attributes":{},"skip":false,"key":"3.4.3"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.1","level":"3.5","list_caption":"Figure: 图4.1：余弦，正弦和复指数之间的关系。a）部分显示了两个复矢量 $e^{jx}$ and $e^{-jx}$ 的和。 这个求和的结果恰好落在实值轴上，其值为2cos(x)。b）部分显示了一个类似的总和，只是这次对矢量$e^{jx}$ and $-e^{-jx}$ 求和。 这个总和落在虚轴上，其值为2sin(x).","alt":"图4.1：余弦，正弦和复指数之间的关系。a）部分显示了两个复矢量 $$e^{jx}$$ and $$e^{-jx}$$ 的和。 这个求和的结果恰好落在实值轴上，其值为2cos(x)。b）部分显示了一个类似的总和，只是这次对矢量$$e^{jx}$$ and $$-e^{-jx}$$ 求和。 这个总和落在虚轴上，其值为2sin(x).","nro":31,"url":"images/sin_cos_exp.jpg","index":1,"caption_template":"_CAPTION_","label":"图4.1：余弦，正弦和复指数之间的关系。a）部分显示了两个复矢量 $$e^{jx}$$ and $$e^{-jx}$$ 的和。 这个求和的结果恰好落在实值轴上，其值为2cos(x)。b）部分显示了一个类似的总和，只是这次对矢量$$e^{jx}$$ and $$-e^{-jx}$$ 求和。 这个总和落在虚轴上，其值为2sin(x).","attributes":{},"skip":false,"key":"3.5.1"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.2","level":"3.5","list_caption":"Figure: 图4.2：一个有N个样本点的离散实值时域函数g可以用一个具有N/2+1个样本点的频域函数表示。每个频域采样都有一个余弦值和一个正弦幅值。这两个幅度值可以共同表示为一个复数，余弦幅度表示实部，正弦幅度表示虚部。","alt":"图4.2：一个有N个样本点的离散实值时域函数g可以用一个具有N/2+1个样本点的频域函数表示。每个频域采样都有一个余弦值和一个正弦幅值。这两个幅度值可以共同表示为一个复数，余弦幅度表示实部，正弦幅度表示虚部。","nro":32,"url":"images/basic-DFT.jpg","index":2,"caption_template":"_CAPTION_","label":"图4.2：一个有N个样本点的离散实值时域函数g可以用一个具有N/2+1个样本点的频域函数表示。每个频域采样都有一个余弦值和一个正弦幅值。这两个幅度值可以共同表示为一个复数，余弦幅度表示实部，正弦幅度表示虚部。","attributes":{},"skip":false,"key":"3.5.2"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.3","level":"3.5","list_caption":"Figure: 图4.3 矩阵S中元素的复数向量图.","alt":"图4.3 矩阵S中元素的复数向量图.","nro":33,"url":"images/dft-visualization.jpg","index":3,"caption_template":"_CAPTION_","label":"图4.3 矩阵S中元素的复数向量图.","attributes":{},"skip":false,"key":"3.5.3"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.4","level":"3.5","list_caption":"Figure: 图4.5 一种图4.4矩阵向量乘法代码可能的实现方式。","alt":"图4.5 一种图4.4矩阵向量乘法代码可能的实现方式。","nro":34,"url":"images/dft_behavior_loop_sequential.jpg","index":4,"caption_template":"_CAPTION_","label":"图4.5 一种图4.4矩阵向量乘法代码可能的实现方式。","attributes":{},"skip":false,"key":"3.5.4"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.5","level":"3.5","list_caption":"Figure: 图4.7：图4.6的内循环代码对应的数据流图。","alt":"图4.7：图4.6的内循环代码对应的数据流图。","nro":35,"url":"images/matrix_vector_unroll_inner.jpg","index":5,"caption_template":"_CAPTION_","label":"图4.7：图4.6的内循环代码对应的数据流图。","attributes":{},"skip":false,"key":"3.5.5"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.6","level":"3.5","list_caption":"Figure: 图4.8：由图4.6的内部循环实现的两种不同的顺序模式操作图。","alt":"图4.8：由图4.6的内部循环实现的两种不同的顺序模式操作图。","nro":36,"url":"images/dft_behavior1.jpg","index":6,"caption_template":"_CAPTION_","label":"图4.8：由图4.6的内部循环实现的两种不同的顺序模式操作图。","attributes":{},"skip":false,"key":"3.5.6"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.7","level":"3.5","list_caption":"Figure: 图4.9：由图4.6的内部循环实现的两种不同的流水线模式操作图。","alt":"图4.9：由图4.6的内部循环实现的两种不同的流水线模式操作图。","nro":37,"url":"images/dft_behavior2.jpg","index":7,"caption_template":"_CAPTION_","label":"图4.9：由图4.6的内部循环实现的两种不同的流水线模式操作图。","attributes":{},"skip":false,"key":"3.5.7"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.8","level":"3.5","list_caption":"Figure: 图4.10：由图4.6的内部循环实现的两种不同的流水线乘法器操作。","alt":"图4.10：由图4.6的内部循环实现的两种不同的流水线乘法器操作。","nro":38,"url":"images/dft_behavior3.jpg","index":8,"caption_template":"_CAPTION_","label":"图4.10：由图4.6的内部循环实现的两种不同的流水线乘法器操作。","attributes":{},"skip":false,"key":"3.5.8"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.9","level":"3.5","list_caption":"Figure: 图4.12 具有特定的阵列分区和流水线选择的矩阵-矢量乘法体系结构。右图的流水线寄存器已经被删除.","alt":"图4.12 具有特定的阵列分区和流水线选择的矩阵-矢量乘法体系结构。右图的流水线寄存器已经被删除.","nro":39,"url":"images/matrix_vector_optimized.jpg","index":9,"caption_template":"_CAPTION_","label":"图4.12 具有特定的阵列分区和流水线选择的矩阵-矢量乘法体系结构。右图的流水线寄存器已经被删除.","attributes":{},"skip":false,"key":"3.5.9"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.10","level":"3.5","list_caption":"Figure: 图4.13 II = 3时具有特定的阵列分区选择的矩阵向量乘法体系结构。如左图所示，阵列已被分割得超过需要以至于使用了多路复用器。如右图所示，数组用factor=3分区，这样减少了多路复用器的使用，但j循环索引成为地址计算的一部分。","alt":"图4.13 II = 3时具有特定的阵列分区选择的矩阵向量乘法体系结构。如左图所示，阵列已被分割得超过需要以至于使用了多路复用器。如右图所示，数组用factor=3分区，这样减少了多路复用器的使用，但j循环索引成为地址计算的一部分。","nro":40,"url":"images/matrix_vector_poor_scaling.jpg","index":10,"caption_template":"_CAPTION_","label":"图4.13 II = 3时具有特定的阵列分区选择的矩阵向量乘法体系结构。如左图所示，阵列已被分割得超过需要以至于使用了多路复用器。如右图所示，数组用factor=3分区，这样减少了多路复用器的使用，但j循环索引成为地址计算的一部分。","attributes":{},"skip":false,"key":"3.5.10"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.11","level":"3.5","list_caption":"Figure: 图4.16：DFT的高层体系结构图，如图4.15所示。 这不是该体系结构的综合视图，例如，它缺少与更新循环计数器i和j的相关内容。该图想向读者提供关于如何合成这种体系结构的近似概念。这里我们假定浮点运算符需要4个时钟周期。.","alt":"图4.16：DFT的高层体系结构图，如图4.15所示。 这不是该体系结构的综合视图，例如，它缺少与更新循环计数器i和j的相关内容。该图想向读者提供关于如何合成这种体系结构的近似概念。这里我们假定浮点运算符需要4个时钟周期。.","nro":41,"url":"images/dft_sequential_arch.jpg","index":11,"caption_template":"_CAPTION_","label":"图4.16：DFT的高层体系结构图，如图4.15所示。 这不是该体系结构的综合视图，例如，它缺少与更新循环计数器i和j的相关内容。该图想向读者提供关于如何合成这种体系结构的近似概念。这里我们假定浮点运算符需要4个时钟周期。.","attributes":{},"skip":false,"key":"3.5.11"},{"backlink":"04-Discrete-Fourier-Transform.html#fig3.5.12","level":"3.5","list_caption":"Figure: 图4.17：图4.16中的行为的流水线版本。在这个设计案例下，由于每个浮点的添加需要4个时钟周期才能完成，并且在下一个循环开始之前需要上一个循环的结果加入计算（以红色显示相关性），所以设置循环的启动间隔为4个间隔。所有迭代的依赖关系汇总在右图中。.","alt":"图4.17：图4.16中的行为的流水线版本。在这个设计案例下，由于每个浮点的添加需要4个时钟周期才能完成，并且在下一个循环开始之前需要上一个循环的结果加入计算（以红色显示相关性），所以设置循环的启动间隔为4个间隔。所有迭代的依赖关系汇总在右图中。.","nro":42,"url":"images/dft_pipelined_behavior.jpg","index":12,"caption_template":"_CAPTION_","label":"图4.17：图4.16中的行为的流水线版本。在这个设计案例下，由于每个浮点的添加需要4个时钟周期才能完成，并且在下一个循环开始之前需要上一个循环的结果加入计算（以红色显示相关性），所以设置循环的启动间隔为4个间隔。所有迭代的依赖关系汇总在右图中。.","attributes":{},"skip":false,"key":"3.5.12"},{"backlink":"05-Fast-Fourier-Transform.html#fig3.6.1","level":"3.6","list_caption":"Figure: 图5.1 a）部分是2点DFT/FFT的数据流图。 b）部分显示了该运算的蝴蝶结构。它是数字信号处理领域中计算FFT的常见表示方法。","alt":"图5.1 a）部分是2点DFT/FFT的数据流图。 b）部分显示了该运算的蝴蝶结构。它是数字信号处理领域中计算FFT的常见表示方法。","nro":43,"url":"images/2pointFFT.jpg","index":1,"caption_template":"_CAPTION_","label":"图5.1 a）部分是2点DFT/FFT的数据流图。 b）部分显示了该运算的蝴蝶结构。它是数字信号处理领域中计算FFT的常见表示方法。","attributes":{},"skip":false,"key":"3.6.1"},{"backlink":"05-Fast-Fourier-Transform.html#fig3.6.2","level":"3.6","list_caption":"Figure: 四点FFT分为两个阶段。 阶段1使用两个2点FFT {一个2点FFT用于偶数输入值，另一个2点FFT用于奇数输入值。 阶段2执行剩余的操作以完成FFT计算，如公式5.12所述。","alt":"四点FFT分为两个阶段。 阶段1使用两个2点FFT {一个2点FFT用于偶数输入值，另一个2点FFT用于奇数输入值。 阶段2执行剩余的操作以完成FFT计算，如公式5.12所述。","nro":44,"url":"images/4ptFFT.jpg","index":2,"caption_template":"_CAPTION_","label":"四点FFT分为两个阶段。 阶段1使用两个2点FFT {一个2点FFT用于偶数输入值，另一个2点FFT用于奇数输入值。 阶段2执行剩余的操作以完成FFT计算，如公式5.12所述。","attributes":{},"skip":false,"key":"3.6.2"},{"backlink":"05-Fast-Fourier-Transform.html#fig3.6.3","level":"3.6","list_caption":"Figure: 图5.3：从两个N/2点FFT构建N点FFT。在偶数输入上执行上N/2点FFT; 较低的N/2点FFT使用奇数输入。","alt":"图5.3：从两个N/2点FFT构建N点FFT。在偶数输入上执行上N/2点FFT; 较低的N/2点FFT使用奇数输入。","nro":45,"url":"images/NptFFT.jpg","index":3,"caption_template":"_CAPTION_","label":"图5.3：从两个N/2点FFT构建N点FFT。在偶数输入上执行上N/2点FFT; 较低的N/2点FFT使用奇数输入。","attributes":{},"skip":false,"key":"3.6.3"},{"backlink":"05-Fast-Fourier-Transform.html#fig3.6.4","level":"3.6","list_caption":"Figure: 图5.4：递归构建的8点FFT。有两个4点FFT，每个FFT使用两个2点FFT。 必须将输入重新排序为偶数和奇数元素两次。 这导致基于索引的比特反转进行重新排序。","alt":"图5.4：递归构建的8点FFT。有两个4点FFT，每个FFT使用两个2点FFT。 必须将输入重新排序为偶数和奇数元素两次。 这导致基于索引的比特反转进行重新排序。","nro":46,"url":"images/8ptFFT.jpg","index":4,"caption_template":"_CAPTION_","label":"图5.4：递归构建的8点FFT。有两个4点FFT，每个FFT使用两个2点FFT。 必须将输入重新排序为偶数和奇数元素两次。 这导致基于索引的比特反转进行重新排序。","attributes":{},"skip":false,"key":"3.6.4"},{"backlink":"05-Fast-Fourier-Transform.html#fig3.6.5","level":"3.6","list_caption":"Figure: 图5.8：该将FFT分成了不同的阶段允许跨越每个阶段的任务流水线。该图演示了同时执行4个具有三个FFT级（即，8点FFT）的示例。","alt":"图5.8：该将FFT分成了不同的阶段允许跨越每个阶段的任务流水线。该图演示了同时执行4个具有三个FFT级（即，8点FFT）的示例。","nro":47,"url":"images/fft_dataflow_behavior.jpg","index":5,"caption_template":"_CAPTION_","label":"图5.8：该将FFT分成了不同的阶段允许跨越每个阶段的任务流水线。该图演示了同时执行4个具有三个FFT级（即，8点FFT）的示例。","attributes":{},"skip":false,"key":"3.6.5"},{"backlink":"06-Sparse-Matrix-Vector-Multiplication.html#fig3.7.1","level":"3.7","list_caption":"Figure: 图 6.1: M是一个4x4矩阵，用两种方式表示：同\"密集\"矩阵一样存在二维数组之中；作为稀疏矩阵，以行压缩存储的形式保存，行压缩存储是一种由3个数组组成的数据结构。","alt":"图 6.1: M是一个4x4矩阵，用两种方式表示：同\"密集\"矩阵一样存在二维数组之中；作为稀疏矩阵，以行压缩存储的形式保存，行压缩存储是一种由3个数组组成的数据结构。","nro":48,"url":"images/crs.jpg","index":1,"caption_template":"_CAPTION_","label":"图 6.1: M是一个4x4矩阵，用两种方式表示：同\"密集\"矩阵一样存在二维数组之中；作为稀疏矩阵，以行压缩存储的形式保存，行压缩存储是一种由3个数组组成的数据结构。","attributes":{},"skip":false,"key":"3.7.1"},{"backlink":"06-Sparse-Matrix-Vector-Multiplication.html#fig3.7.2","level":"3.7","list_caption":"Figure: 图6.2: 主体代码演示了系数矩阵向量乘（SpMV）y=M.x的计算。采用CRS的方式，通过rowPt*、columnIndex 和 value 保存矩阵M。第一个for循环通过迭代访问每一行，第二个for循环访问每一列，实现矩阵M中非0元素和向量中对应的元素相乘并保存值在向量y中。","alt":"图6.2: 主体代码演示了系数矩阵向量乘（SpMV）y=M.x的计算。采用CRS的方式，通过rowPt*、columnIndex 和 value 保存矩阵M。第一个for循环通过迭代访问每一行，第二个for循环访问每一列，实现矩阵M中非0元素和向量中对应的元素相乘并保存值在向量y中。","nro":49,"url":"images/placeholder.png","index":2,"caption_template":"_CAPTION_","label":"图6.2: 主体代码演示了系数矩阵向量乘（SpMV）y=M.x的计算。采用CRS的方式，通过rowPt*、columnIndex 和 value 保存矩阵M。第一个for循环通过迭代访问每一行，第二个for循环访问每一列，实现矩阵M中非0元素和向量中对应的元素相乘并保存值在向量y中。","attributes":{},"skip":false,"key":"3.7.2"},{"backlink":"06-Sparse-Matrix-Vector-Multiplication.html#fig3.7.3","level":"3.7","list_caption":"Figure: 图6.3： spmv函数和激励的头文件","alt":"图6.3： spmv函数和激励的头文件","nro":50,"url":"images/placeholder.png","index":3,"caption_template":"_CAPTION_","label":"图6.3： spmv函数和激励的头文件","attributes":{},"skip":false,"key":"3.7.3"},{"backlink":"06-Sparse-Matrix-Vector-Multiplication.html#fig3.7.4","level":"3.7","list_caption":"Figure: 图6.4 ： 一个简单spmv函数的简单测试平台。测试平台生成了一个用例，并且计算矩阵的向量乘法通过稀疏矩阵乘法（spmv）和非系数矩阵乘法(matrixvector)。","alt":"图6.4 ： 一个简单spmv函数的简单测试平台。测试平台生成了一个用例，并且计算矩阵的向量乘法通过稀疏矩阵乘法（spmv）和非系数矩阵乘法(matrixvector)。","nro":51,"url":"images/placeholder.png","index":4,"caption_template":"_CAPTION_","label":"图6.4 ： 一个简单spmv函数的简单测试平台。测试平台生成了一个用例，并且计算矩阵的向量乘法通过稀疏矩阵乘法（spmv）和非系数矩阵乘法(matrixvector)。","attributes":{},"skip":false,"key":"3.7.4"},{"backlink":"06-Sparse-Matrix-Vector-Multiplication.html#fig3.7.5","level":"3.7","list_caption":"Figure: 图6.5  spmv函数内部循环流水执行过程和结构","alt":"图6.5  spmv函数内部循环流水执行过程和结构","nro":52,"url":"images/spmv_behavior.jpg","index":5,"caption_template":"_CAPTION_","label":"图6.5  spmv函数内部循环流水执行过程和结构","attributes":{},"skip":false,"key":"3.7.5"},{"backlink":"06-Sparse-Matrix-Vector-Multiplication.html#fig3.7.6","level":"3.7","list_caption":"Figure: 图6.6  局部展开图6.2中**smpv**函数","alt":"图6.6  局部展开图6.2中**smpv**函数","nro":53,"url":"images/placeholder.png","index":6,"caption_template":"_CAPTION_","label":"图6.6  局部展开图6.2中**smpv**函数","attributes":{},"skip":false,"key":"3.7.6"},{"backlink":"06-Sparse-Matrix-Vector-Multiplication.html#fig3.7.7","level":"3.7","list_caption":"Figure: 图6.7 针对累加的两种不同方式的局部展开。左边的版本有3个加法器进行递归操作，相反右边的版本只有1个加法器进行递归累加","alt":"图6.7 针对累加的两种不同方式的局部展开。左边的版本有3个加法器进行递归操作，相反右边的版本只有1个加法器进行递归累加","nro":54,"url":"images/spmv_partial_unroll.jpg","index":7,"caption_template":"_CAPTION_","label":"图6.7 针对累加的两种不同方式的局部展开。左边的版本有3个加法器进行递归操作，相反右边的版本只有1个加法器进行递归累加","attributes":{},"skip":false,"key":"3.7.7"},{"backlink":"06-Sparse-Matrix-Vector-Multiplication.html#fig3.7.8","level":"3.7","list_caption":"Figure: 图6.8 图6.6中 spmv函数基于部分展开和内部流水线处理后执行过程","alt":"图6.8 图6.6中 spmv函数基于部分展开和内部流水线处理后执行过程","nro":55,"url":"images/spmv_unrolled_behavior.jpg","index":8,"caption_template":"_CAPTION_","label":"图6.8 图6.6中 spmv函数基于部分展开和内部流水线处理后执行过程","attributes":{},"skip":false,"key":"3.7.8"},{"backlink":"07-Matrix-Multiplication.html#fig3.8.1","level":"3.8","list_caption":"Figure: 图7.1 一个通用的3层for循环实现了矩阵乘法。","alt":"图7.1 一个通用的3层for循环实现了矩阵乘法。","nro":56,"url":"images/placeholder.png","index":1,"caption_template":"_CAPTION_","label":"图7.1 一个通用的3层for循环实现了矩阵乘法。","attributes":{},"skip":false,"key":"3.8.1"},{"backlink":"07-Matrix-Multiplication.html#fig3.8.2","level":"3.8","list_caption":"Figure: 图 7.2:三种实现二维矩阵的方式。左边采用原始的方式，保存N*M个元素。中间数组使用了array_partition directive进行了变形，结果是使用了M个存储单元，每个保存N个元素。右边的，使用array_shape directive进行了变形，结果保存在一个存储单元，带有N个入口，每个入口保存原始矩阵的M个元素","alt":"图 7.2:三种实现二维矩阵的方式。左边采用原始的方式，保存N*M个元素。中间数组使用了array_partition directive进行了变形，结果是使用了M个存储单元，每个保存N个元素。右边的，使用array_shape directive进行了变形，结果保存在一个存储单元，带有N个入口，每个入口保存原始矩阵的M个元素","nro":57,"url":"images/matmul_array_reshape.jpg","index":2,"caption_template":"_CAPTION_","label":"图 7.2:三种实现二维矩阵的方式。左边采用原始的方式，保存N*M个元素。中间数组使用了array_partition directive进行了变形，结果是使用了M个存储单元，每个保存N个元素。右边的，使用array_shape directive进行了变形，结果保存在一个存储单元，带有N个入口，每个入口保存原始矩阵的M个元素","attributes":{},"skip":false,"key":"3.8.2"},{"backlink":"07-Matrix-Multiplication.html#fig3.8.3","level":"3.8","list_caption":"Figure: 图 7.3:  一种可能的分块方式是讲矩阵分解为2个4x4的矩阵。整个AB 乘被分为4个矩阵乘法，分别是对A进行2x4个块，对B进行4x2个块","alt":"图 7.3:  一种可能的分块方式是讲矩阵分解为2个4x4的矩阵。整个AB 乘被分为4个矩阵乘法，分别是对A进行2x4个块，对B进行4x2个块","nro":58,"url":"images/blockmm.jpg","index":3,"caption_template":"_CAPTION_","label":"图 7.3:  一种可能的分块方式是讲矩阵分解为2个4x4的矩阵。整个AB 乘被分为4个矩阵乘法，分别是对A进行2x4个块，对B进行4x2个块","attributes":{},"skip":false,"key":"3.8.3"},{"backlink":"07-Matrix-Multiplication.html#fig3.8.4","level":"3.8","list_caption":"Figure: 图7.4：分块矩阵乘法头文件的定义。文件定义了函数内部使用的数据结构，最关键的是，函数blockmatmul的接口。","alt":"图7.4：分块矩阵乘法头文件的定义。文件定义了函数内部使用的数据结构，最关键的是，函数blockmatmul的接口。","nro":59,"url":"images/placeholder.png","index":4,"caption_template":"_CAPTION_","label":"图7.4：分块矩阵乘法头文件的定义。文件定义了函数内部使用的数据结构，最关键的是，函数blockmatmul的接口。","attributes":{},"skip":false,"key":"3.8.4"},{"backlink":"07-Matrix-Multiplication.html#fig3.8.5","level":"3.8","list_caption":"Figure: 图7.5： 函数blockmatmul从矩阵A输入一系列大小为BLOCK_SIZE的行，从矩阵 B 输入一系列大小为BLOCK_SIZE 的列，创建一个BLOCK_SIZWxBLOCK_SIZE 分布结果，作为矩阵AB 的一部分。代码的第一部分（标记为loadA ）保存 A 的行到局部存储，第二部分是嵌套的partialsum for循环执行部分结果的计算，最后的一部分（标记为 writeoutput ）将之前计算返回的分布结果放到合适格式中。","alt":"图7.5： 函数blockmatmul从矩阵A输入一系列大小为BLOCK_SIZE的行，从矩阵 B 输入一系列大小为BLOCK_SIZE 的列，创建一个BLOCK_SIZWxBLOCK_SIZE 分布结果，作为矩阵AB 的一部分。代码的第一部分（标记为loadA ）保存 A 的行到局部存储，第二部分是嵌套的partialsum for循环执行部分结果的计算，最后的一部分（标记为 writeoutput ）将之前计算返回的分布结果放到合适格式中。","nro":60,"url":"images/placeholder.png","index":5,"caption_template":"_CAPTION_","label":"图7.5： 函数blockmatmul从矩阵A输入一系列大小为BLOCK_SIZE的行，从矩阵 B 输入一系列大小为BLOCK_SIZE 的列，创建一个BLOCK_SIZWxBLOCK_SIZE 分布结果，作为矩阵AB 的一部分。代码的第一部分（标记为loadA ）保存 A 的行到局部存储，第二部分是嵌套的partialsum for循环执行部分结果的计算，最后的一部分（标记为 writeoutput ）将之前计算返回的分布结果放到合适格式中。","attributes":{},"skip":false,"key":"3.8.5"},{"backlink":"07-Matrix-Multiplication.html#fig3.8.6","level":"3.8","list_caption":"Figure: 图7.6： 分块矩阵乘法测试平台的第一部分。函数被分为两个部分， 因为太长不能在单页上一次显示。测试平台剩下的部分在图7.7中。其中有一个“软件”版本的矩阵乘法、变量的声明和初始化。","alt":"图7.6： 分块矩阵乘法测试平台的第一部分。函数被分为两个部分， 因为太长不能在单页上一次显示。测试平台剩下的部分在图7.7中。其中有一个“软件”版本的矩阵乘法、变量的声明和初始化。","nro":61,"url":"images/placeholder.png","index":6,"caption_template":"_CAPTION_","label":"图7.6： 分块矩阵乘法测试平台的第一部分。函数被分为两个部分， 因为太长不能在单页上一次显示。测试平台剩下的部分在图7.7中。其中有一个“软件”版本的矩阵乘法、变量的声明和初始化。","attributes":{},"skip":false,"key":"3.8.6"},{"backlink":"07-Matrix-Multiplication.html#fig3.8.7","level":"3.8","list_caption":"Figure: 图7.7：分块矩阵乘法的第二部分。第一部分在图7.6中。这部分演示如何将流类型数据送入函数blockmatmul，代码比较函数和用简化三重for循环实现之间的结果。","alt":"图7.7：分块矩阵乘法的第二部分。第一部分在图7.6中。这部分演示如何将流类型数据送入函数blockmatmul，代码比较函数和用简化三重for循环实现之间的结果。","nro":62,"url":"images/placeholder.png","index":7,"caption_template":"_CAPTION_","label":"图7.7：分块矩阵乘法的第二部分。第一部分在图7.6中。这部分演示如何将流类型数据送入函数blockmatmul，代码比较函数和用简化三重for循环实现之间的结果。","attributes":{},"skip":false,"key":"3.8.7"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.1","level":"3.9","list_caption":"Figure: 图8.1 前缀和实现代码及行为描述","alt":"图8.1 前缀和实现代码及行为描述","nro":63,"url":"images/8_1.png","index":1,"caption_template":"_CAPTION_","label":"图8.1 前缀和实现代码及行为描述","attributes":{},"skip":false,"key":"3.9.1"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.2","level":"3.9","list_caption":"Figure: 图8.2 优化后的前缀和代码及行为描述","alt":"图8.2 优化后的前缀和代码及行为描述","nro":64,"url":"images/8_2.png","index":2,"caption_template":"_CAPTION_","label":"图8.2 优化后的前缀和代码及行为描述","attributes":{},"skip":false,"key":"3.9.2"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.3","level":"3.9","list_caption":"Figure: 图8.3 使用unroll,pipeline和array_partition指令优化的前缀和代码","alt":"图8.3 使用unroll,pipeline和array_partition指令优化的前缀和代码","nro":65,"url":"images/8_3.png","index":3,"caption_template":"_CAPTION_","label":"图8.3 使用unroll,pipeline和array_partition指令优化的前缀和代码","attributes":{},"skip":false,"key":"3.9.3"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.4","level":"3.9","list_caption":"Figure: 图8.4 a)部分展示了与图8.1中代码相对应的体系结构。对out[]数组的依赖限制了循环II =1设计的实现。如图8.2中代码所示，使用局部变量计算循环能够减少循环中的延迟并实现II = 1的设计","alt":"图8.4 a)部分展示了与图8.1中代码相对应的体系结构。对out[]数组的依赖限制了循环II =1设计的实现。如图8.2中代码所示，使用局部变量计算循环能够减少循环中的延迟并实现II = 1的设计","nro":66,"url":"images/architectures_prefixsum.jpg","index":4,"caption_template":"_CAPTION_","label":"图8.4 a)部分展示了与图8.1中代码相对应的体系结构。对out[]数组的依赖限制了循环II =1设计的实现。如图8.2中代码所示，使用局部变量计算循环能够减少循环中的延迟并实现II = 1的设计","attributes":{},"skip":false,"key":"3.9.4"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.5","level":"3.9","list_caption":"Figure: 图8.5 一个直方图实例","alt":"图8.5 一个直方图实例","nro":67,"url":"images/histogram_introd.jpg","index":5,"caption_template":"_CAPTION_","label":"图8.5 一个直方图实例","attributes":{},"skip":false,"key":"3.9.5"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.6","level":"3.9","list_caption":"Figure: 图8.6：计算直方图的原始代码。 for循环遍历输入数组并递增hist数组的相应元素。","alt":"图8.6：计算直方图的原始代码。 for循环遍历输入数组并递增hist数组的相应元素。","nro":68,"url":"images/placeholder.png","index":6,"caption_template":"_CAPTION_","label":"图8.6：计算直方图的原始代码。 for循环遍历输入数组并递增hist数组的相应元素。","attributes":{},"skip":false,"key":"3.9.6"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.7","level":"3.9","list_caption":"Figure: 图8.7：图中对应的是图8.6中的代码产生的体系结构。 数组中的val数据用于索引hist数组。val会增加并存储回相同的位置。","alt":"图8.7：图中对应的是图8.6中的代码产生的体系结构。 数组中的val数据用于索引hist数组。val会增加并存储回相同的位置。","nro":69,"url":"images/architectures_histogram.jpg","index":7,"caption_template":"_CAPTION_","label":"图8.7：图中对应的是图8.6中的代码产生的体系结构。 数组中的val数据用于索引hist数组。val会增加并存储回相同的位置。","attributes":{},"skip":false,"key":"3.9.7"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.8","level":"3.9","list_caption":"Figure: 图8.8：计算直方图的替代函数。 通过向Vivado @HLS添加指令约束输入，就可以在不显着更改代码的情况下实现II = 1的设计。","alt":"图8.8：计算直方图的替代函数。 通过向Vivado @HLS添加指令约束输入，就可以在不显着更改代码的情况下实现II = 1的设计。","nro":70,"url":"images/placeholder.png","index":8,"caption_template":"_CAPTION_","label":"图8.8：计算直方图的替代函数。 通过向Vivado @HLS添加指令约束输入，就可以在不显着更改代码的情况下实现II = 1的设计。","attributes":{},"skip":false,"key":"3.9.8"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.9","level":"3.9","list_caption":"Figure: 图8.9：当hist数组完全分区时，由图8.6中的代码产生的体系结构。","alt":"图8.9：当hist数组完全分区时，由图8.6中的代码产生的体系结构。","nro":71,"url":"images/architectures_histogram.jpg","index":9,"caption_template":"_CAPTION_","label":"图8.9：当hist数组完全分区时，由图8.6中的代码产生的体系结构。","attributes":{},"skip":false,"key":"3.9.9"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.10","level":"3.9","list_caption":"Figure: 图8.10：从for循环中删除写入依赖后的读取。 这需要一个if /else结构，看起来似乎会增加设计的不必要的复杂性。尽管数据路径更复杂，但它允许更有效的流水线操作。","alt":"图8.10：从for循环中删除写入依赖后的读取。 这需要一个if /else结构，看起来似乎会增加设计的不必要的复杂性。尽管数据路径更复杂，但它允许更有效的流水线操作。","nro":72,"url":"images/placeholder.png","index":10,"caption_template":"_CAPTION_","label":"图8.10：从for循环中删除写入依赖后的读取。 这需要一个if /else结构，看起来似乎会增加设计的不必要的复杂性。尽管数据路径更复杂，但它允许更有效的流水线操作。","attributes":{},"skip":false,"key":"3.9.10"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.11","level":"3.9","list_caption":"Figure: 图8.11：图中所示是与图8.10中的代码对应的数据路径的描述。 这里包含对应于if和else子句两个独立的部分。 该图显示了计算的重要部分，并省略了一些细节。","alt":"图8.11：图中所示是与图8.10中的代码对应的数据路径的描述。 这里包含对应于if和else子句两个独立的部分。 该图显示了计算的重要部分，并省略了一些细节。","nro":73,"url":"images/architectures_histogram_restructured.jpg","index":11,"caption_template":"_CAPTION_","label":"图8.11：图中所示是与图8.10中的代码对应的数据路径的描述。 这里包含对应于if和else子句两个独立的部分。 该图显示了计算的重要部分，并省略了一些细节。","attributes":{},"skip":false,"key":"3.9.11"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.12","level":"3.9","list_caption":"Figure: 图8.12：使用map-reduce模式实现的直方图计算。 a）部分中的处理单元（PE）与图8.11所示的结构相同。 in数组是分块后的，每个分块由一个单独的PE处理。合并块组合各个直方图以创建最终直方图。","alt":"图8.12：使用map-reduce模式实现的直方图计算。 a）部分中的处理单元（PE）与图8.11所示的结构相同。 in数组是分块后的，每个分块由一个单独的PE处理。合并块组合各个直方图以创建最终直方图。","nro":74,"url":"images/architectures_histogram_parallel.jpg","index":12,"caption_template":"_CAPTION_","label":"图8.12：使用map-reduce模式实现的直方图计算。 a）部分中的处理单元（PE）与图8.11所示的结构相同。 in数组是分块后的，每个分块由一个单独的PE处理。合并块组合各个直方图以创建最终直方图。","attributes":{},"skip":false,"key":"3.9.12"},{"backlink":"08-Prefix-Sum-and-Histogram.html#fig3.9.13","level":"3.9","list_caption":"Figure: 图8.13：图示是使用任务级并行和流水线操作的直方图的另一种实现。直方图操作分为两个子任务，这两个子任务在两个histogram_map函数中执行。使用histogram_reduce函数将这些结果合并到最终的直方图结果中。顶层的histogram函数是将这三个函数连接在一起。","alt":"图8.13：图示是使用任务级并行和流水线操作的直方图的另一种实现。直方图操作分为两个子任务，这两个子任务在两个histogram_map函数中执行。使用histogram_reduce函数将这些结果合并到最终的直方图结果中。顶层的histogram函数是将这三个函数连接在一起。","nro":75,"url":"images/placeholder.png","index":13,"caption_template":"_CAPTION_","label":"图8.13：图示是使用任务级并行和流水线操作的直方图的另一种实现。直方图操作分为两个子任务，这两个子任务在两个histogram_map函数中执行。使用histogram_reduce函数将这些结果合并到最终的直方图结果中。顶层的histogram函数是将这三个函数连接在一起。","attributes":{},"skip":false,"key":"3.9.13"},{"backlink":"09-Video-Systems.html#fig3.10.1","level":"3.10","list_caption":"Figure: 图 9.1: 视频帧的扫描处理顺序","alt":"图 9.1: 视频帧的扫描处理顺序","nro":76,"url":"images/videoScanlineOrder.jpg","index":1,"caption_template":"_CAPTION_","label":"图 9.1: 视频帧的扫描处理顺序","attributes":{},"skip":false,"key":"3.10.1"},{"backlink":"09-Video-Systems.html#fig3.10.2","level":"3.10","list_caption":"Figure: 图9.2：1080P@60Hz高清视频信号中的典型的同步信号","alt":"图9.2：1080P@60Hz高清视频信号中的典型的同步信号","nro":77,"url":"images/video_syncs.jpg","index":2,"caption_template":"_CAPTION_","label":"图9.2：1080P@60Hz高清视频信号中的典型的同步信号","attributes":{},"skip":false,"key":"3.10.2"},{"backlink":"09-Video-Systems.html#fig3.10.3","level":"3.10","list_caption":"Figure: 图9.3 简单视频滤波器的实现代码","alt":"图9.3 简单视频滤波器的实现代码","nro":78,"url":"images/placeholder.png","index":3,"caption_template":"_CAPTION_","label":"图9.3 简单视频滤波器的实现代码","attributes":{},"skip":false,"key":"3.10.3"},{"backlink":"09-Video-Systems.html#fig3.10.4","level":"3.10","list_caption":"Figure: 图9.4  将视频处理设计与BRAM接口集成","alt":"图9.4  将视频处理设计与BRAM接口集成","nro":79,"url":"images/video_BRAM_interface.jpg","index":4,"caption_template":"_CAPTION_","label":"图9.4  将视频处理设计与BRAM接口集成","attributes":{},"skip":false,"key":"3.10.4"},{"backlink":"09-Video-Systems.html#fig3.10.5","level":"3.10","list_caption":"Figure: 图9.5 将视频处理设计与外部存储接口集成","alt":"图9.5 将视频处理设计与外部存储接口集成","nro":80,"url":"images/video_DDR_interface.jpg","index":5,"caption_template":"_CAPTION_","label":"图9.5 将视频处理设计与外部存储接口集成","attributes":{},"skip":false,"key":"3.10.5"},{"backlink":"09-Video-Systems.html#fig3.10.6","level":"3.10","list_caption":"Figure: 图9.6:通过DMA将视频处理设计模块与外部存储器接口集成","alt":"图9.6:通过DMA将视频处理设计模块与外部存储器接口集成","nro":81,"url":"images/video_DDR_DMA_interface.jpg","index":6,"caption_template":"_CAPTION_","label":"图9.6:通过DMA将视频处理设计模块与外部存储器接口集成","attributes":{},"skip":false,"key":"3.10.6"},{"backlink":"09-Video-Systems.html#fig3.10.7","level":"3.10","list_caption":"Figure: 图9.7: HLS中流接口的代码实现方式","alt":"图9.7: HLS中流接口的代码实现方式","nro":82,"url":"images/placeholder.png","index":7,"caption_template":"_CAPTION_","label":"图9.7: HLS中流接口的代码实现方式","attributes":{},"skip":false,"key":"3.10.7"},{"backlink":"09-Video-Systems.html#fig3.10.8","level":"3.10","list_caption":"Figure: 图9.8：将视频处理设计与流接口集成","alt":"图9.8：将视频处理设计与流接口集成","nro":83,"url":"images/video_streaming_interface.jpg","index":8,"caption_template":"_CAPTION_","label":"图9.8：将视频处理设计与流接口集成","attributes":{},"skip":false,"key":"3.10.8"},{"backlink":"09-Video-Systems.html#fig3.10.9","level":"3.10","list_caption":"Figure: 图9.9: 没有使用线性缓冲区的2D滤波代码","alt":"图9.9: 没有使用线性缓冲区的2D滤波代码","nro":84,"url":"images/placeholder.png","index":9,"caption_template":"_CAPTION_","label":"图9.9: 没有使用线性缓冲区的2D滤波代码","attributes":{},"skip":false,"key":"3.10.9"},{"backlink":"09-Video-Systems.html#fig3.10.10","level":"3.10","list_caption":"Figure: 图 9.10: 使用线性缓冲区实现2D滤波器的代码","alt":"图 9.10: 使用线性缓冲区实现2D滤波器的代码","nro":85,"url":"images/placeholder.png","index":10,"caption_template":"_CAPTION_","label":"图 9.10: 使用线性缓冲区实现2D滤波器的代码","attributes":{},"skip":false,"key":"3.10.10"},{"backlink":"09-Video-Systems.html#fig3.10.11","level":"3.10","list_caption":"Figure: 图9.11:图中所示为图9.10中的代码实现的存储器。 存储器在特定的循环周期时将从线性缓冲区中读取出数据存储在窗口缓冲区的最右端区域。黑色的像素存储在行缓冲区中，红色的像素存储在窗口缓冲区中。","alt":"图9.11:图中所示为图9.10中的代码实现的存储器。 存储器在特定的循环周期时将从线性缓冲区中读取出数据存储在窗口缓冲区的最右端区域。黑色的像素存储在行缓冲区中，红色的像素存储在窗口缓冲区中。","nro":86,"url":"images/video_buffers.jpg","index":11,"caption_template":"_CAPTION_","label":"图9.11:图中所示为图9.10中的代码实现的存储器。 存储器在特定的循环周期时将从线性缓冲区中读取出数据存储在窗口缓冲区的最右端区域。黑色的像素存储在行缓冲区中，红色的像素存储在窗口缓冲区中。","attributes":{},"skip":false,"key":"3.10.11"},{"backlink":"09-Video-Systems.html#fig3.10.12","level":"3.10","list_caption":"Figure: 图9.13:不同滤波器滤波后的效果图。图b时图9.9中代码生成效果图，图c是由图9.10中代码生成效果图，图d是由图9.12中代码生成效果图与图像b相同","alt":"图9.13:不同滤波器滤波后的效果图。图b时图9.9中代码生成效果图，图c是由图9.10中代码生成效果图，图d是由图9.12中代码生成效果图与图像b相同","nro":87,"url":"images/filter2d_results_withshifting.jpg","index":12,"caption_template":"_CAPTION_","label":"图9.13:不同滤波器滤波后的效果图。图b时图9.9中代码生成效果图，图c是由图9.10中代码生成效果图，图d是由图9.12中代码生成效果图与图像b相同","attributes":{},"skip":false,"key":"3.10.12"},{"backlink":"09-Video-Systems.html#fig3.10.13","level":"3.10","list_caption":"Figure: 图9.14：使用线性缓冲区方法代码执行时序。上方执行顺序为图9.10中代码执行时序。下方执行时序为图9.12中代码执行时序。红色框标记的像素在两种实现中以相同的周期输出，在上方执行时序中表示第二行第二个像素，在下方时序中表示第一行第一个像素","alt":"图9.14：使用线性缓冲区方法代码执行时序。上方执行顺序为图9.10中代码执行时序。下方执行时序为图9.12中代码执行时序。红色框标记的像素在两种实现中以相同的周期输出，在上方执行时序中表示第二行第二个像素，在下方时序中表示第一行第一个像素","nro":88,"url":"images/video_timelines.jpg","index":13,"caption_template":"_CAPTION_","label":"图9.14：使用线性缓冲区方法代码执行时序。上方执行顺序为图9.10中代码执行时序。下方执行时序为图9.12中代码执行时序。红色框标记的像素在两种实现中以相同的周期输出，在上方执行时序中表示第二行第二个像素，在下方时序中表示第一行第一个像素","attributes":{},"skip":false,"key":"3.10.13"},{"backlink":"09-Video-Systems.html#fig3.10.14","level":"3.10","list_caption":"Figure: 图9.15：不同边界条件处理方法效果图","alt":"图9.15：不同边界条件处理方法效果图","nro":89,"url":"images/filter2d_results_boundary_conditions.jpg","index":14,"caption_template":"_CAPTION_","label":"图9.15：不同边界条件处理方法效果图","attributes":{},"skip":false,"key":"3.10.14"},{"backlink":"09-Video-Systems.html#fig3.10.15","level":"3.10","list_caption":"Figure: 图9.16: 使用线性缓冲区核常量边界来实现处理边界条件的代码，这种方法处理消耗硬件资源成本很大","alt":"图9.16: 使用线性缓冲区核常量边界来实现处理边界条件的代码，这种方法处理消耗硬件资源成本很大","nro":90,"url":"images/placeholder.png","index":15,"caption_template":"_CAPTION_","label":"图9.16: 使用线性缓冲区核常量边界来实现处理边界条件的代码，这种方法处理消耗硬件资源成本很大","attributes":{},"skip":false,"key":"3.10.15"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.1","level":"3.11","list_caption":"Figure: 图10.1 插入排序算法在数组上操作。初始数组显示在上面，在算法的每个步骤中，都要比较下划线元素并将其桉按顺序排序在左边；在每个阶段，阴影部分按顺序排列。","alt":"图10.1 插入排序算法在数组上操作。初始数组显示在上面，在算法的每个步骤中，都要比较下划线元素并将其桉按顺序排序在左边；在每个阶段，阴影部分按顺序排列。","nro":91,"url":"images/10.1.png","index":1,"caption_template":"_CAPTION_","label":"图10.1 插入排序算法在数组上操作。初始数组显示在上面，在算法的每个步骤中，都要比较下划线元素并将其桉按顺序排序在左边；在每个阶段，阴影部分按顺序排列。","attributes":{},"skip":false,"key":"3.11.1"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.2","level":"3.11","list_caption":"Figure: 图10.2 : 插入排序的参考代码。外部循环for用来遍历数组元素，内部循环while用来遍历已经排序的序列，将当前元素移动到对应位置。","alt":"图10.2 : 插入排序的参考代码。外部循环for用来遍历数组元素，内部循环while用来遍历已经排序的序列，将当前元素移动到对应位置。","nro":92,"url":"images/placeholder.png","index":2,"caption_template":"_CAPTION_","label":"图10.2 : 插入排序的参考代码。外部循环for用来遍历数组元素，内部循环while用来遍历已经排序的序列，将当前元素移动到对应位置。","attributes":{},"skip":false,"key":"3.11.2"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.3","level":"3.11","list_caption":"Figure: 图10.3 ： 根据表10.1中的优化选项1重构插入排序","alt":"图10.3 ： 根据表10.1中的优化选项1重构插入排序","nro":93,"url":"images/placeholder.png","index":3,"caption_template":"_CAPTION_","label":"图10.3 ： 根据表10.1中的优化选项1重构插入排序","attributes":{},"skip":false,"key":"3.11.3"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.4","level":"3.11","list_caption":"Figure: 图10.4：重构表10.1中优化选型3的插入排序代码","alt":"图10.4：重构表10.1中优化选型3的插入排序代码","nro":94,"url":"images/placeholder.png","index":4,"caption_template":"_CAPTION_","label":"图10.4：重构表10.1中优化选型3的插入排序代码","attributes":{},"skip":false,"key":"3.11.4"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.5","level":"3.11","list_caption":"Figure: 图10.5：插入单元的体系结构。每个单元只存放一个本地值，在每次执行中，获取输入值，将其与本地值进行比较，并把较小的值写入输出端口。排序N个元素需要N个单元。","alt":"图10.5：插入单元的体系结构。每个单元只存放一个本地值，在每次执行中，获取输入值，将其与本地值进行比较，并把较小的值写入输出端口。排序N个元素需要N个单元。","nro":95,"url":"images/insertion_cell.jpg","index":5,"caption_template":"_CAPTION_","label":"图10.5：插入单元的体系结构。每个单元只存放一个本地值，在每次执行中，获取输入值，将其与本地值进行比较，并把较小的值写入输出端口。排序N个元素需要N个单元。","attributes":{},"skip":false,"key":"3.11.5"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.6","level":"3.11","list_caption":"Figure: 图10.6：一个插入单元cell0对应的Vivado HLS C代码，其他单元格除了需要具体不同的函数名（比如cell1、cell2等）之外，其他的功能代码都时相同的。代码与图10.5中架构图所展示的功能相同，输入和输出变量采用了HLS的数据流接口，此接口提供了一种抽象层次更高更方便的方法去生成和仿真FIFO。","alt":"图10.6：一个插入单元cell0对应的Vivado HLS C代码，其他单元格除了需要具体不同的函数名（比如cell1、cell2等）之外，其他的功能代码都时相同的。代码与图10.5中架构图所展示的功能相同，输入和输出变量采用了HLS的数据流接口，此接口提供了一种抽象层次更高更方便的方法去生成和仿真FIFO。","nro":96,"url":"images/placeholder.png","index":6,"caption_template":"_CAPTION_","label":"图10.6：一个插入单元cell0对应的Vivado HLS C代码，其他单元格除了需要具体不同的函数名（比如cell1、cell2等）之外，其他的功能代码都时相同的。代码与图10.5中架构图所展示的功能相同，输入和输出变量采用了HLS的数据流接口，此接口提供了一种抽象层次更高更方便的方法去生成和仿真FIFO。","attributes":{},"skip":false,"key":"3.11.6"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.7","level":"3.11","list_caption":"Figure: 图10.7：插入单元对8个元素进行排序，函数的输入是HLS的数据流接口，输出是通过变量out按顺序的输出元素，输出顺序从最小的元素开始，以最大的元素结束。","alt":"图10.7：插入单元对8个元素进行排序，函数的输入是HLS的数据流接口，输出是通过变量out按顺序的输出元素，输出顺序从最小的元素开始，以最大的元素结束。","nro":97,"url":"images/placeholder.png","index":7,"caption_template":"_CAPTION_","label":"图10.7：插入单元对8个元素进行排序，函数的输入是HLS的数据流接口，输出是通过变量out按顺序的输出元素，输出顺序从最小的元素开始，以最大的元素结束。","attributes":{},"skip":false,"key":"3.11.7"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.8","level":"3.11","list_caption":"Figure: 图10.8：insertion_cell_sort函数的测试平台","alt":"图10.8：insertion_cell_sort函数的测试平台","nro":98,"url":"images/placeholder.png","index":8,"caption_template":"_CAPTION_","label":"图10.8：insertion_cell_sort函数的测试平台","attributes":{},"skip":false,"key":"3.11.8"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.9","level":"3.11","list_caption":"Figure: 图10.9：归并排序的操作示例。在顶部，每一个元素的初始状态是长度为1的排序子数组；操作示例中每一步操作，都是围绕将两个已经有序的子数组合并成一个大的有序数组，组成最终的有序序列。","alt":"图10.9：归并排序的操作示例。在顶部，每一个元素的初始状态是长度为1的排序子数组；操作示例中每一步操作，都是围绕将两个已经有序的子数组合并成一个大的有序数组，组成最终的有序序列。","nro":99,"url":"images/10.9.jpg","index":9,"caption_template":"_CAPTION_","label":"图10.9：归并排序的操作示例。在顶部，每一个元素的初始状态是长度为1的排序子数组；操作示例中每一步操作，都是围绕将两个已经有序的子数组合并成一个大的有序数组，组成最终的有序序列。","attributes":{},"skip":false,"key":"3.11.9"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.10","level":"3.11","list_caption":"Figure: 图10.10：合并两个有序数组的操作示例。顶部是初始状态，算法的每一步都需要考虑下划线的元素，并将其中的一个元素排序在输出有序数组中。","alt":"图10.10：合并两个有序数组的操作示例。顶部是初始状态，算法的每一步都需要考虑下划线的元素，并将其中的一个元素排序在输出有序数组中。","nro":100,"url":"images/10.10.jpg","index":10,"caption_template":"_CAPTION_","label":"图10.10：合并两个有序数组的操作示例。顶部是初始状态，算法的每一步都需要考虑下划线的元素，并将其中的一个元素排序在输出有序数组中。","attributes":{},"skip":false,"key":"3.11.10"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.11","level":"3.11","list_caption":"Figure: 图10.11：非递归方式的归并排序实现。merge_sort函数每一步都将两个已经有序的子数组合并成一个大的有序数组 ，直到整个数组有序","alt":"图10.11：非递归方式的归并排序实现。merge_sort函数每一步都将两个已经有序的子数组合并成一个大的有序数组 ，直到整个数组有序","nro":101,"url":"images/placeholder.png","index":11,"caption_template":"_CAPTION_","label":"图10.11：非递归方式的归并排序实现。merge_sort函数每一步都将两个已经有序的子数组合并成一个大的有序数组 ，直到整个数组有序","attributes":{},"skip":false,"key":"3.11.11"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.12","level":"3.11","list_caption":"Figure: 图10.12：重构merge函数的代码实现：在Vivado HLS中循环的启动间隔可以达到1","alt":"图10.12：重构merge函数的代码实现：在Vivado HLS中循环的启动间隔可以达到1","nro":102,"url":"images/placeholder.png","index":12,"caption_template":"_CAPTION_","label":"图10.12：重构merge函数的代码实现：在Vivado HLS中循环的启动间隔可以达到1","attributes":{},"skip":false,"key":"3.11.12"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.13","level":"3.11","list_caption":"Figure: 图10.13： 图10.12中重构代码的行为结构","alt":"图10.13： 图10.12中重构代码的行为结构","nro":103,"url":"images/10.13.jpg","index":13,"caption_template":"_CAPTION_","label":"图10.13： 图10.12中重构代码的行为结构","attributes":{},"skip":false,"key":"3.11.13"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.14","level":"3.11","list_caption":"Figure: 图10.14：重构merge函数的代码实现：在Vivado HLS中循环的启动间隔可以达到1，而且流水线的气泡很少","alt":"图10.14：重构merge函数的代码实现：在Vivado HLS中循环的启动间隔可以达到1，而且流水线的气泡很少","nro":104,"url":"images/placeholder.png","index":14,"caption_template":"_CAPTION_","label":"图10.14：重构merge函数的代码实现：在Vivado HLS中循环的启动间隔可以达到1，而且流水线的气泡很少","attributes":{},"skip":false,"key":"3.11.14"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.15","level":"3.11","list_caption":"Figure: 图10.15：归并排序中任务级流水线的体系结构，可以容纳16个元素的排序","alt":"图10.15：归并排序中任务级流水线的体系结构，可以容纳16个元素的排序","nro":105,"url":"images/10.15.jpg","index":15,"caption_template":"_CAPTION_","label":"图10.15：归并排序中任务级流水线的体系结构，可以容纳16个元素的排序","attributes":{},"skip":false,"key":"3.11.15"},{"backlink":"10-Sorting-Algorithms.html#fig3.11.16","level":"3.11","list_caption":"Figure: 图10.16：重构归并排序的代码实现：利用了Vivado HLS的dataflow和pipeline的指令优化","alt":"图10.16：重构归并排序的代码实现：利用了Vivado HLS的dataflow和pipeline的指令优化","nro":106,"url":"images/placeholder.png","index":16,"caption_template":"_CAPTION_","label":"图10.16：重构归并排序的代码实现：利用了Vivado HLS的dataflow和pipeline的指令优化","attributes":{},"skip":false,"key":"3.11.16"},{"backlink":"11-Huffman-Encoding.html#fig3.12.1","level":"3.12","list_caption":"Figure: 图11.1：Canonical霍夫曼编码过程。 符号被过滤、排序，并且被用来建造霍夫曼树，而不是将整个树传递给解码器（就像“基本的” 霍夫曼编码所完成的那样），这样编码使得只有树的符号长度是解码器所需要的。 请注意，最终Canonical树与初始树在流程开始创建时是不同的。","alt":"图11.1：Canonical霍夫曼编码过程。 符号被过滤、排序，并且被用来建造霍夫曼树，而不是将整个树传递给解码器（就像“基本的” 霍夫曼编码所完成的那样），这样编码使得只有树的符号长度是解码器所需要的。 请注意，最终Canonical树与初始树在流程开始创建时是不同的。","nro":107,"url":"images/canonical_huffman_flow.jpg","index":1,"caption_template":"_CAPTION_","label":"图11.1：Canonical霍夫曼编码过程。 符号被过滤、排序，并且被用来建造霍夫曼树，而不是将整个树传递给解码器（就像“基本的” 霍夫曼编码所完成的那样），这样编码使得只有树的符号长度是解码器所需要的。 请注意，最终Canonical树与初始树在流程开始创建时是不同的。","attributes":{},"skip":false,"key":"3.12.1"},{"backlink":"11-Huffman-Encoding.html#fig3.12.2","level":"3.12","list_caption":"Figure: 图11.2: 显示了整个“top” Huffman_encoding函数，它设置了数组和其他在各个子函数之间传递的变量，并实例化了这些函数。","alt":"图11.2: 显示了整个“top” Huffman_encoding函数，它设置了数组和其他在各个子函数之间传递的变量，并实例化了这些函数。","nro":108,"url":"images/placeholder.png","index":2,"caption_template":"_CAPTION_","label":"图11.2: 显示了整个“top” Huffman_encoding函数，它设置了数组和其他在各个子函数之间传递的变量，并实例化了这些函数。","attributes":{},"skip":false,"key":"3.12.2"},{"backlink":"11-Huffman-Encoding.html#fig3.12.3","level":"3.12","list_caption":"Figure: 图11.4：Canonical霍夫曼编码的硬件实现框图。灰色块表示由不同子函数生成和消耗的重要输入和输出数据。白色块对应于函数（计算核心）。注意，数组初始位长度出现两次，以使图形更加清晰。","alt":"图11.4：Canonical霍夫曼编码的硬件实现框图。灰色块表示由不同子函数生成和消耗的重要输入和输出数据。白色块对应于函数（计算核心）。注意，数组初始位长度出现两次，以使图形更加清晰。","nro":109,"url":"images/che_dataflow.jpg","index":3,"caption_template":"_CAPTION_","label":"图11.4：Canonical霍夫曼编码的硬件实现框图。灰色块表示由不同子函数生成和消耗的重要输入和输出数据。白色块对应于函数（计算核心）。注意，数组初始位长度出现两次，以使图形更加清晰。","attributes":{},"skip":false,"key":"3.12.3"},{"backlink":"11-Huffman-Encoding.html#fig3.12.4","level":"3.12","list_caption":"Figure: 图11.5：filter函数在输入数组in中迭代，并将具有非零频率字段的任何符号条目添加到输出数组out。此外，它记录非零频率元素的数量并将其传递到输出参数n。","alt":"图11.5：filter函数在输入数组in中迭代，并将具有非零频率字段的任何符号条目添加到输出数组out。此外，它记录非零频率元素的数量并将其传递到输出参数n。","nro":110,"url":"images/placeholder.png","index":4,"caption_template":"_CAPTION_","label":"图11.5：filter函数在输入数组in中迭代，并将具有非零频率字段的任何符号条目添加到输出数组out。此外，它记录非零频率元素的数量并将其传递到输出参数n。","attributes":{},"skip":false,"key":"3.12.4"},{"backlink":"11-Huffman-Encoding.html#fig3.12.5","level":"3.12","list_caption":"Figure: 图11.6：sort函数根据输入符号的频率值对其进行基数排序。","alt":"图11.6：sort函数根据输入符号的频率值对其进行基数排序。","nro":111,"url":"images/placeholder.png","index":5,"caption_template":"_CAPTION_","label":"图11.6：sort函数根据输入符号的频率值对其进行基数排序。","attributes":{},"skip":false,"key":"3.12.5"},{"backlink":"11-Huffman-Encoding.html#fig3.12.6","level":"3.12","list_caption":"Figure: 图11.8：霍夫曼树的创建完整的代码。 该代码将已排序的符号数组in作为输入，该数组中国的元素数量为n，并输出left, right和 parent三个数组的霍夫曼树。","alt":"图11.8：霍夫曼树的创建完整的代码。 该代码将已排序的符号数组in作为输入，该数组中国的元素数量为n，并输出left, right和 parent三个数组的霍夫曼树。","nro":112,"url":"images/placeholder.png","index":6,"caption_template":"_CAPTION_","label":"图11.8：霍夫曼树的创建完整的代码。 该代码将已排序的符号数组in作为输入，该数组中国的元素数量为n，并输出left, right和 parent三个数组的霍夫曼树。","attributes":{},"skip":false,"key":"3.12.6"},{"backlink":"11-Huffman-Encoding.html#fig3.12.7","level":"3.12","list_caption":"Figure: 图11.9：用于确定每个比特长度上符号数量的完整代码。","alt":"图11.9：用于确定每个比特长度上符号数量的完整代码。","nro":113,"url":"images/placeholder.png","index":7,"caption_template":"_CAPTION_","label":"图11.9：用于确定每个比特长度上符号数量的完整代码。","attributes":{},"skip":false,"key":"3.12.7"},{"backlink":"11-Huffman-Encoding.html#fig3.12.8","level":"3.12","list_caption":"Figure: 图11.10：重新组织霍夫曼树的完整代码，以便任何节点的深度低于参数MAX_CODEWORD_LENGTH指定的目标值。","alt":"图11.10：重新组织霍夫曼树的完整代码，以便任何节点的深度低于参数MAX_CODEWORD_LENGTH指定的目标值。","nro":114,"url":"images/placeholder.png","index":8,"caption_template":"_CAPTION_","label":"图11.10：重新组织霍夫曼树的完整代码，以便任何节点的深度低于参数MAX_CODEWORD_LENGTH指定的目标值。","attributes":{},"skip":false,"key":"3.12.8"},{"backlink":"11-Huffman-Encoding.html#fig3.12.9","level":"3.12","list_caption":"Figure: 图11.11：完整的canonizing霍夫曼树代码，它定义了每个符号的位数","alt":"图11.11：完整的canonizing霍夫曼树代码，它定义了每个符号的位数","nro":115,"url":"images/placeholder.png","index":9,"caption_template":"_CAPTION_","label":"图11.11：完整的canonizing霍夫曼树代码，它定义了每个符号的位数","attributes":{},"skip":false,"key":"3.12.9"},{"backlink":"11-Huffman-Encoding.html#fig3.12.10","level":"3.12","list_caption":"Figure: 图11.12：图11.11中process_symbols循环的替代循环结构。","alt":"图11.12：图11.11中process_symbols循环的替代循环结构。","nro":116,"url":"images/placeholder.png","index":10,"caption_template":"_CAPTION_","label":"图11.12：图11.11中process_symbols循环的替代循环结构。","attributes":{},"skip":false,"key":"3.12.10"},{"backlink":"11-Huffman-Encoding.html#fig3.12.11","level":"3.12","list_caption":"Figure: 图11.13:为每个符号生成canonical霍夫曼码字的完整代码。可以在知道每个符号的比特数的情况下计算码字（存储在输入数组symbol_bits[]中）。另外，我们有另一个输入数组codeword_length_histogram[]，其在每个条目中存储具有该位长度的码字的符号数，输出是存储在encoding[]数组中的每个符号的代码字。","alt":"图11.13:为每个符号生成canonical霍夫曼码字的完整代码。可以在知道每个符号的比特数的情况下计算码字（存储在输入数组symbol_bits[]中）。另外，我们有另一个输入数组codeword_length_histogram[]，其在每个条目中存储具有该位长度的码字的符号数，输出是存储在encoding[]数组中的每个符号的代码字。","nro":117,"url":"images/placeholder.png","index":11,"caption_template":"_CAPTION_","label":"图11.13:为每个符号生成canonical霍夫曼码字的完整代码。可以在知道每个符号的比特数的情况下计算码字（存储在输入数组symbol_bits[]中）。另外，我们有另一个输入数组codeword_length_histogram[]，其在每个条目中存储具有该位长度的码字的符号数，输出是存储在encoding[]数组中的每个符号的代码字。","attributes":{},"skip":false,"key":"3.12.11"},{"backlink":"11-Huffman-Encoding.html#fig3.12.12","level":"3.12","list_caption":"Figure: 图11.14：完整的canonical霍夫曼编码测试平台代码。该代码使用输入文件中的数据初始化in数组，并将它传递给顶层的huffman_encoding函数，然后它将结果码字存储到一个文件中，并将其与另一个黄金参考文件进行比较，最后打印出比较结果，并返回适当的值","alt":"图11.14：完整的canonical霍夫曼编码测试平台代码。该代码使用输入文件中的数据初始化in数组，并将它传递给顶层的huffman_encoding函数，然后它将结果码字存储到一个文件中，并将其与另一个黄金参考文件进行比较，最后打印出比较结果，并返回适当的值","nro":118,"url":"images/placeholder.png","index":12,"caption_template":"_CAPTION_","label":"图11.14：完整的canonical霍夫曼编码测试平台代码。该代码使用输入文件中的数据初始化in数组，并将它传递给顶层的huffman_encoding函数，然后它将结果码字存储到一个文件中，并将其与另一个黄金参考文件进行比较，最后打印出比较结果，并返回适当的值","attributes":{},"skip":false,"key":"3.12.12"}]},"title":"FPGA并行编程","language":"zh-hans","gitbook":"3.2.3","description":"pp4fpga"},"file":{"path":"11-Huffman-Encoding.md","mtime":"2019-04-17T09:47:11.078Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-04-17T09:48:37.360Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-disqus/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

